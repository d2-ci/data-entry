{"version":3,"sources":["D2App/data-workspace/inputs/inputs.module.css","D2App/data-workspace/data-entry-cell/data-entry-cell.module.css","D2App/data-workspace/entry-form.module.css","D2App/data-workspace/section-form/section.module.css","D2App/context-selection/attribute-option-combo-selector-bar-item/categories-menu.module.css","D2App/shared/error-message/error-message.module.css","D2App/context-selection/menu-select/menu-select.module.css","D2App/context-selection/org-unit-selector-bar-item/org-unit-selector-bar-item.module.css","D2App/context-selection/period-selector-bar-item/period-menu.module.css","D2App/context-selection/period-selector-bar-item/year-navigator.module.css","D2App/data-workspace/data-workspace.module.css","D2App/data-workspace/category-combo-table.module.css","D2App/app/layout/layout.module.css","D2App/context-selection/use-context-selection/use-context-selection.js","D2App/context-selection/attribute-option-combo-selector-bar-item/categories-menu.js","D2App/shared/fixed-periods/fixed-periods.js","D2App/shared/period/use-period.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-category-combination.js","D2App/context-selection/attribute-option-combo-selector-bar-item/attribute-option-combo-selector-bar-item.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-selected.js","D2App/context-selection/attribute-option-combo-selector-bar-item/omit.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-should-component-render-null.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-selector-bar-item-label.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-selector-bar-item-value.js","D2App/context-selection/attribute-option-combo-selector-bar-item/use-on-dependent-params-change.js","D2App/context-selection/menu-select/menu-select.js","D2App/context-selection/data-set-selector-bar-item/data-set-selector-bar-item.js","D2App/context-selection/data-set-selector-bar-item/use-data-set.js","D2App/context-selection/data-set-selector-bar-item/use-selectable-data-sets.js","D2App/context-selection/org-unit-selector-bar-item/debounced-search-input.js","D2App/context-selection/org-unit-selector-bar-item/use-debounce.js","D2App/context-selection/org-unit-selector-bar-item/disabled-tooltip.js","D2App/context-selection/org-unit-selector-bar-item/load-offline-level.js","D2App/context-selection/org-unit-selector-bar-item/use-load-offline-levels.js","D2App/context-selection/org-unit-selector-bar-item/use-offline-levels-to-load.js","D2App/context-selection/org-unit-selector-bar-item/get-offline-levels-to-load.js","D2App/context-selection/org-unit-selector-bar-item/use-organisation-unit-levels.js","D2App/context-selection/org-unit-selector-bar-item/use-organisation-unit.js","D2App/context-selection/org-unit-selector-bar-item/use-user-org-units.js","D2App/context-selection/org-unit-selector-bar-item/org-unit-selector-bar-item.js","D2App/context-selection/org-unit-selector-bar-item/use-org-unit-paths-by-name.js","D2App/context-selection/org-unit-selector-bar-item/use-expanded-state.js","D2App/context-selection/org-unit-selector-bar-item/use-select-bar-item-value.js","D2App/context-selection/period-selector-bar-item/compute-max-year.js","D2App/context-selection/period-selector-bar-item/get-most-recent-completed-year.js","D2App/context-selection/period-selector-bar-item/disabled-tooltip.js","D2App/context-selection/period-selector-bar-item/period-menu.js","D2App/context-selection/period-selector-bar-item/use-data-set-period-type.js","D2App/context-selection/period-selector-bar-item/use-deselect-on-period-type-change.js","D2App/context-selection/period-selector-bar-item/year-navigator.js","D2App/context-selection/period-selector-bar-item/period-selector-bar-item.js","D2App/context-selection/period-selector-bar-item/use-select-bar-item-value.js","D2App/context-selection/section-filter-selector-bar-item/use-data-set-sections-info.js","D2App/context-selection/section-filter-selector-bar-item/section-filter-selector-bar-item.js","D2App/context-selection/section-filter-selector-bar-item/use-selector-bar-item-value.js","D2App/context-selection/section-filter-selector-bar-item/use-on-dependent-params-change.js","D2App/context-selection/section-filter-selector-bar-item/use-should-component-render-null.js","D2App/context-selection/context-selection/context-selection.js","D2App/context-selection/context-selection/use-should-hide-clear-button.js","D2App/custom-forms/query-key-factory.js","D2App/custom-forms/use-custom-form.js","D2App/custom-forms/use-custom-forms.js","D2App/custom-forms/use-custom-forms-prefetch.js","D2App/data-workspace/custom-form/iframe-assets.js","D2App/data-workspace/custom-form/custom-form-iframe.js","D2App/data-workspace/custom-form/mock-processed-html.js","D2App/metadata/utils.js","D2App/metadata/use-metadata.js","D2App/metadata/selectors.js","D2App/data-workspace/data-entry-cell/data-entry-cell.js","D2App/data-workspace/query-key-factory.js","D2App/data-workspace/use-attribute-option-combo.js","D2App/data-workspace/data-entry-cell/use-data-value-mutation.js","D2App/data-workspace/data-entry-cell/value-types.js","D2App/data-workspace/inputs/utils.js","D2App/data-workspace/inputs/validators.js","D2App/data-workspace/inputs/generic-input.js","D2App/data-workspace/inputs/boolean-radios.js","D2App/data-workspace/inputs/file-inputs.js","D2App/data-workspace/inputs/long-text.js","D2App/data-workspace/inputs/option-set.js","D2App/data-workspace/inputs/true-only-checkbox.js","D2App/data-workspace/data-entry-cell/entry-field-input.js","D2App/data-workspace/data-entry-cell/use-data-value-params.js","D2App/data-workspace/data-entry-cell/inner-wrapper.js","D2App/data-workspace/data-entry-cell/validation-tooltip.js","D2App/data-workspace/data-entry-cell/data-entry-field.js","D2App/data-workspace/category-combo-table.js","D2App/data-workspace/data-entry-cell/use-active-cell.js","D2App/shared/utils.js","D2App/data-workspace/section-form/section.js","D2App/data-workspace/section-form/section-form.js","D2App/data-workspace/entry-form.js","D2App/data-workspace/default-form.js","D2App/data-workspace/custom-form.js","D2App/data-workspace/final-form-wrapper.js","D2App/data-workspace/keyboard-nav-manager.js","D2App/data-workspace/use-initial-data-values.js","D2App/data-workspace/data-workspace.js","D2App/data-workspace/use-data-set.js","D2App/app/layout/layout.js","D2App/app/mutation-indicator/mutation-indicator.js","D2App/app/app.js","D2App/app/query-client/create-query-fn.js","D2App/app/query-client/persister.js","D2App/app/query-client/use-query-client.js","D2App/app/app-wrapper.js"],"names":["module","exports","PARAMS_SCHEMA","dataSetId","StringParam","orgUnitId","periodId","attributeOptionComboSelection","withDefault","ObjectParam","sectionFilter","useDataSetId","useQueryParam","useOrgUnitId","usePeriodId","useAttributeOptionComboSelection","useSectionFilter","useContextSelection","useQueryParams","CategoriesMenu","_ref","_categoryCombination$","categoryCombination","close","selected","onChange","called","loading","i18n","t","error","React","createElement","className","css","container","inputs","data","categories","map","_ref2","id","displayName","categoryOptions","input","key","SingleSelectField","label","_ref3","categoryId","_ref4","SingleSelectOption","value","Button","secondary","onClick","_","evt","stopPropagation","DAILY","WEEKLY","WEEKLY_WEDNESDAY","WEEKLY_THURSDAY","WEEKLY_SATURDAY","WEEKLY_SUNDAY","BI_WEEKLY","MONTHLY","BI_MONTHLY","QUARTERLY","SIX_MONTHLY","SIX_MONTHLY_APRIL","YEARLY","FINANCIAL_APRIL","FINANCIAL_JULY","FINANCIAL_OCT","FINANCIAL_NOV","PERIOD_TYPES","Set","isValidPeriodType","periodType","has","getMonthName","getCurrentDate","Date","now","getYearWithOffset","offset","offsetInt","parseInt","getFullYear","getDailyPeriodType","formatYyyyMmDd","fnFilter","config","periods","isFilter","filterFuturePeriods","isReverse","reversePeriods","year","date","concat","period","startDate","endDate","iso","replace","push","setDate","getDate","reverse","getWeeklyPeriodType","weekObj","startDayOfWeek","arguments","length","undefined","jan4","jan4DayOfWeek","getDay","dayDiff","getEpiWeekStartDay","startDay","week","shortName","weekNumber","getBiWeeklyPeriodType","day","biWeek","biWeekNumber","getMonthlyPeriodType","formatIso","y","m","String","getMonth","monthName","getBiMonthlyPeriodType","index","monthStart","monthEnd","fullYear","getQuarterlyPeriodType","quarter","getSixMonthlyPeriodType","getSixMonthlyAprilPeriodType","getYearlyPeriodType","setMonth","dateString","toString","getFinancialOctoberPeriodType","i","setYear","yearStart","yearEnd","getFinancialNovemberPeriodType","getFinancialJulyPeriodType","getFinancialAprilPeriodType","defaultFormatYyyyMmDd","d","defaultFilterFuturePeriods","array","getFixedPeriodTypes","type","regex","getPeriods","getYearOffsetFromNow","yearInt","Number","isInteger","Error","getFixedPeriodsByTypeAndYear","fixedPeriod","periodTypeObj","find","getFixedPeriodType","parsePeriodId","allowedTypes","periodTypes","filter","some","allowedType","match","isValidDate","isNaN","getTime","getFixedPeriodsForTypeAndDateRange","startDateReached","convertedPeriods","forEach","periodEnd","endsAfterPeriodStart","usePeriod","useMemo","useCategoryCombination","queryKey","params","fields","isIdle","isLoading","useQuery","enabled","select","periodStartDate","periodEndDate","categoryCombo","categoriesWithFilteredOptions","category","categoryOption","isOptionWithinPeriod","hasCategoryNoOptions","AttributeOptionComboSelectorBarItem","setSelectionHasNoFormMessage","open","setOpen","useState","deselectAll","setAttributeOptionComboSelection","nextSelected","collection","nextCollection","omit","Object","values","useSelected","shouldComponentRenderNull","_categoryCombination$2","isDefault","useShouldComponentRenderNull","nsSeparator","useSelectorBarItemLabel","valueLabel","amount","useSelectorBarItemValue","cb","initialExecution","useRef","useEffect","current","useOnDependentParamsChange","useSetSelectionHasNoFormMessage","renderMenu","SelectorBarItem","disabled","noValueMessage","MenuSelect","dataTest","menuSelect","Menu","MenuItem","dataValue","active","DataSetSelectorBarItem","_dataSet$data","_selectableDataSets$d","_selectableDataSets$d2","dataSetOpen","setDataSetOpen","setDataSetId","dataSet","useDataSet","selectableDataSets","onSuccess","paging","dataSets","useSelectableDataSets","isDoneLoading","showLoadingMessage","DebouncedSearchInput","initialValue","setValue","debouncedValue","delay","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","InputField","dense","name","placeholder","nextValue","DisabledTooltip","children","tooltipContent","Tooltip","content","ref","onMouseOver","onMouseOut","defaultProps","QUERY_ORG_UNIT_FROM_UI","orgUnit","resource","isUserDataViewFallback","QUERY_ORG_CHILDREN_FROM_UI","async","loadOfflineLevel","dataEngine","offlineLevels","variables","orgData","query","childrenSize","nextOfflineLevels","child","loadAllOfflineLevels","offlineLevelsToLoadData","onDone","allRequests","offlineLevelToLoad","Promise","all","finally","useLoadOfflineLevels","done","setDone","useDataEngine","offlineLevelsToLoad","organisationUnitLevels","enable","organisationUnits","userOrganisationUnits","userOrgUnit","foundLevel","orgUnitLevel","level","getOfflineLevelsToLoad","useOfflineLevelsToLoad","useOrgUnit","useUserOrgUnits","OrganisationUnitSetSelectorBarItem","setFilter","orgUnitPathsByName","searchTerm","path","useOrgUnitPathsByName","orgUnitOpen","setOrgUnitOpen","expanded","handleExpand","handleCollapse","setExpanded","p","useExpandedState","setOrgUnitId","userOrgUnits","selectorBarItemValue","_orgUnit$data","filteredOrgUnitPaths","orgUnitPathsByNameLoading","itemContentContainer","searchInputContainer","orgUnitTreeContainer","OrganisationUnitTreeRootLoading","OrganisationUnitTreeRootError","OrganisationUnitTree","singleSelection","roots","e","computeMaxYear","getMostRecentCompletedYear","PeriodMenu","selectedPeriod","systemInfo","dateFormat","useConfig","moment","format","toUpperCase","classes","menu","useDataSetPeriodType","useDeselectOnPeriodTypeChange","setPeriodId","previousPeriodType","setPreviousPeriodType","_parsePeriodId","_parsePeriodId$period","convertPeriodIdToPeriodType","dataSetPeriodType","YearNavigator","maxYear","onYearChange","icon","IconArrowLeft24","IconArrowRight24","PeriodSelectorBarItem","periodOpen","setPeriodOpen","setMaxYear","newMaxYear","Fragment","useDataSetSectionsInfo","SectionFilterSelectorBarItem","_dataSetSectionsInfo$","_dataSetSectionsInfo$2","setSectionFilter","dataSetSectionsInfo","sectionFilterValue","sections","selectedSection","renderAsTabs","formType","sectionOptions","selectableOptions","ContextSelector","hideClearButton","selection","useShouldHideClearButton","clearEntireSelection","setSelectionContext","useCallback","useClearEntireSelection","SelectorBar","onClearSelectionClick","OrgUnitSetSelectorBarItem","queryKeyFactory","byId","useCustomForm","getCustomForms","createSelector","dataEntryForm","version","useCustomForms","keys","useCustomFormsPrefetch","queryClient","useQueryClient","isSuccess","customForm","getQueryData","predicate","_query$meta","meta","prefetchQuery","persist","CSS_FILES","media","styleSheet","SCRIPT_FILES","wrapHtmlInTemplate","baseUrl","html","createLinkTag","join","script","createScriptTag","fixRelativePaths","HtmlReport","iframeRef","iframeHasLoaded","setIframeHasLoaded","height","setHeight","iframeHtml","contentWindow","document","documentElement","iframeBody","body","adjustHeight","iframeHtmlRect","getBoundingClientRect","iframeBodyRect","maxInnerHeight","Math","max","ceil","heightObserver","window","ResizeObserver","observe","disconnect","srcDoc","title","width","seamless","sandbox","onLoad","_JSXStyle","hashById","reduce","acc","curr","useMetadata","result","hashFunction","currKey","prop","Array","isArray","hashArraysInObject","getCategories","metadata","getCategoryCombos","categoryCombos","getDataSetById","_getDataSets","getDataSets","getCategoryComboById","getCategoriesByCategoryComboId","createCachedSelector","categoryComboId","getCategoryOptionsByCategoryId","getCategoryOptionCombosByCategoryComboId","categoryOptionCombos","getDataElementsByDataSetId","dataElements","dataSetElements","dse","_dse$categoryCombo","de","dataElement","getDataElementsBySection","sectionId","getSections","getSectionById","section","getGroupedDataElementsByCatComboInOrder","grouped","previousDe","lastGroup","matchingId","getGroupedDataElementsByCatCombo","getIdentifier","item","_grouped$identifier","identifier","entries","getCoCByCategoryOptions","__","categoryOptionIds","targetIds","coc","currentIds","sameLength","sameIds","every","includes","console","warn","DataEntryCell","styles","dataEntryCell","dataValueSets","attributeOptionCombo","useAttributeOptionCombo","isError","selectedOptions","MUTATION_TYPES","mutationsByType","DEFAULT","FILE_UPLOAD","DELETE","updateDataValue","previousDataValueSet","updatedDataValue","targetIndex","newDataValues","dataValues","addDataValue","newDataValue","deleteDataValue","matchIndex","previousDataValues","slice","useDataValueMutation","mutationType","engine","mutationFn","mutate","dataValueSetQueryKey","useMutation","mutationKey","onMutate","cancelQueries","setQueryData","_newDataValue$file","_newDataValue$file2","findIndex","categoryOptionCombo","co","ou","pe","isNewDataValue","newValue","file","size","formattedNewDataValue","onError","err","context","retry","VALUE_TYPES","freeze","BOOLEAN","DATE","DATETIME","EMAIL","FILE_RESOURCE","IMAGE","INTEGER","INTEGER_NEGATIVE","INTEGER_POSITIVE","INTEGER_ZERO_OR_POSITIVE","LETTER","LONG_TEXT","NUMBER","PERCENTAGE","PHONE_NUMBER","TEXT","TIME","TRUE_ONLY","UNIT_INTERVAL","URL","convertCallbackSignatures","props","onFocus","onBlur","PropTypes","objectOf","string","any","func","text","createMaxCharacterLength","letter","timeRegex","integerPositive","composeValidators","integer","createMinNumber","integerZeroOrPositive","integerNegative","createMaxNumber","percentage","createNumberRange","unitInterval","_extends","assign","target","source","prototype","hasOwnProperty","call","apply","this","validatorsByValueType","email","number","internationalPhoneNumber","test","c","url","htmlTypeAttrsByValueType","GenericInput","fieldname","dataValueParams","setSyncStatus","valueType","useField","validate","subscription","dirty","valid","lastSyncedValue","setLastSyncedValue","handleBlur","syncing","synced","syncData","basicInput","BooleanRadios","yesField","noField","clearField","form","useForm","fieldState","getFieldState","clearButtonProps","radioFlexWrapper","Radio","small","cx","whiteButton","hidden","FileResourceInput","image","pristine","uploadFile","deleteFile","contentLength","fileInputWrapper","IconAttachment16","color","colors","grey700","toFixed","deleteFileButton","FileInput","fileInput","files","newFile","File","buttonLabel","LongText","longText","rows","OptionSet","optionSetId","handleChange","optionSet","optionSets","getOptionSets","getOptionSetById","options","opt","selectFlexWrapper","selectFlexItem","SingleSelect","TrueOnlyCheckbox","checked","checkboxWrapper","Checkbox","EntryFieldInput","deId","cocId","split","dataEntryContext","metadataFetch","attributeComboId","ds","attributeOptionIdList","cc","cp","useDataValueParams","sharedProps","optionSetValue","SyncStatusIndicator","isSynced","topRightIndicator","IconMore16","topRightTriangle","CommentIndicator","isComment","bottomLeftIndicator","bottomLeftTriangle","InnerWrapper","syncStatus","invalid","activeMutations","useIsMutating","mutation","cellStateClassName","cellInnerWrapper","onKeyDown","event","shiftKey","TooltipManager","forwardRef","validationTooltip","ValidationTooltip","setContent","DataEntryField","memo","CategoryComboTable","filterText","globalFilterText","maxColumnsInSection","activeDeId","activeCocId","useFormState","useActiveCell","computedCategoryOptions","args","lim","add","row","len","j","a","cartesian","cat","catColSpan","rowToColumnsMap","nrOfOptions","repeat","columnsToRender","fill","flatMap","span","columns","displayFormName","sortedCOCs","renderPaddedCells","filteredDataElements","toLowerCase","itemsHiddenCnt","isThisTableActive","isHeaderActive","headerIdx","headerColSpan","idxDiff","TableBody","colInfo","TableRowHead","TableCellHead","categoryNameHeader","colSpan","tableHeader","PaddingCell","TableRow","TableCell","dataElementName","tableCell","hiddenByFilterCell","count","paddingCell","SectionFormSection","setFilterText","groupedDataElements","disableDataElementAutoGroup","grp","filterInputId","Table","table","suppressZebraStriping","TableHead","headerCell","labelWrapper","description","htmlFor","filterWrapper","IconFilter16","grey600","filterInput","TabbedSectionForm","setSelectedId","s","TabBar","sectionTab","Tab","FORM_TYPES","formTypeToComponent","NoticeBox","warning","SECTION","filteredSections","CUSTOM","EntryForm","setGlobalFilterText","Component","FilterField","filterField","FinalFormWrapper","initialValues","Form","onSubmit","log","keepDirtyOnReinitialize","KeyboardNavManager","rootNodeRef","preventDefault","rootNode","_nextElement$select","tabbableElements","tabbable","currentIdx","indexOf","activeElement","nextElement","focus","focusNext","_prevElement$select","prevElement","focusPrev","DataWorkspace","selectionHasNoFormMessage","dataSetFetch","initialDataValuesFetch","hasParameters","networkMode","useInitialDataValues","CircularLoader","wrapper","Layout","header","main","sidebar","footer","showSidebar","showFooter","wrapperClass","classnames","MutationIndicator","pendingMutations","message","Tag","IconError16","IconCheckmarkCircle16","App","contextSelection","ContextSelection","dataWorkspace","Router","QueryParamProvider","ReactRouterRoute","Route","CssVariables","spacers","theme","createQueryFn","appRuntimeQuery","then","createIDBPersister","idbValidKey","persistClient","throttle","client","set","restoreClient","get","removeClient","del","QueryClient","queryFn","setDefaultOptions","queries","refetchOnWindowFocus","cacheTime","Infinity","persister","persistQueryClient","maxAge","dehydrateOptions","dehydrateMutations","dehydrateQueries","shouldDehydrateQuery","state","status","shouldPersist","AppWrapper","QueryClientProvider"],"mappings":"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","file":"static/js/app.b7b46175.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hw100\":\"inputs_hw100__3cUUD\",\"cellPadding\":\"inputs_cellPadding__lEKI3\",\"whiteButton\":\"inputs_whiteButton__1LJgF\",\"densePadding\":\"inputs_densePadding__21Jk4\",\"basicInput\":\"inputs_basicInput__fjKDA inputs_hw100__3cUUD inputs_cellPadding__lEKI3\",\"longText\":\"inputs_longText__3tc2n inputs_basicInput__fjKDA inputs_hw100__3cUUD inputs_cellPadding__lEKI3\",\"checkboxWrapper\":\"inputs_checkboxWrapper__3ziS- inputs_hw100__3cUUD inputs_densePadding__21Jk4\",\"radioFlexWrapper\":\"inputs_radioFlexWrapper__1CQ_0 inputs_hw100__3cUUD inputs_densePadding__21Jk4\",\"hidden\":\"inputs_hidden__11MBJ\",\"selectFlexWrapper\":\"inputs_selectFlexWrapper__2cNoH inputs_hw100__3cUUD inputs_densePadding__21Jk4\",\"selectFlexItem\":\"inputs_selectFlexItem__3grjA\",\"fileInputWrapper\":\"inputs_fileInputWrapper__lWxoN inputs_hw100__3cUUD inputs_densePadding__21Jk4\",\"fileInput\":\"inputs_fileInput__vlg3D\",\"fileSummary\":\"inputs_fileSummary__35qaK\",\"deleteFileButton\":\"inputs_deleteFileButton__3mdZe inputs_whiteButton__1LJgF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"validationTooltip\":\"data-entry-cell_validationTooltip__39HQn\",\"dataEntryCell\":\"data-entry-cell_dataEntryCell__3zJEg\",\"cellInnerWrapper\":\"data-entry-cell_cellInnerWrapper__1JDRH\",\"disabled\":\"data-entry-cell_disabled__1o8Kh\",\"active\":\"data-entry-cell_active__3ICIv\",\"invalid\":\"data-entry-cell_invalid__2T0HB\",\"synced\":\"data-entry-cell_synced__k4AVc\",\"topRightIndicator\":\"data-entry-cell_topRightIndicator__280Xt\",\"bottomLeftIndicator\":\"data-entry-cell_bottomLeftIndicator__3PKDd\",\"topRightTriangle\":\"data-entry-cell_topRightTriangle__15jVI\",\"bottomLeftTriangle\":\"data-entry-cell_bottomLeftTriangle__1Q37X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"entry-form_table__1bJGh\",\"filterWrapper\":\"entry-form_filterWrapper__1IA3P\",\"filterField\":\"entry-form_filterField__2RCNP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"section_table__3jy5P\",\"headerCell\":\"section_headerCell__2rZsA\",\"labelWrapper\":\"section_labelWrapper__1JemA\",\"title\":\"section_title__1qmNS\",\"description\":\"section_description__1xwGz\",\"filterWrapper\":\"section_filterWrapper__1fQ6T\",\"filterInput\":\"section_filterInput__1-sql\",\"sectionTab\":\"section_sectionTab__1OvvI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"categories-menu_container__gcKJ6\",\"inputs\":\"categories-menu_inputs__23WFq\",\"input\":\"categories-menu_input__LOiJY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"error-message_wrapper__17C15\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuSelect\":\"menu-select_menuSelect__2wY8M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemContentContainer\":\"org-unit-selector-bar-item_itemContentContainer__2CxCn\",\"searchInputContainer\":\"org-unit-selector-bar-item_searchInputContainer__Oxf6u\",\"orgUnitTreeContainer\":\"org-unit-selector-bar-item_orgUnitTreeContainer__1JGBG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"period-menu_menu__CKEQa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"year-navigator_container__3tWfA\",\"year\":\"year-navigator_year__1-oYj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"data-workspace_wrapper__3uuqb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cellBase\":\"category-combo-table_cellBase__vuEhs\",\"tableHeader\":\"category-combo-table_tableHeader__1moGi category-combo-table_cellBase__vuEhs\",\"categoryNameHeader\":\"category-combo-table_categoryNameHeader__GXws- category-combo-table_tableHeader__1moGi category-combo-table_cellBase__vuEhs\",\"dataElementName\":\"category-combo-table_dataElementName__1UtfY category-combo-table_cellBase__vuEhs\",\"active\":\"category-combo-table_active__3rsNF\",\"tableCell\":\"category-combo-table_tableCell__vaMF- category-combo-table_cellBase__vuEhs\",\"hiddenByFilterCell\":\"category-combo-table_hiddenByFilterCell__n0vCW category-combo-table_cellBase__vuEhs\",\"table\":\"category-combo-table_table__H1IEN\",\"paddingCell\":\"category-combo-table_paddingCell__31-sI category-combo-table_tableHeader__1moGi category-combo-table_cellBase__vuEhs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"layout_wrapper__t4ys_\",\"showSidebar\":\"layout_showSidebar__3kRCf\",\"showFooter\":\"layout_showFooter__2QEnR\",\"header\":\"layout_header__32xI8\",\"main\":\"layout_main__tku6I\",\"sidebar\":\"layout_sidebar__2JyT-\",\"footer\":\"layout_footer__3RbA5\"};","import { useCallback } from 'react';\nimport { ObjectParam, StringParam, useQueryParams, useQueryParam, withDefault } from 'use-query-params';\nexport const PARAMS_SCHEMA = {\n  dataSetId: StringParam,\n  orgUnitId: StringParam,\n  periodId: StringParam,\n  attributeOptionComboSelection: withDefault(ObjectParam, {}),\n  sectionFilter: StringParam\n};\nexport function useDataSetId() {\n  return useQueryParam('dataSetId', PARAMS_SCHEMA.dataSetId);\n}\nexport function useOrgUnitId() {\n  return useQueryParam('orgUnitId', PARAMS_SCHEMA.orgUnitId);\n}\nexport function usePeriodId() {\n  return useQueryParam('periodId', PARAMS_SCHEMA.periodId);\n}\nexport function useAttributeOptionComboSelection() {\n  return useQueryParam('attributeOptionComboSelection', PARAMS_SCHEMA.attributeOptionComboSelection);\n}\nexport function useSectionFilter() {\n  return useQueryParam('sectionFilter', PARAMS_SCHEMA.sectionFilter);\n}\nexport function useContextSelection() {\n  return useQueryParams(PARAMS_SCHEMA);\n}\nexport function useClearEntireSelection() {\n  const [, setSelectionContext] = useContextSelection();\n  return useCallback(() => {\n    setSelectionContext({\n      dataSetId: undefined,\n      orgUnitId: undefined,\n      periodId: undefined,\n      attributeOptionComboSelection: undefined,\n      sectionFilter: undefined\n    });\n  }, [setSelectionContext]);\n}","import i18n from '@dhis2/d2-i18n';\nimport { Button, SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport css from './categories-menu.module.css';\nexport default function CategoriesMenu(_ref) {\n  var _categoryCombination$;\n\n  let {\n    categoryCombination,\n    close,\n    selected,\n    onChange\n  } = _ref;\n\n  if (!categoryCombination.called || categoryCombination.loading) {\n    return i18n.t('Loading categories...');\n  }\n\n  if (categoryCombination.error) {\n    return i18n.t('An error occurred loading the categories');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: css.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: css.inputs\n  }, (_categoryCombination$ = categoryCombination.data) === null || _categoryCombination$ === void 0 ? void 0 : _categoryCombination$.categories.map(_ref2 => {\n    let {\n      id,\n      displayName,\n      categoryOptions\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: css.input,\n      key: id\n    }, /*#__PURE__*/React.createElement(SingleSelectField, {\n      label: displayName,\n      selected: selected[id],\n      onChange: _ref3 => {\n        let {\n          selected\n        } = _ref3;\n        return onChange({\n          categoryId: id,\n          selected\n        });\n      }\n    }, categoryOptions.map(_ref4 => {\n      let {\n        id,\n        displayName\n      } = _ref4;\n      return /*#__PURE__*/React.createElement(SingleSelectOption, {\n        key: id,\n        value: id,\n        label: displayName\n      });\n    })));\n  })), /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: (_, evt) => {\n      // required as otherwise it'd trigger a `setOpen(true)` call as\n      // react thinks of this dropdown as being inside of the\n      // selector. A click on the selector opens the menu.\n      evt.stopPropagation();\n      close();\n    }\n  }, i18n.t('Hide menu')));\n}\nCategoriesMenu.propTypes = {\n  categoryCombination: PropTypes.shape({\n    called: PropTypes.bool.isRequired,\n    loading: PropTypes.bool.isRequired,\n    data: PropTypes.object,\n    error: PropTypes.instanceOf(Error)\n  }).isRequired,\n  close: PropTypes.func.isRequired,\n  selected: PropTypes.objectOf(PropTypes.string).isRequired,\n  onChange: PropTypes.func.isRequired\n};","import i18n from '@dhis2/d2-i18n';\n/*\n * This code is copied from the analytics repo as a temporary solution.\n * https://github.com/dhis2/analytics/tree/master/src/components/PeriodDimension/utils\n * In the long term, this period related logic should be moved into its own repo, see:\n * https://jira.dhis2.org/browse/LIBS-193\n * The following changes to the code in the anaytics repo have been implemented:\n *   A. Renamed period-CODE to period-ID\n *   B. Adjusted period type names (values) to match the names in the response from `api/periodTypes`\n *   C. Adjusted period type variable names to equivalent of B, but in UPPER_SNAKE_CASE\n * IMO these changes should be implemented in the period package too\n */\n// Period types\n\nconst DAILY = 'Daily';\nconst WEEKLY = 'Weekly';\nconst WEEKLY_WEDNESDAY = 'WeeklyWednesday';\nconst WEEKLY_THURSDAY = 'WeeklyThursday';\nconst WEEKLY_SATURDAY = 'WeeklySaturday';\nconst WEEKLY_SUNDAY = 'WeeklySunday';\nconst BI_WEEKLY = 'BiWeekly';\nconst MONTHLY = 'Monthly';\nconst BI_MONTHLY = 'BiMonthly';\nconst QUARTERLY = 'Quarterly';\nconst SIX_MONTHLY = 'SixMonthly';\nconst SIX_MONTHLY_APRIL = 'SixMonthlyApril'; // const SIX_MONTHLY_NOV = 'SixMonthlyNov'\n\nconst YEARLY = 'Yearly';\nconst FINANCIAL_APRIL = 'FinancialApril';\nconst FINANCIAL_JULY = 'FinancialJuly';\nconst FINANCIAL_OCT = 'FinancialOct';\nconst FINANCIAL_NOV = 'FinancialNov';\nconst PERIOD_TYPES = new Set([DAILY, WEEKLY, WEEKLY_WEDNESDAY, WEEKLY_THURSDAY, WEEKLY_SATURDAY, WEEKLY_SUNDAY, BI_WEEKLY, MONTHLY, BI_MONTHLY, QUARTERLY, SIX_MONTHLY, SIX_MONTHLY_APRIL, YEARLY, FINANCIAL_APRIL, FINANCIAL_JULY, FINANCIAL_OCT, FINANCIAL_NOV]);\nexport const isValidPeriodType = periodType => PERIOD_TYPES.has(periodType);\n\nconst getMonthName = key => {\n  const monthNames = [i18n.t('January'), i18n.t('February'), i18n.t('March'), i18n.t('April'), i18n.t('May'), i18n.t('June'), i18n.t('July'), i18n.t('August'), i18n.t('September'), i18n.t('October'), i18n.t('November'), i18n.t('December')];\n  return monthNames[key];\n};\n/**\n * Initialise a Date instance with Date.now() for Jest mocking.\n * This can be removed once we upgrade Jest to a verion which\n * supports `jest.setSystemTime`.\n */\n\n\nexport const getCurrentDate = () => new Date(Date.now());\nexport const getYearWithOffset = offset => {\n  const offsetInt = parseInt(offset, 10) || 0;\n  return getCurrentDate().getFullYear() + offsetInt;\n};\n\nconst getDailyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"01 Jan \".concat(year));\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.startDate = formatYyyyMmDd(date);\n      period.endDate = period.startDate;\n      period.displayName = period.startDate;\n      period.iso = period.startDate.replace(/-/g, '');\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getWeeklyPeriodType = (formatYyyyMmDd, weekObj, fnFilter) => {\n  // Calculate the first date of an EPI year base on ISO standard  ( first week always contains 4th Jan )\n  const getEpiWeekStartDay = function (year) {\n    let startDayOfWeek = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    const jan4 = new Date(year, 0, 4);\n    const jan4DayOfWeek = jan4.getDay();\n    const startDate = jan4;\n    const dayDiff = jan4DayOfWeek - startDayOfWeek;\n\n    if (dayDiff > 0) {\n      startDate.setDate(jan4.getDate() - dayDiff);\n    } else if (dayDiff < 0) {\n      startDate.setDate(jan4.getDate() - dayDiff);\n      startDate.setDate(startDate.getDate() - 7);\n    }\n\n    return startDate;\n  };\n\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = getEpiWeekStartDay(year, weekObj.startDay);\n    let week = 1;\n\n    while (date.getFullYear() <= year) {\n      const period = {};\n      period.startDate = formatYyyyMmDd(date);\n      period.iso = \"\".concat(year).concat(weekObj.shortName, \"W\").concat(week);\n      period.id = period.iso;\n      date.setDate(date.getDate() + 6);\n      period.endDate = formatYyyyMmDd(date);\n      const weekNumber = week;\n      period.displayName = \"\".concat(i18n.t('Week {{weekNumber}}', {\n        weekNumber\n      }), \" - \").concat(period.startDate, \" - \").concat(period.endDate); // if end date is Jan 4th or later, week belongs to next year\n\n      if (date.getFullYear() > year && date.getDate() >= 4) {\n        break;\n      }\n\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n      week += 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getBiWeeklyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"01 Jan \".concat(year));\n    const day = date.getDay();\n    let biWeek = 1;\n\n    if (day <= 4) {\n      date.setDate(date.getDate() - (day - 1));\n    } else {\n      date.setDate(date.getDate() + (8 - day));\n    }\n\n    while (date.getFullYear() <= year) {\n      const period = {};\n      period.iso = \"\".concat(year, \"BiW\").concat(biWeek);\n      period.id = period.iso;\n      period.startDate = formatYyyyMmDd(date);\n      date.setDate(date.getDate() + 13);\n      period.endDate = formatYyyyMmDd(date);\n      const biWeekNumber = biWeek;\n      period.displayName = \"\".concat(i18n.t('Bi-Week {{biWeekNumber}}', {\n        biWeekNumber\n      }), \" - \").concat(period.startDate, \" - \").concat(period.endDate); // if end date is Jan 4th or later, biweek belongs to next year\n\n      if (date.getFullYear() > year && date.getDate() >= 4) {\n        break;\n      }\n\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n      biWeek += 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getMonthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  const formatIso = date => {\n    const y = date.getFullYear();\n    let m = String(date.getMonth() + 1);\n    m = m.length < 2 ? \"0\".concat(m) : m;\n    return y + m;\n  };\n\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Dec \".concat(year));\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthName = getMonthName(date.getMonth());\n      period.displayName = \"\".concat(monthName, \" \").concat(year);\n      period.iso = formatIso(date);\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getBiMonthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Dec \".concat(year));\n    let index = 6;\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(0);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthStart = getMonthName(date.getMonth());\n      const monthEnd = getMonthName(date.getMonth() + 1);\n      const fullYear = date.getFullYear();\n      period.displayName = \"\".concat(monthStart, \" - \").concat(monthEnd, \" \").concat(fullYear);\n      period.iso = \"\".concat(year, \"0\").concat(index, \"B\");\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n      index--;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Bi-months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getQuarterlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Dec \".concat(year));\n    let quarter = 4;\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(0);\n      date.setDate(0);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthStart = getMonthName(date.getMonth());\n      const monthEnd = getMonthName(date.getMonth() + 2);\n      const fullYear = date.getFullYear();\n      period.displayName = \"\".concat(monthStart, \" - \").concat(monthEnd, \" \").concat(fullYear);\n      period.iso = \"\".concat(year, \"Q\").concat(quarter);\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n      quarter -= 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Quarters are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getSixMonthlyPeriodType = fnFilter => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    let period = {};\n    period.startDate = \"\".concat(year, \"-01-01\");\n    period.endDate = \"\".concat(year, \"-06-30\");\n    period.displayName = \"\".concat(getMonthName(0), \" - \").concat(getMonthName(5), \" \").concat(year);\n    period.iso = \"\".concat(year, \"S1\");\n    period.id = period.iso;\n    periods.push(period);\n    period = {};\n    period.startDate = \"\".concat(year, \"-07-01\");\n    period.endDate = \"\".concat(year, \"-12-31\");\n    period.displayName = \"\".concat(getMonthName(6), \" - \").concat(getMonthName(11), \" \").concat(year);\n    period.iso = \"\".concat(year, \"S2\");\n    period.id = period.iso;\n    periods.push(period);\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getSixMonthlyAprilPeriodType = fnFilter => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    let period = {};\n    period.startDate = \"\".concat(year, \"-04-01\");\n    period.endDate = \"\".concat(year, \"-09-30\");\n    period.displayName = \"\".concat(getMonthName(3), \" - \").concat(getMonthName(8), \" \").concat(year);\n    period.iso = \"\".concat(year, \"AprilS1\");\n    period.id = period.iso;\n    periods.push(period);\n    period = {};\n    period.startDate = \"\".concat(year, \"-10-01\");\n    period.endDate = \"\".concat(year + 1, \"-03-31\");\n    period.displayName = \"\".concat(getMonthName(9), \" \").concat(year, \" - \").concat(getMonthName(2), \" \").concat(year + 1);\n    period.iso = \"\".concat(year, \"AprilS2\");\n    period.id = period.iso;\n    periods.push(period);\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getYearlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Dec \".concat(year));\n\n    while (year - date.getFullYear() < 10) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setMonth(0, 1);\n      period.startDate = formatYyyyMmDd(date);\n      const dateString = date.getFullYear().toString();\n      period.displayName = dateString;\n      period.iso = date.getFullYear().toString();\n      period.id = period.iso.toString();\n      periods.push(period);\n      date.setDate(0);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Years are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialOctoberPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"30 Sep \".concat(year + 1));\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = \"\".concat(getMonthName(9), \" \").concat(yearStart, \" - \").concat(getMonthName(8), \" \").concat(yearEnd);\n      period.id = \"\".concat(date.getFullYear(), \"Oct\");\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialOctober periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialNovemberPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Oct \".concat(year + 1));\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = \"\".concat(getMonthName(10), \" \").concat(yearStart, \" - \").concat(getMonthName(9), \" \").concat(yearEnd);\n      period.id = \"\".concat(date.getFullYear(), \"Nov\");\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialNovember periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialJulyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"30 Jun \".concat(year + 1));\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = \"\".concat(getMonthName(6), \" \").concat(yearStart, \" - \").concat(getMonthName(5), \" \").concat(yearEnd);\n      period.id = \"\".concat(date.getFullYear(), \"July\");\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialJuly periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialAprilPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = getYearWithOffset(config.offset);\n    const date = new Date(\"31 Mar \".concat(year + 1));\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = \"\".concat(getMonthName(3), \" \").concat(yearStart, \" - \").concat(getMonthName(2), \" \").concat(yearEnd);\n      period.id = \"\".concat(date.getFullYear(), \"April\");\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialApril periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst defaultFormatYyyyMmDd = date => {\n  const y = date.getFullYear();\n  let m = String(date.getMonth() + 1);\n  let d = String(date.getDate());\n  m = m.length < 2 ? \"0\".concat(m) : m;\n  d = d.length < 2 ? \"0\".concat(d) : d;\n  return \"\".concat(y, \"-\").concat(m, \"-\").concat(d);\n};\n\nconst defaultFilterFuturePeriods = periods => {\n  const array = [];\n  const now = getCurrentDate();\n\n  for (let i = 0; i < periods.length; i++) {\n    if (new Date(periods[i].startDate) <= now) {\n      array.push(periods[i]);\n    }\n  }\n\n  return array;\n};\n\nexport const getFixedPeriodTypes = function () {\n  let {\n    formatYyyyMmDd = defaultFormatYyyyMmDd,\n    filterFuturePeriods = defaultFilterFuturePeriods\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return [{\n    type: DAILY,\n    regex: /^([0-9]{4})([0-9]{2})([0-9]{2})$/,\n    // YYYYMMDD\n    getPeriods: getDailyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Daily')\n  }, {\n    type: WEEKLY,\n    regex: /^([0-9]{4})()W([0-9]{1,2})$/,\n    // YYYY\"W\"[1-53]\n    getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n      shortName: '',\n      startDay: 1\n    }, filterFuturePeriods),\n    displayName: i18n.t('Weekly')\n  }, {\n    type: WEEKLY_WEDNESDAY,\n    regex: /^([0-9]{4})(Wed)W([0-9]{1,2})$/,\n    // YYYY\"WedW\"[1-53]\n    getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n      shortName: 'Wed',\n      startDay: 3\n    }, filterFuturePeriods),\n    displayName: i18n.t('Weekly (Start Wednesday)')\n  }, {\n    type: WEEKLY_THURSDAY,\n    regex: /^([0-9]{4})(Thu)W([0-9]{1,2})$/,\n    // YYYY\"ThuW\"[1-53]\n    getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n      shortName: 'Thu',\n      startDay: 4\n    }, filterFuturePeriods),\n    displayName: i18n.t('Weekly (Start Thursday)')\n  }, {\n    type: WEEKLY_SATURDAY,\n    regex: /^([0-9]{4})(Sat)W([0-9]{1,2})$/,\n    // YYYY\"SatW\"[1-53]\n    getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n      shortName: 'Sat',\n      startDay: 6\n    }, filterFuturePeriods),\n    displayName: i18n.t('Weekly (Start Saturday)')\n  }, {\n    type: WEEKLY_SUNDAY,\n    regex: /^([0-9]{4})(Sun)W([0-9]{1,2})$/,\n    // YYYY\"SunW\"[1-53]\n    getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n      shortName: 'Sun',\n      startDay: 7\n    }, filterFuturePeriods),\n    displayName: i18n.t('Weekly (Start Sunday)')\n  }, {\n    type: BI_WEEKLY,\n    regex: /^([0-9]{4})BiW([0-9]{1,2})$/,\n    // YYYY\"BiW\"[1-27]\n    getPeriods: getBiWeeklyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Bi-weekly')\n  }, {\n    type: MONTHLY,\n    regex: /^([0-9]{4})([0-9]{2})$/,\n    // YYYYMM\n    getPeriods: getMonthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Monthly')\n  }, {\n    type: BI_MONTHLY,\n    regex: /^([0-9]{4})([0-9]{2})B$/,\n    // YYYY0[1-6]\"B\"\n    getPeriods: getBiMonthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Bi-monthly')\n  }, {\n    type: QUARTERLY,\n    regex: /^([0-9]{4})Q([1234])$/,\n    // YYYY\"Q\"[1-4]\n    getPeriods: getQuarterlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Quarterly')\n  }, {\n    type: SIX_MONTHLY,\n    regex: /^([0-9]{4})S([12])$/,\n    // YYYY\"S\"[1/2]\n    getPeriods: getSixMonthlyPeriodType(filterFuturePeriods),\n    displayName: i18n.t('Six-monthly')\n  }, {\n    type: SIX_MONTHLY_APRIL,\n    regex: /^([0-9]{4})AprilS([12])$/,\n    // YYYY\"AprilS\"[1/2]\n    getPeriods: getSixMonthlyAprilPeriodType(filterFuturePeriods),\n    displayName: i18n.t('Six-monthly April')\n  }, {\n    type: YEARLY,\n    regex: /^([0-9]{4})$/,\n    // YYYY\n    getPeriods: getYearlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Yearly')\n  }, {\n    type: FINANCIAL_NOV,\n    regex: /^([0-9]{4})Nov$/,\n    // YYYY\"Nov\"\n    getPeriods: getFinancialNovemberPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Financial year (Start November)')\n  }, {\n    type: FINANCIAL_OCT,\n    regex: /^([0-9]{4})Oct$/,\n    // YYYY\"Oct\"\n    getPeriods: getFinancialOctoberPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Financial year (Start October)')\n  }, {\n    type: FINANCIAL_JULY,\n    regex: /^([0-9]{4})July$/,\n    // YYYY\"July\"\n    getPeriods: getFinancialJulyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Financial year (Start July)')\n  }, {\n    type: FINANCIAL_APRIL,\n    regex: /^([0-9]{4})April$/,\n    // YYYY\"April\"\n    getPeriods: getFinancialAprilPeriodType(formatYyyyMmDd, filterFuturePeriods),\n    displayName: i18n.t('Financial year (Start April)')\n  }];\n};\nexport const getFixedPeriodType = _ref => {\n  let {\n    periodType,\n    formatYyyyMmDd,\n    filterFuturePeriods\n  } = _ref;\n\n  if (!isValidPeriodType(periodType)) {\n    throw new Error(\"Invalid period type \\\"\".concat(periodType, \"\\\" supplied to \\\"getFixedPeriodType\\\"\"));\n  }\n\n  const periodTypeObj = getFixedPeriodTypes({\n    formatYyyyMmDd,\n    filterFuturePeriods\n  }).find(_ref2 => {\n    let {\n      type\n    } = _ref2;\n    return type === periodType;\n  });\n\n  if (!periodTypeObj) {\n    /**\n     * This error suggests the list of period types at the top of this file\n     * contains a period type name which has not been implemented yet in\n     * getFixedPeriodTypes\n     */\n    throw new Error(\"Could not find periodType object for \\\"\".concat(periodType, \"\\\"\"));\n  }\n\n  return periodTypeObj;\n};\nexport const getYearOffsetFromNow = year => {\n  const yearInt = parseInt(year, 10);\n\n  if (!Number.isInteger(yearInt)) {\n    throw new Error(\"Invalid year \\\"\".concat(year, \"\\\" passed to \\\"getYearOffsetFromNow\\\"\"));\n  }\n\n  return yearInt - getCurrentDate().getFullYear();\n};\nexport const getFixedPeriodsByTypeAndYear = _ref3 => {\n  let {\n    periodType,\n    year,\n    formatYyyyMmDd,\n    filterFuturePeriods,\n    config\n  } = _ref3;\n  const fixedPeriod = getFixedPeriodType({\n    periodType,\n    formatYyyyMmDd,\n    filterFuturePeriods\n  });\n  const offset = getYearOffsetFromNow(year);\n  return fixedPeriod && Number.isInteger(offset) ? fixedPeriod.getPeriods({ ...config,\n    offset\n  }) : [];\n};\nexport const parsePeriodId = (id, allowedTypes) => {\n  if (!id) {\n    return null;\n  }\n\n  const periodTypes = allowedTypes ? getFixedPeriodTypes().filter(_ref4 => {\n    let {\n      type\n    } = _ref4;\n    return allowedTypes.some(allowedType => allowedType === type);\n  }) : getFixedPeriodTypes();\n  let i = 0;\n  let periodType = undefined;\n  let match = undefined;\n\n  while (i < periodTypes.length && !match) {\n    periodType = periodTypes[i];\n    match = id.match(periodType.regex);\n    i++;\n  }\n\n  if (!match) {\n    return null;\n  }\n\n  const year = parseInt(match[1], 10);\n  const offset = getYearOffsetFromNow(year);\n  const periods = periodType.getPeriods({\n    offset\n  });\n  const period = periods.find(period => period.id === id);\n  return { ...period,\n\n    /*\n     * Add year and periodType so a parsed period code\n     * can be use for a multitude of purposes\n     */\n    year,\n    periodType\n  };\n};\n\nconst isValidDate = date => !isNaN(date.getTime());\n\nexport const getFixedPeriodsForTypeAndDateRange = (periodType, startDate, endDate) => {\n  // Allow dates and date-strings\n  startDate = new Date(startDate);\n  endDate = new Date(endDate);\n\n  if (!isValidDate(startDate)) {\n    throw new Error('Invalid startDate provided to getFixedPeriodsForTypeAndDateRange');\n  }\n\n  if (!isValidDate(endDate)) {\n    throw new Error('Invalid endDate provided to getFixedPeriodsForTypeAndDateRange');\n  }\n\n  let year = endDate.getFullYear();\n  let startDateReached = false;\n  const convertedPeriods = [];\n\n  while (!startDateReached) {\n    getFixedPeriodsByTypeAndYear({\n      periodType,\n      year\n    }).reverse().forEach(period => {\n      const periodEnd = new Date(period.endDate); // exclude periods that end before start date\n\n      const endsAfterPeriodStart = periodEnd >= startDate; // exclude periods that end after end date\n\n      const endsBeforePeriodEnd = periodEnd <= endDate;\n\n      if (!endsAfterPeriodStart) {\n        startDateReached = true;\n      }\n\n      if (endsAfterPeriodStart && endsBeforePeriodEnd) {\n        convertedPeriods.push(period);\n      }\n    });\n    --year;\n  }\n\n  return convertedPeriods.reverse();\n};","import { useMemo } from 'react';\nimport { parsePeriodId } from '../fixed-periods/index.js';\nexport default function usePeriod(periodId) {\n  return useMemo(() => parsePeriodId(periodId), [periodId]);\n}","import { useQuery } from 'react-query';\nimport { parsePeriodId } from '../../shared/index.js';\nimport { useDataSetId, usePeriodId } from '../use-context-selection/index.js';\n\nconst isOptionWithinPeriod = _ref => {\n  let {\n    periodStartDate,\n    periodEndDate,\n    categoryOption\n  } = _ref;\n\n  // option has not start and end dates\n  if (!categoryOption.startDate && !categoryOption.endDate) {\n    return true;\n  }\n\n  if (categoryOption.startDate) {\n    const startDate = new Date(categoryOption.startDate);\n\n    if (periodStartDate < startDate) {\n      // option start date is after period start date\n      return false;\n    }\n  }\n\n  if (categoryOption.endDate) {\n    const endDate = new Date(categoryOption.endDate);\n\n    if (periodEndDate > endDate) {\n      // option end date is before period end date\n      return false;\n    }\n  } // option spans over entire period\n\n\n  return true;\n};\n\nexport default function useCategoryCombination() {\n  const [periodId] = usePeriodId();\n  const [dataSetId] = useDataSetId();\n  const params = {\n    fields: ['categoryCombo[isDefault,displayName,categories[id,displayName,categoryOptions[id,displayName,startDate,endDate]]]']\n  };\n  const queryKey = ['dataSets', {\n    id: dataSetId,\n    params\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!dataSetId && !!periodId,\n    select: data => {\n      const period = parsePeriodId(periodId);\n      const periodStartDate = new Date(period.startDate);\n      const periodEndDate = new Date(period.endDate);\n      const {\n        categories\n      } = data.categoryCombo;\n      const categoriesWithFilteredOptions = categories.map(category => ({ ...category,\n        categoryOptions: category.categoryOptions.filter(categoryOption => isOptionWithinPeriod({\n          periodStartDate,\n          periodEndDate,\n          categoryOption\n        }))\n      }));\n      return { ...data.categoryCombo,\n        categories: categoriesWithFilteredOptions\n      };\n    }\n  });\n  return {\n    called: !isIdle,\n    loading,\n    error,\n    data\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { SelectorBarItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport CategoriesMenu from './categories-menu.js';\nimport useCategoryCombination from './use-category-combination.js';\nimport useOnDependentParamsChange from './use-on-dependent-params-change.js';\nimport useSelected from './use-selected.js';\nimport useSelectorBarItemLabel from './use-selector-bar-item-label.js';\nimport useSelectorBarItemValue from './use-selector-bar-item-value.js';\nimport useShouldComponentRenderNull from './use-should-component-render-null.js';\n\nconst hasCategoryNoOptions = category => category.categoryOptions.length === 0;\n\nconst useSetSelectionHasNoFormMessage = (categoryCombo, setSelectionHasNoFormMessage) => {\n  useEffect(() => {\n    if (categoryCombo !== null && categoryCombo !== void 0 && categoryCombo.categories.some(hasCategoryNoOptions)) {\n      setSelectionHasNoFormMessage(i18n.t('At least one of the categories does not have any options due to the options not spanning over the entire selected period'));\n    } else {\n      setSelectionHasNoFormMessage('');\n    }\n  }, [categoryCombo, setSelectionHasNoFormMessage]);\n};\n\nexport default function AttributeOptionComboSelectorBarItem(_ref) {\n  var _categoryCombination$;\n\n  let {\n    setSelectionHasNoFormMessage\n  } = _ref;\n  const [open, setOpen] = useState(false);\n  const categoryCombination = useCategoryCombination();\n  const {\n    deselectAll,\n    select,\n    selected\n  } = useSelected();\n  const shouldComponentRenderNull = useShouldComponentRenderNull(categoryCombination);\n  const label = useSelectorBarItemLabel(categoryCombination);\n  const valueLabel = useSelectorBarItemValue(categoryCombination);\n\n  const onChange = _ref2 => {\n    let {\n      selected,\n      categoryId\n    } = _ref2;\n    return select({\n      value: selected,\n      categoryId\n    });\n  };\n\n  useOnDependentParamsChange(deselectAll);\n  useSetSelectionHasNoFormMessage(categoryCombination.data, setSelectionHasNoFormMessage);\n\n  if (shouldComponentRenderNull) {\n    return null;\n  }\n\n  const renderMenu = categoryCombination.called && !categoryCombination.loading && !categoryCombination.error && categoryCombination.data;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"attribute-option-combo-selector\"\n  }, /*#__PURE__*/React.createElement(SelectorBarItem, {\n    disabled: (_categoryCombination$ = categoryCombination.data) === null || _categoryCombination$ === void 0 ? void 0 : _categoryCombination$.isDefault,\n    label: label,\n    value: valueLabel,\n    open: open,\n    setOpen: setOpen,\n    noValueMessage: i18n.t('Choose a data set')\n  }, categoryCombination.error && i18n.t('An error occurred loading the categories'), renderMenu && /*#__PURE__*/React.createElement(CategoriesMenu, {\n    categoryCombination: categoryCombination,\n    close: () => setOpen(false),\n    selected: selected,\n    onChange: onChange\n  })));\n}\nAttributeOptionComboSelectorBarItem.propTypes = {\n  setSelectionHasNoFormMessage: PropTypes.func.isRequired\n};","import { useAttributeOptionComboSelection } from '../use-context-selection/index.js';\nimport omit from './omit.js';\nexport default function useSelected() {\n  const [attributeOptionComboSelection, setAttributeOptionComboSelection] = useAttributeOptionComboSelection();\n\n  const deselectAll = () => setAttributeOptionComboSelection(undefined);\n\n  const select = _ref => {\n    let {\n      value,\n      categoryId\n    } = _ref;\n    const nextSelected = !value ? omit(categoryId, attributeOptionComboSelection) : { ...attributeOptionComboSelection,\n      [categoryId]: value\n    };\n\n    if (!Object.values(nextSelected).length) {\n      setAttributeOptionComboSelection(undefined);\n    } else {\n      setAttributeOptionComboSelection(nextSelected);\n    }\n  };\n\n  return {\n    select,\n    deselectAll,\n    selected: attributeOptionComboSelection\n  };\n}","export default function omit(key, collection) {\n  const nextCollection = { ...collection\n  };\n  delete nextCollection[key];\n  return nextCollection;\n}","import { useDataSetId, useOrgUnitId, usePeriodId } from '../use-context-selection/index.js';\n/*\n * `categoryCombination.loading` does not mean that \"null\" should be rendered.\n * This happens automatically during the first loading as\n * `!categoryCombination.data?.categories.length` resolves to `true`.\n *\n * But when data is stale and this function has determined that the component\n * should not render `null`, then it's most likely not going to change when\n * reloading\n */\n\nexport default function useShouldComponentRenderNull(categoryCombination) {\n  var _categoryCombination$, _categoryCombination$2;\n\n  const [dataSetId] = useDataSetId();\n  const [periodId] = usePeriodId();\n  const [orgUnitId] = useOrgUnitId();\n  return !dataSetId || !periodId || !orgUnitId || !categoryCombination.called || // if it is the default combo,\n  // then it doesn't matter if there are categories or not\n  !((_categoryCombination$ = categoryCombination.data) !== null && _categoryCombination$ !== void 0 && _categoryCombination$.isDefault) && !((_categoryCombination$2 = categoryCombination.data) !== null && _categoryCombination$2 !== void 0 && _categoryCombination$2.categories.length);\n}","import i18n from '@dhis2/d2-i18n';\nexport default function useSelectorBarItemLabel(categoryCombination) {\n  var _categoryCombination$, _categoryCombination$2;\n\n  if (!categoryCombination.called || categoryCombination.loading) {\n    return i18n.t('Loading categories...');\n  }\n\n  if (categoryCombination.error) {\n    return i18n.t('Attribute option combination: An error occurred', {\n      nsSeparator: '-:-'\n    });\n  }\n\n  if ((_categoryCombination$ = categoryCombination.data) !== null && _categoryCombination$ !== void 0 && _categoryCombination$.isDefault) {\n    return i18n.t('Default attribute combo');\n  }\n\n  return (_categoryCombination$2 = categoryCombination.data) === null || _categoryCombination$2 === void 0 ? void 0 : _categoryCombination$2.displayName;\n}","import i18n from '@dhis2/d2-i18n';\nimport { useAttributeOptionComboSelection } from '../use-context-selection/index.js';\nexport default function useSelectorBarItemValue(categoryCombination) {\n  var _categoryCombination$;\n\n  const [attributeOptionComboSelection] = useAttributeOptionComboSelection();\n\n  if (!categoryCombination.called || categoryCombination.loading) {\n    return i18n.t('Loading...');\n  }\n\n  if (categoryCombination.error) {\n    return i18n.t('An error loading the values occurred');\n  }\n\n  if ((_categoryCombination$ = categoryCombination.data) !== null && _categoryCombination$ !== void 0 && _categoryCombination$.isDefault) {\n    return '';\n  }\n\n  if (!Object.values(attributeOptionComboSelection).length || !categoryCombination.data) {\n    return i18n.t('0 selections');\n  }\n\n  return i18n.t('{{amount}} selections', {\n    amount: Object.values(attributeOptionComboSelection).length\n  });\n}","import { useEffect, useRef } from 'react';\nimport { useDataSetId, useOrgUnitId, usePeriodId } from '../use-context-selection/index.js';\nexport default function useOnDependentParamsChange(cb) {\n  const initialExecution = useRef(true);\n  const [dataSetId] = useDataSetId();\n  const [periodId] = usePeriodId();\n  const [orgUnitId] = useOrgUnitId();\n  useEffect(() => {\n    if (initialExecution.current) {\n      initialExecution.current = false;\n    } else {\n      cb();\n    }\n  }, [dataSetId, orgUnitId, periodId]);\n}","import { Menu, MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport css from './menu-select.module.css';\nexport default function MenuSelect(_ref) {\n  let {\n    values,\n    selected,\n    dataTest,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: css.menuSelect,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(Menu, null, values.map(_ref2 => {\n    let {\n      value,\n      label\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: value || label,\n      dataValue: value,\n      label: /*#__PURE__*/React.createElement(\"span\", {\n        \"data-value\": value\n      }, label),\n      active: selected === value,\n      onClick: () => onChange({\n        selected: value\n      })\n    });\n  })));\n}\nMenuSelect.defaultProps = {\n  dataTest: 'menu-select'\n};\nMenuSelect.propTypes = {\n  values: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string\n  })).isRequired,\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  selected: PropTypes.string\n};\n10;","import i18n from '@dhis2/d2-i18n';\nimport { SelectorBarItem } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { MenuSelect } from '../menu-select/index.js';\nimport { useDataSetId } from '../use-context-selection/index.js';\nimport useDataSet from './use-data-set.js';\nimport useSelectableDataSets from './use-selectable-data-sets.js';\n/**\n * @TODO: How to indicate that the data set is being loaded\n *  -> Talk to @joe-cooper\n *\n * @TODO: How to indicate that the selecatable data sets are being loaded\n *  -> Talk to @joe-cooper\n */\n\nexport default function DataSetSelectorBarItem() {\n  var _dataSet$data, _selectableDataSets$d, _selectableDataSets$d2;\n\n  const [dataSetOpen, setDataSetOpen] = useState(false);\n  const [dataSetId, setDataSetId] = useDataSetId(); // Select the first item if there's only one\n\n  const selectOnlyItemOnComplete = data => {\n    if ((data === null || data === void 0 ? void 0 : data.length) === 1) {\n      const {\n        id\n      } = data[0];\n      setDataSetId(id);\n    }\n  };\n\n  const dataSet = useDataSet();\n  const selectableDataSets = useSelectableDataSets({\n    onSuccess: selectOnlyItemOnComplete\n  });\n  const isDoneLoading = selectableDataSets.called && !selectableDataSets.loading && !selectableDataSets.error;\n  const showLoadingMessage = !selectableDataSets.called || !!selectableDataSets.loading;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"data-set-selector\"\n  }, /*#__PURE__*/React.createElement(SelectorBarItem, {\n    label: i18n.t('Data set'),\n    value: dataSetId ? (_dataSet$data = dataSet.data) === null || _dataSet$data === void 0 ? void 0 : _dataSet$data.displayName : undefined,\n    open: dataSetOpen,\n    setOpen: setDataSetOpen,\n    noValueMessage: i18n.t('Choose a data set')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"data-set-selector-contents\"\n  }, showLoadingMessage && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"data-set-selector-loading-msg\"\n  }, i18n.t('Fetching data sets')), selectableDataSets.error && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"data-set-selector-error-msg\"\n  }, i18n.t('Error occurred while loading data sets')), isDoneLoading && !((_selectableDataSets$d = selectableDataSets.data) !== null && _selectableDataSets$d !== void 0 && _selectableDataSets$d.length) && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"data-set-selector-none-available-msg\"\n  }, i18n.t('There are no data sets available!')), isDoneLoading && !!((_selectableDataSets$d2 = selectableDataSets.data) !== null && _selectableDataSets$d2 !== void 0 && _selectableDataSets$d2.length) && /*#__PURE__*/React.createElement(MenuSelect, {\n    values: selectableDataSets.data || [],\n    selected: dataSetId,\n    dataTest: \"data-set-selector-menu\",\n    onChange: _ref => {\n      let {\n        selected\n      } = _ref;\n      setDataSetId(selected);\n      setDataSetOpen(false);\n    }\n  }))));\n}","import { useQuery } from 'react-query';\nimport { useDataSetId } from '../use-context-selection/index.js';\nexport default function useDataSet() {\n  const [id] = useDataSetId();\n  const queryKey = ['dataSets', {\n    id,\n    params: {\n      fields: ['id', 'displayName']\n    }\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!id\n  });\n  return {\n    called: !isIdle,\n    loading,\n    error,\n    data\n  };\n}","import { useQuery } from 'react-query';\nexport default function useSelectableDataSets(_ref) {\n  let {\n    onSuccess\n  } = _ref;\n  const queryKey = ['dataSets', {\n    params: {\n      paging: false\n    }\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    onSuccess,\n    // @TODO: How to handle pages / large lists?\n    // Nested as this is \"page-able\"\n    select: data => data.dataSets.map(dataSet => ({ ...dataSet,\n      // Making sure these can be options as well\n      value: dataSet.id,\n      label: dataSet.displayName\n    }))\n  });\n  return {\n    called: !isIdle,\n    loading,\n    error,\n    data\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { InputField } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport useDebounce from './use-debounce.js';\nexport default function DebouncedSearchInput(_ref) {\n  let {\n    onChange,\n    initialValue\n  } = _ref;\n  const [value, setValue] = useState(initialValue);\n  const debouncedValue = useDebounce(value, 200);\n  useEffect(() => {\n    onChange(debouncedValue);\n  }, [onChange, debouncedValue]);\n  return /*#__PURE__*/React.createElement(InputField, {\n    dense: true,\n    value: value,\n    name: \"context-selection-org-unit-search\",\n    placeholder: i18n.t('Search org units'),\n    onChange: _ref2 => {\n      let {\n        value: nextValue\n      } = _ref2;\n      return setValue(nextValue);\n    }\n  });\n}\nDebouncedSearchInput.propTypes = {\n  initialValue: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};","import { useEffect, useState } from 'react';\n/** Copied from https://usehooks.com/useDebounce/ */\n\nexport default function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedValue(value), delay);\n    return () => clearTimeout(handler);\n  }, [value, delay]);\n  return debouncedValue;\n}","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDataSetId } from '../use-context-selection/index.js';\nexport default function DisabledTooltip(_ref) {\n  let {\n    children\n  } = _ref;\n  const [dataSetId] = useDataSetId();\n  const tooltipContent = !dataSetId ? i18n.t('Choose a data set first') : undefined;\n\n  if (!tooltipContent) {\n    return children;\n  }\n\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltipContent\n  }, _ref2 => {\n    let {\n      ref,\n      onMouseOver,\n      onMouseOut\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref,\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut\n    }, children);\n  });\n}\nDisabledTooltip.propTypes = {\n  children: PropTypes.any.isRequired\n};","// Copied from https://github.com/dhis2/ui/blob/master/components/organisation-unit-tree/src/organisation-unit-node/use-org-data/use-org-data.js\nexport const QUERY_ORG_UNIT_FROM_UI = {\n  orgUnit: {\n    resource: \"organisationUnits\",\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        isUserDataViewFallback\n      } = _ref2;\n      return {\n        isUserDataViewFallback,\n        fields: ['path', 'children::size']\n      };\n    }\n  }\n};\nexport const QUERY_ORG_CHILDREN_FROM_UI = {\n  orgUnit: {\n    resource: \"organisationUnits\",\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    },\n    params: {\n      fields: ['children[id,path,displayName]']\n    }\n  }\n};\nexport default async function loadOfflineLevel(_ref4) {\n  let {\n    dataEngine,\n    id,\n    offlineLevels\n  } = _ref4;\n  const variables = {\n    id\n  };\n  const orgData = await dataEngine.query(QUERY_ORG_UNIT_FROM_UI, {\n    variables\n  });\n  const {\n    children: childrenSize\n  } = orgData.orgUnit;\n  const nextOfflineLevels = offlineLevels - 1;\n\n  if (!childrenSize) {\n    return;\n  }\n\n  const orgChildren = await dataEngine.query(QUERY_ORG_CHILDREN_FROM_UI, {\n    variables\n  });\n  const children = orgChildren.orgUnit.children;\n\n  if (children && // nextOfflineLevels = 0 -> Load the org unit but not its children\n  nextOfflineLevels >= 0) {\n    for (const child of children) {\n      // recursively load the offline levels\n      await loadOfflineLevel({\n        dataEngine,\n        id: child.id,\n        offlineLevels: nextOfflineLevels\n      });\n    }\n  }\n}","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useEffect, useState } from 'react';\nimport loadOfflineLevel from './load-offline-level.js';\nimport useOfflineLevelsToLoad from './use-offline-levels-to-load.js';\nimport useOrganisationUnitLevels from './use-organisation-unit-levels.js';\n\nconst loadAllOfflineLevels = _ref => {\n  let {\n    dataEngine,\n    offlineLevelsToLoadData,\n    onDone\n  } = _ref;\n  const allRequests = offlineLevelsToLoadData.map(offlineLevelToLoad => loadOfflineLevel({\n    dataEngine,\n    ...offlineLevelToLoad\n  }));\n  Promise.all(allRequests).finally(() => {\n    // @TODO: Think about what should happen here\n    // Do we want to notify the user about success?\n    // What do we want to display when an error occurs?\n    onDone();\n  });\n};\n/**\n * As the service worker caches request responses,\n * it should suffice to simply perform all request the org unit tree would\n * perform as well in advance\n */\n\n\nexport default function useLoadOfflineLevels() {\n  const [done, setDone] = useState(false);\n  const dataEngine = useDataEngine();\n  const organisationUnitLevels = useOrganisationUnitLevels();\n  const offlineLevelsToLoad = useOfflineLevelsToLoad(organisationUnitLevels.data);\n  const {\n    data: offlineLevelsToLoadData\n  } = offlineLevelsToLoad;\n  useEffect(() => {\n    // Can't pass async function to useEffect\n    if (offlineLevelsToLoadData) {\n      loadAllOfflineLevels({\n        dataEngine,\n        offlineLevelsToLoadData,\n        onDone: () => setDone(true)\n      });\n    }\n  }, [dataEngine, offlineLevelsToLoadData, setDone]);\n  return done;\n}","import { useQuery } from 'react-query';\nimport getOfflineLevelsToLoad from './get-offline-levels-to-load.js';\nexport default function useOfflineLevelsToLoad(organisationUnitLevels) {\n  const queryKey = ['me', {\n    params: {\n      fields: 'organisationUnits[id,level]'\n    }\n  }];\n  return useQuery(queryKey, {\n    // Only fetch the user's org units when there are any offline levels\n    enable: organisationUnitLevels === null || organisationUnitLevels === void 0 ? void 0 : organisationUnitLevels.length,\n    select: _ref => {\n      let {\n        organisationUnits: userOrganisationUnits\n      } = _ref;\n      return getOfflineLevelsToLoad({\n        userOrganisationUnits,\n        organisationUnitLevels\n      });\n    }\n  });\n}","/**\n * @param {Object} data\n * @param {Object} data.organisationUnitLevels\n * @param {Integer} data.organisationUnitLevels.level\n * @param {Integer} data.organisationUnitLevels.offlineLevels\n * @param {Object} data.userOrganisationUnits\n * @param {String} data.userOrganisationUnits.id\n * @param {Integer} data.userOrganisationUnits.level\n *\n * @returns {Array.<{ id: String, offlineLevels: Int }>}\n */\nexport default function getOfflineLevelsToLoad(_ref) {\n  let {\n    organisationUnitLevels,\n    userOrganisationUnits\n  } = _ref;\n  return userOrganisationUnits.map(userOrgUnit => {\n    const foundLevel = organisationUnitLevels.find(orgUnitLevel => orgUnitLevel.level === userOrgUnit.level);\n\n    if (foundLevel) {\n      return {\n        id: userOrgUnit.id,\n        offlineLevels: foundLevel.offlineLevels\n      };\n    }\n  }).filter(value => !!value);\n}","import { useQuery } from 'react-query';\nexport default function useOrganisationUnitLevels() {\n  const queryKey = ['filledOrganisationUnitLevels', {\n    params: {\n      // @TODO: api ignores the `fields` query param\n      // See: https://jira.dhis2.org/browse/TECH-973\n      fields: ['level', 'offlineLevels']\n    }\n  }];\n  return useQuery(queryKey);\n}","import { useQuery } from 'react-query';\nimport { useOrgUnitId } from '../use-context-selection/index.js';\nexport default function useOrgUnit() {\n  const [id] = useOrgUnitId();\n  const queryKey = ['organisationUnits', {\n    id,\n    params: {\n      fields: ['id', 'displayName', 'path']\n    }\n  }];\n  const {\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!id\n  });\n  return {\n    loading,\n    error,\n    data\n  };\n}","import { useQuery } from 'react-query';\nexport default function useUserOrgUnits() {\n  const {\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(['me', {\n    params: {\n      fields: ['organisationUnits[id]']\n    }\n  }], {\n    select: data => data.organisationUnits.map(_ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    })\n  });\n  return {\n    data,\n    loading,\n    error\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { OrganisationUnitTree, OrganisationUnitTreeRootError, OrganisationUnitTreeRootLoading, SelectorBarItem } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { useDataSetId, useOrgUnitId } from '../use-context-selection/index.js';\nimport DebouncedSearchInput from './debounced-search-input.js';\nimport DisabledTooltip from './disabled-tooltip.js';\nimport css from './org-unit-selector-bar-item.module.css';\nimport useExpandedState from './use-expanded-state.js';\nimport useLoadOfflineLevels from './use-load-offline-levels.js';\nimport useOrgUnitPathsByName from './use-org-unit-paths-by-name.js';\nimport useOrgUnit from './use-organisation-unit.js';\nimport useSelectorBarItemValue from './use-select-bar-item-value.js';\nimport useUserOrgUnits from './use-user-org-units.js';\nexport default function OrganisationUnitSetSelectorBarItem() {\n  useLoadOfflineLevels();\n  const [filter, setFilter] = useState('');\n  const orgUnitPathsByName = useOrgUnitPathsByName(filter);\n  const [orgUnitOpen, setOrgUnitOpen] = useState(false);\n  const {\n    expanded,\n    handleExpand,\n    handleCollapse\n  } = useExpandedState();\n  const [dataSetId] = useDataSetId();\n  const [, setOrgUnitId] = useOrgUnitId();\n  const orgUnit = useOrgUnit();\n  const userOrgUnits = useUserOrgUnits(); // @TODO: Figure out how to only use org units that are connected to the\n  // data set. Currently the api only returns paths for the units on the\n  // lowest level, Task: Figure out if only the lowest levels should be\n  // selectable, if the levels above are missing from the response or whether\n  // all parent units are automatically selectable as well\n  // const dataSetOrgUnitPaths = useDataSetOrgUnitPaths()\n\n  const selectorBarItemValue = useSelectorBarItemValue();\n  const selected = orgUnit.data ? [orgUnit.data.path] : [];\n  const disabled = !dataSetId;\n  const filteredOrgUnitPaths = filter ? orgUnitPathsByName.data : [];\n  const orgUnitPathsByNameLoading = // Either a filter has been set but the hook\n  // hasn't been called yet\n  filter !== '' && !orgUnitPathsByName.called || // or it's actually loading\n  orgUnitPathsByName.loading;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"org-unit-selector\"\n  }, /*#__PURE__*/React.createElement(DisabledTooltip, null, /*#__PURE__*/React.createElement(SelectorBarItem, {\n    disabled: disabled,\n    label: i18n.t('Organisation unit'),\n    value: selectorBarItemValue,\n    open: orgUnitOpen,\n    setOpen: setOrgUnitOpen,\n    noValueMessage: i18n.t('Choose a organisation unit')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: css.itemContentContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: css.searchInputContainer\n  }, /*#__PURE__*/React.createElement(DebouncedSearchInput, {\n    initialValue: filter,\n    onChange: setFilter\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: css.orgUnitTreeContainer\n  }, orgUnitPathsByNameLoading && /*#__PURE__*/React.createElement(OrganisationUnitTreeRootLoading, {\n    dataTest: \"org-unit-selector-loading\"\n  }), !orgUnitPathsByNameLoading && orgUnitPathsByName.error && /*#__PURE__*/React.createElement(OrganisationUnitTreeRootError, {\n    dataTest: \"org-unit-selector-error\",\n    error: orgUnitPathsByName.error\n  }), !orgUnitPathsByNameLoading && !!filter && !filteredOrgUnitPaths.length && /*#__PURE__*/React.createElement(\"div\", {\n    dataTest: \"org-unit-selector-none-found\"\n  }, i18n.t('No organisation units could be found')), !orgUnitPathsByNameLoading && (!filter || !!filteredOrgUnitPaths.length) && /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    dataTest: \"org-unit-selector-tree\",\n    singleSelection: true,\n    filter: filteredOrgUnitPaths,\n    roots: userOrgUnits.data || [],\n    selected: selected,\n    expanded: expanded,\n    handleExpand: handleExpand,\n    handleCollapse: handleCollapse,\n    onChange: (_ref, e) => {\n      let {\n        id\n      } = _ref;\n      // Not sure why this is necessary, but when not done,\n      // it causes bugs in the UI\n      e.stopPropagation();\n      setOrgUnitId(id);\n      setOrgUnitOpen(false);\n    }\n  }))))));\n}","import { useQuery } from 'react-query';\nexport default function useOrgUnitPathsByName(searchTerm) {\n  const queryKey = ['organisationUnits', {\n    params: {\n      fields: ['path'],\n      filter: \"displayName:ilike:\".concat(searchTerm),\n      paging: false\n    }\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!searchTerm,\n    select: data => data.organisationUnits.map(_ref => {\n      let {\n        path\n      } = _ref;\n      return path;\n    })\n  });\n  return {\n    called: !isIdle,\n    loading,\n    error,\n    data\n  };\n}","import { useState } from 'react';\nexport default function useExpandedState() {\n  const [expanded, setExpanded] = useState([]);\n\n  const handleExpand = _ref => {\n    let {\n      path\n    } = _ref;\n    return setExpanded([...expanded, path]);\n  };\n\n  const handleCollapse = _ref2 => {\n    let {\n      path\n    } = _ref2;\n    return setExpanded(expanded.filter(p => p !== path));\n  };\n\n  return {\n    expanded,\n    handleExpand,\n    handleCollapse\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport useOrgUnit from './use-organisation-unit.js';\nimport useUserOrgUnits from './use-user-org-units.js';\nexport default function useSelectorBarItemValue() {\n  var _orgUnit$data;\n\n  const orgUnit = useOrgUnit();\n  const userOrgUnits = useUserOrgUnits(); // @TODO: Figure out how to only use org units that are connected to the\n  // data set.\n  // const dataSetOrgUnitPaths = useDataSetOrgUnitPaths()\n\n  if (userOrgUnits.loading || orgUnit.loading // || dataSetOrgUnitPaths.loading\n  ) {\n    return i18n.t('Fetching organisation unit info');\n  }\n\n  if (orgUnit.error || userOrgUnits.error // || dataSetOrgUnitPaths.error\n  ) {\n    return i18n.t('Error occurred while loading organisation unit info');\n  }\n\n  return (_orgUnit$data = orgUnit.data) === null || _orgUnit$data === void 0 ? void 0 : _orgUnit$data.displayName;\n}","import getMostRecentCompletedYear from './get-most-recent-completed-year.js';\nexport default function computeMaxYear(periodType) {\n  return periodType ? getMostRecentCompletedYear(periodType) : null;\n}","import { getCurrentDate, getFixedPeriodsForTypeAndDateRange, isValidPeriodType } from '../../shared/index.js';\nexport default function getMostRecentCompletedYear(periodType) {\n  if (!isValidPeriodType(periodType)) {\n    throw new Error(\"Invalid periodType \\\"\".concat(periodType, \"\\\" supplied to \\\"getMostRecentCompletedYear\\\"\"));\n  }\n\n  const endDate = getCurrentDate();\n  let year = endDate.getFullYear();\n  let periods = getFixedPeriodsForTypeAndDateRange(periodType, \"\".concat(endDate.getFullYear(), \"-01-01\"), endDate);\n\n  if (periods.length > 0) {\n    return year;\n  } else {\n    /**\n     * Practically speaking we could also just return `year - 1` here\n     * but this logic would allow for periods to span over multiple years\n     */\n    while (periods.length === 0) {\n      --year;\n      periods = getFixedPeriodsForTypeAndDateRange(periodType, \"\".concat(year, \"-01-01\"), \"\".concat(year, \"-12-31\"));\n    }\n\n    return year;\n  }\n}","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDataSetId } from '../use-context-selection/index.js';\nexport default function DisabledTooltip(_ref) {\n  let {\n    children\n  } = _ref;\n  const [dataSetId] = useDataSetId();\n  const tooltipContent = !dataSetId ? i18n.t('Choose a data set first') : undefined;\n\n  if (!tooltipContent) {\n    return children;\n  }\n\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltipContent\n  }, _ref2 => {\n    let {\n      ref,\n      onMouseOver,\n      onMouseOut\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref,\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut\n    }, children);\n  });\n}\nDisabledTooltip.propTypes = {\n  children: PropTypes.any.isRequired\n};","import { useConfig } from '@dhis2/app-runtime';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getFixedPeriodsByTypeAndYear, usePeriod } from '../../shared/index.js';\nimport { usePeriodId } from '../use-context-selection/index.js';\nimport classes from './period-menu.module.css';\n\nconst getPeriods = _ref => {\n  let {\n    periodType,\n    year,\n    dateFormat\n  } = _ref;\n  return getFixedPeriodsByTypeAndYear({\n    periodType,\n    year,\n    formatYyyyMmDd: date => {\n      if (periodType === 'Daily') {\n        // moment format tokens are case sensitive\n        // see https://momentjs.com/docs/#/parsing/string-format/\n        return moment(date).format(dateFormat.toUpperCase());\n      }\n\n      return moment(date).format('YYYY-MM-DD');\n    },\n    config: {\n      reversePeriods: true\n    }\n  });\n};\n\nexport default function PeriodMenu(_ref2) {\n  let {\n    periodType,\n    year,\n    onChange\n  } = _ref2;\n  const [periodId] = usePeriodId();\n  const selectedPeriod = usePeriod(periodId);\n  const {\n    systemInfo: {\n      dateFormat\n    }\n  } = useConfig();\n  const periods = getPeriods({\n    periodType,\n    year,\n    dateFormat\n  });\n  return /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    className: classes.menu,\n    dataTest: \"period-selector-menu\"\n  }, periods.map(period => /*#__PURE__*/React.createElement(MenuItem, {\n    active: period.id === (selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.id),\n    key: period.id,\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      \"data-value\": period.id\n    }, period.displayName),\n    onClick: () => onChange({\n      selected: period.id\n    })\n  })));\n}\nPeriodMenu.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  periodType: PropTypes.string,\n  year: PropTypes.number\n};","import { useQuery } from 'react-query';\nimport { useDataSetId } from '../use-context-selection/index.js';\nexport default function useDataSetPeriodType() {\n  const [id] = useDataSetId();\n  const queryKey = ['dataSets', {\n    id,\n    params: {\n      fields: ['periodType']\n    }\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!id,\n    select: data => data.periodType\n  });\n  return {\n    called: !isIdle,\n    loading,\n    error,\n    data\n  };\n}","import { useEffect, useState } from 'react';\nimport { parsePeriodId } from '../../shared/index.js';\nimport { useDataSetPeriodType } from '../period-selector-bar-item/index.js';\nimport { useDataSetId, usePeriodId } from '../use-context-selection/index.js';\n\nconst convertPeriodIdToPeriodType = periodId => {\n  var _parsePeriodId, _parsePeriodId$period;\n\n  if (!periodId) {\n    return '';\n  }\n\n  return ((_parsePeriodId = parsePeriodId(periodId)) === null || _parsePeriodId === void 0 ? void 0 : (_parsePeriodId$period = _parsePeriodId.periodType) === null || _parsePeriodId$period === void 0 ? void 0 : _parsePeriodId$period.type) || '';\n};\n/**\n * If the period type changes, we need to deselect the current selection. As\n * the different selectors should be self-contained / isolated, I put this\n * logic into the category option combo module\n */\n\n\nexport default function useDeselectOnPeriodTypeChange() {\n  const [periodId, setPeriodId] = usePeriodId();\n  const [previousPeriodType, setPreviousPeriodType] = useState(convertPeriodIdToPeriodType(periodId));\n  const [dataSetId] = useDataSetId();\n  const dataSetPeriodType = useDataSetPeriodType();\n  useEffect(() => {\n    if (!dataSetPeriodType.loading && !dataSetPeriodType.error && previousPeriodType !== dataSetPeriodType.data) {\n      if (periodId) {\n        setPeriodId(undefined);\n      }\n\n      setPreviousPeriodType(dataSetPeriodType.data);\n    }\n  }, [dataSetPeriodType.loading, dataSetPeriodType.error, dataSetPeriodType.data, dataSetId, periodId, previousPeriodType]);\n}","import { Button, IconArrowRight24, IconArrowLeft24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './year-navigator.module.css'; // To avoid users from navigating too far back\n\nconst startYear = 1970;\nexport default function YearNavigator(_ref) {\n  let {\n    maxYear,\n    year,\n    onYearChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: year === startYear,\n    onClick: () => onYearChange(year - 1),\n    icon: /*#__PURE__*/React.createElement(IconArrowLeft24, null)\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.year\n  }, year), /*#__PURE__*/React.createElement(Button, {\n    disabled: year === maxYear,\n    onClick: () => onYearChange(year + 1),\n    icon: /*#__PURE__*/React.createElement(IconArrowRight24, null)\n  }));\n}\nYearNavigator.propTypes = {\n  maxYear: PropTypes.number,\n  year: PropTypes.number,\n  onYearChange: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { SelectorBarItem } from '@dhis2/ui';\nimport React, { useEffect, useState } from 'react';\nimport { usePeriod } from '../../shared/index.js';\nimport { useDataSetId, usePeriodId } from '../use-context-selection/index.js';\nimport computeMaxYear from './compute-max-year.js';\nimport DisabledTooltip from './disabled-tooltip.js';\nimport PeriodMenu from './period-menu.js';\nimport useDataSetPeriodType from './use-data-set-period-type.js';\nimport useDeselectOnPeriodTypeChange from './use-deselect-on-period-type-change.js';\nimport useSelectorBarItemValue from './use-select-bar-item-value.js';\nimport YearNavigator from './year-navigator.js';\nexport const PERIOD = 'PERIOD';\nexport const PeriodSelectorBarItem = () => {\n  const [periodOpen, setPeriodOpen] = useState(false);\n  const [periodId, setPeriodId] = usePeriodId();\n  const [dataSetId] = useDataSetId();\n  const dataSetPeriodType = useDataSetPeriodType();\n  const [maxYear, setMaxYear] = useState(() => computeMaxYear(dataSetPeriodType.data));\n  const selectedPeriod = usePeriod(periodId);\n  const [year, setYear] = useState((selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.year) || maxYear);\n  useEffect(() => {\n    if (selectedPeriod !== null && selectedPeriod !== void 0 && selectedPeriod.year) {\n      setYear(selectedPeriod.year);\n    }\n  }, [selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.year]);\n  useEffect(() => {\n    if (dataSetPeriodType.data) {\n      const newMaxYear = computeMaxYear(dataSetPeriodType.data);\n      setMaxYear(newMaxYear);\n\n      if (!(selectedPeriod !== null && selectedPeriod !== void 0 && selectedPeriod.year)) {\n        setYear(newMaxYear);\n      }\n    }\n  }, [dataSetPeriodType.data]);\n  const selectorBarItemValue = useSelectorBarItemValue();\n  useDeselectOnPeriodTypeChange();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"period-selector\"\n  }, /*#__PURE__*/React.createElement(DisabledTooltip, null, /*#__PURE__*/React.createElement(SelectorBarItem, {\n    disabled: !dataSetId,\n    label: i18n.t('Period'),\n    value: periodId ? selectorBarItemValue : undefined,\n    open: periodOpen,\n    setOpen: setPeriodOpen,\n    noValueMessage: i18n.t('Choose a period')\n  }, dataSetPeriodType.data && year ? /*#__PURE__*/React.createElement(React.Fragment, null, dataSetPeriodType.data !== 'Yearly' && /*#__PURE__*/React.createElement(YearNavigator, {\n    maxYear: maxYear,\n    year: year,\n    onYearChange: year => {\n      setPeriodId(null);\n      setYear(year);\n    }\n  }), /*#__PURE__*/React.createElement(PeriodMenu, {\n    onChange: _ref => {\n      let {\n        selected\n      } = _ref;\n      setPeriodId(selected);\n      setPeriodOpen(false);\n    },\n    periodType: dataSetPeriodType.data,\n    year: year\n  })) : /*#__PURE__*/React.createElement(\"div\", null))));\n};","import i18n from '@dhis2/d2-i18n';\nimport { usePeriod } from '../../shared/index.js';\nimport { usePeriodId } from '../use-context-selection/index.js';\nimport useDataSetPeriodType from './use-data-set-period-type.js';\nexport default function useSelectorBarItemValue() {\n  const [periodId] = usePeriodId();\n  const dataSetPeriodType = useDataSetPeriodType();\n  const selectedPeriod = usePeriod(periodId);\n\n  if (dataSetPeriodType.loading) {\n    return i18n.t('Fetching data set info');\n  }\n\n  if (dataSetPeriodType.error) {\n    return i18n.t('Error occurred while loading data set info');\n  }\n\n  return selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.displayName;\n}","import { useQuery } from 'react-query';\nimport { useDataSetId } from '../use-context-selection/index.js';\nexport default function useDataSetSectionsInfo() {\n  const [id] = useDataSetId();\n  const queryKey = ['dataSets', {\n    id,\n    params: {\n      fields: ['formType', 'sections[id,displayName]', 'renderAsTabs']\n    }\n  }];\n  const {\n    isIdle,\n    isLoading: loading,\n    error,\n    data\n  } = useQuery(queryKey, {\n    enabled: !!id\n  });\n  return {\n    called: !isIdle,\n    data,\n    loading,\n    error\n  };\n}","import i18n from '@dhis2/d2-i18n';\nimport { SelectorBarItem } from '@dhis2/ui';\nimport React, { useState, useEffect } from 'react';\nimport { MenuSelect } from '../menu-select/index.js';\nimport { useSectionFilter } from '../use-context-selection/index.js';\nimport useDataSetSectionsInfo from './use-data-set-sections-info.js';\nimport useOnDependentParamsChange from './use-on-dependent-params-change.js';\nimport useSelectorBarItemValue from './use-selector-bar-item-value.js';\nimport useShouldComponentRenderNull from './use-should-component-render-null.js';\nexport default function SectionFilterSelectorBarItem() {\n  var _dataSetSectionsInfo$, _dataSetSectionsInfo$2;\n\n  const [open, setOpen] = useState(false);\n  const [sectionFilter, setSectionFilter] = useSectionFilter();\n\n  const deselect = () => setSectionFilter(undefined);\n\n  const dataSetSectionsInfo = useDataSetSectionsInfo();\n  const loading = !dataSetSectionsInfo.called || dataSetSectionsInfo.loading;\n  const sectionFilterValue = useSelectorBarItemValue();\n  useOnDependentParamsChange(deselect); // select first section if renderAsTabs === true\n\n  useEffect(() => {\n    const dataSet = dataSetSectionsInfo.data;\n    const sections = dataSet === null || dataSet === void 0 ? void 0 : dataSet.sections;\n\n    if (dataSet !== null && dataSet !== void 0 && dataSet.renderAsTabs && !sectionFilter && sections !== null && sections !== void 0 && sections.length) {\n      setSectionFilter(sections[0].id);\n    }\n  }, [dataSetSectionsInfo, sectionFilter]);\n  const shouldComponentRenderNull = useShouldComponentRenderNull();\n\n  if (shouldComponentRenderNull) {\n    return null;\n  }\n\n  const renderMenu = !dataSetSectionsInfo.loading && !dataSetSectionsInfo.error && dataSetSectionsInfo.data;\n  const sectionOptions = ((_dataSetSectionsInfo$ = dataSetSectionsInfo.data) === null || _dataSetSectionsInfo$ === void 0 ? void 0 : _dataSetSectionsInfo$.sections.map(_ref => {\n    let {\n      id,\n      displayName\n    } = _ref;\n    return {\n      value: id,\n      label: displayName\n    };\n  })) || [];\n  const selectableOptions = (_dataSetSectionsInfo$2 = dataSetSectionsInfo.data) !== null && _dataSetSectionsInfo$2 !== void 0 && _dataSetSectionsInfo$2.renderAsTabs ? sectionOptions : [{\n    value: undefined,\n    label: i18n.t('Show all sections')\n  }].concat(...sectionOptions);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"section-filter-selector\"\n  }, /*#__PURE__*/React.createElement(SelectorBarItem, {\n    disabled: loading || dataSetSectionsInfo.error,\n    label: i18n.t('Section'),\n    value: sectionFilterValue,\n    open: open,\n    setOpen: setOpen,\n    noValueMessage: i18n.t('Show all sections')\n  }, renderMenu ? /*#__PURE__*/React.createElement(MenuSelect, {\n    values: selectableOptions,\n    selected: sectionFilter,\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      setSectionFilter(selected);\n      setOpen(false);\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"section-filter-selector-no-menu\"\n  })));\n}","import i18n from '@dhis2/d2-i18n';\nimport { useSectionFilter } from '../use-context-selection/index.js';\nimport useDataSetSectionsInfo from './use-data-set-sections-info.js';\nexport default function useSelectorBarItemValue() {\n  const [sectionFilter] = useSectionFilter();\n  const dataSetSectionsInfo = useDataSetSectionsInfo();\n\n  if (!sectionFilter) {\n    return undefined;\n  }\n\n  const loading = !dataSetSectionsInfo.called || dataSetSectionsInfo.loading;\n\n  if (loading) {\n    return i18n.t('Fetching data set info');\n  }\n\n  if (dataSetSectionsInfo.error) {\n    return i18n.t('Error occurred while loading data set info');\n  }\n\n  if (!dataSetSectionsInfo.data) {\n    return undefined;\n  }\n\n  const {\n    sections\n  } = dataSetSectionsInfo.data;\n  const selectedSection = sections.find(_ref => {\n    let {\n      id\n    } = _ref;\n    return id === sectionFilter;\n  });\n  return selectedSection === null || selectedSection === void 0 ? void 0 : selectedSection.displayName;\n}","import { useEffect, useRef } from 'react';\nimport { useAttributeOptionComboSelection, useDataSetId, useOrgUnitId, usePeriodId } from '../use-context-selection/index.js';\nexport default function useOnDependentParamsChange(cb) {\n  const initialExecution = useRef(true);\n  const [dataSetId] = useDataSetId();\n  const [periodId] = usePeriodId();\n  const [orgUnitId] = useOrgUnitId();\n  const [attributeOptionComboSelection] = useAttributeOptionComboSelection();\n  useEffect(() => {\n    if (initialExecution.current) {\n      initialExecution.current = false;\n    } else {\n      cb();\n    }\n  }, [dataSetId, orgUnitId, periodId, attributeOptionComboSelection]);\n}","import useDataSetSectionsInfo from './use-data-set-sections-info.js';\n/*\n * `dataSetSectionsInfo.loading` does not mean that \"null\" should be rendered.\n * This happens automatically during the first loading as\n * `'SECTION' !== dataSetSectionsInfo.data?.formType` resolves to `true`.\n *\n * But when data is stale and this function has determined that the component\n * should not render `null`, then it's most likely not going to change when\n * reloading\n */\n\nexport default function useShouldComponentRenderNull() {\n  var _dataSetSectionsInfo$, _dataSetSectionsInfo$2;\n\n  const dataSetSectionsInfo = useDataSetSectionsInfo();\n  return !dataSetSectionsInfo.called || 'SECTION' !== ((_dataSetSectionsInfo$ = dataSetSectionsInfo.data) === null || _dataSetSectionsInfo$ === void 0 ? void 0 : _dataSetSectionsInfo$.formType) || ((_dataSetSectionsInfo$2 = dataSetSectionsInfo.data) === null || _dataSetSectionsInfo$2 === void 0 ? void 0 : _dataSetSectionsInfo$2.sections.length) === 0;\n}","import { SelectorBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { AttributeOptionComboSelectorBarItem } from '../attribute-option-combo-selector-bar-item/index.js';\nimport { DataSetSelectorBarItem } from '../data-set-selector-bar-item/index.js';\nimport { OrgUnitSetSelectorBarItem } from '../org-unit-selector-bar-item/index.js';\nimport { PeriodSelectorBarItem } from '../period-selector-bar-item/index.js';\nimport { SectionFilterSelectorBarItem } from '../section-filter-selector-bar-item/index.js';\nimport { useClearEntireSelection } from '../use-context-selection/index.js';\nimport useShouldHideClearButton from './use-should-hide-clear-button.js';\nexport default function ContextSelector(_ref) {\n  let {\n    setSelectionHasNoFormMessage\n  } = _ref;\n  const hideClearButton = useShouldHideClearButton();\n  const clearEntireSelection = useClearEntireSelection();\n\n  const onClearSelectionClick = () => {\n    setSelectionHasNoFormMessage('');\n\n    if (!hideClearButton) {\n      clearEntireSelection();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(SelectorBar, {\n    onClearSelectionClick: onClearSelectionClick\n  }, /*#__PURE__*/React.createElement(DataSetSelectorBarItem, null), /*#__PURE__*/React.createElement(OrgUnitSetSelectorBarItem, null), /*#__PURE__*/React.createElement(PeriodSelectorBarItem, null), /*#__PURE__*/React.createElement(AttributeOptionComboSelectorBarItem, {\n    setSelectionHasNoFormMessage: setSelectionHasNoFormMessage\n  }), /*#__PURE__*/React.createElement(SectionFilterSelectorBarItem, null));\n}\nContextSelector.propTypes = {\n  setSelectionHasNoFormMessage: PropTypes.func.isRequired\n};","import { useContextSelection } from '../use-context-selection/index.js';\nexport default function useShouldHideClearButton() {\n  const [selection] = useContextSelection();\n\n  if (!selection.orgUnitId && !selection.periodId && !selection.attributeOptionComboSelection.length && !selection.sectionFilter) {\n    return true;\n  }\n\n  return false;\n}","const queryKeyFactory = {\n  all: ['dataSets', {\n    params: {\n      fields: 'dataEntryForm[id],formType,version'\n    }\n  }],\n  byId: id => ['dataEntryForms', {\n    id,\n    params: {\n      fields: 'htmlCode'\n    }\n  }]\n};\nexport default queryKeyFactory;","import { useQuery } from 'react-query';\nimport keys from './query-key-factory.js';\n\nconst useCustomForm = _ref => {\n  let {\n    id,\n    version\n  } = _ref;\n\n  if (!id || !version) {\n    throw new Error('Both a version and an id are required');\n  }\n\n  return useQuery(keys.byId(id), {\n    meta: {\n      version,\n      persist: true\n    },\n    networkMode: 'online'\n  });\n};\n\nexport default useCustomForm;","import { useQuery } from 'react-query';\nimport { createSelector } from 'reselect';\nimport keys from './query-key-factory.js';\n\nconst getDataSets = data => data.dataSets;\n\nconst getCustomForms = createSelector(getDataSets, dataSets => dataSets.filter(dataSet => dataSet.formType === 'CUSTOM').map(dataSet => ({\n  id: dataSet.dataEntryForm.id,\n  version: dataSet.version\n})));\n\nconst useCustomForms = () => {\n  return useQuery(keys.all, {\n    select: getCustomForms\n  });\n};\n\nexport default useCustomForms;","import { useQueryClient } from 'react-query';\nimport keys from './query-key-factory.js';\nimport useCustomForms from './use-custom-forms.js';\n\nconst useCustomFormsPrefetch = () => {\n  const queryClient = useQueryClient();\n  const {\n    isSuccess,\n    data\n  } = useCustomForms();\n\n  if (isSuccess) {\n    for (const customForm of data) {\n      const queryKey = keys.byId(customForm.id); // Search the cache for a custom form with a matching version\n\n      const cachedCustomForm = queryClient.getQueryData(queryKey, {\n        predicate: query => {\n          var _query$meta;\n\n          return customForm.version === (query === null || query === void 0 ? void 0 : (_query$meta = query.meta) === null || _query$meta === void 0 ? void 0 : _query$meta.version);\n        }\n      });\n\n      if (!cachedCustomForm) {\n        // Set the version on the query metadata so we can use that for comparing\n        queryClient.prefetchQuery(queryKey, {\n          meta: {\n            version: customForm.version,\n            persist: true\n          }\n        });\n      }\n    }\n  }\n};\n\nexport default useCustomFormsPrefetch;","export const CSS_FILES = [{\n  media: 'screen',\n  styleSheet: '/dhis-web-commons/javascripts/jQuery/ui/css/redmond/jquery-ui.css'\n}, {\n  media: 'screen',\n  styleSheet: 'style/dhis-web-dataentry.css'\n}, {\n  media: 'print',\n  styleSheet: '/dhis-web-commons/css/print.css'\n}, {\n  media: 'screen,print',\n  styleSheet: '/dhis-web-commons/css/themes/light_blue/light_blue.css'\n}]; // TODO: We should probably use a \"curated\" list of JS assets like below\n// but for now we just use all struts assets to get the basics working\n// export const SCRIPT_FILES = [\n//     '/dhis-web-commons/javascripts/jQuery/jquery.min.js',\n//     '/dhis-web-commons/javascripts/jQuery/jquery.utils.js',\n//     '/dhis-web-commons/javascripts/jQuery/ui/jquery-ui.min.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.util.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.period.js',\n//     '/dhis-web-commons/javascripts/commons.js',\n//     '/dhis-web-commons/javascripts/commons.ajax.js',\n//     '/dhis-web-commons/javascripts/lists.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.period.js',\n//     '/dhis-web-commons/javascripts/periodType.js',\n//     '/dhis-web-commons/javascripts/date.js',\n//     '/dhis-web-commons/oust/oust.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.storage.ss.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.storage.ls.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.storage.idb.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.storage.memory.js',\n//     '/dhis-web-commons/javascripts/dhis2/dhis2.storage.js',\n//     // Note, these are not in dhis2-web-commons.\n//     // Probably not a future proof way of doing stuff\n//     'javascript/form.js',\n//     'javascript/entry.js',\n//     'javascript/history.js',\n//     'javascript/entry.fileresource.js',\n// ]\n\nexport const SCRIPT_FILES = ['/dhis-web-commons/javascripts/jQuery/jquery.min.js', '/dhis-web-commons/javascripts/jQuery/jquery.utils.js', '/dhis-web-commons/javascripts/jQuery/jquery.ext.js', '/dhis-web-commons/javascripts/jQuery/jquery.metadata.js', '/dhis-web-commons/javascripts/jQuery/jquery.tablesorter.min.js', '/dhis-web-commons/javascripts/jQuery/jquery.upload-1.0.2.min.js', '/dhis-web-commons/javascripts/jQuery/jquery.dhisAjaxSelect.js', '/dhis-web-commons/javascripts/jQuery/ui/jquery-ui.min.js', '/dhis-web-commons/javascripts/jQuery/ui/jquery.blockUI.js', '/dhis-web-commons/javascripts/jQuery/jquery.validate.js', '/dhis-web-commons/javascripts/jQuery/jquery.validate.ext.js', '/dhis-web-commons/javascripts/jQuery/jquery.cookie.js', '/dhis-web-commons/javascripts/jQuery/jquery.glob.js', '/dhis-web-commons/javascripts/jQuery/jquery.date.js', '/dhis-web-commons/javascripts/jQuery/jquery.tmpl.js', '/dhis-web-commons/javascripts/jQuery/jquery.autogrow.js', '/dhis-web-commons/javascripts/jQuery/jquery.fileupload.min.js', '/dhis-web-commons/javascripts/underscore.min.js', '/dhis-web-commons/javascripts/filesize.min.js', '/dhis-web-commons/javascripts/dhis2/dhis2.util.js', '/dhis-web-commons/javascripts/commons.js', '/dhis-web-commons/javascripts/commons.ajax.js', '/dhis-web-commons/javascripts/lists.js', '/dhis-web-commons/javascripts/periodType.js', '/dhis-web-commons/javascripts/date.js', '/dhis-web-commons/javascripts/json2.js', '/dhis-web-commons/javascripts/validationRules.js', '/dhis-web-commons/javascripts/dhis2/dhis2.array.js', '/dhis-web-commons/javascripts/dhis2/dhis2.select.js', '/dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.min.js', '/dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.plus.min.js', '/dhis-web-commons/javascripts/moment/moment-with-langs.min.js', '/dhis-web-commons/select2/select2.min.js', '/dhis-web-commons/javascripts/dhis2/dhis2.period.js', '/dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.picker.min.js', '/dhis-web-commons/javascripts/dhis2/dhis2.selected.js', '/dhis-web-commons/javascripts/dhis2/dhis2.comparator.js', '/dhis-web-commons/javascripts/dhis2/dhis2.availability.js', '/dhis-web-commons/javascripts/dhis2/dhis2.trigger.js', '/dhis-web-commons/javascripts/dhis2/dhis2.sharing.js', '/dhis-web-commons/javascripts/dhis2/dhis2.validation.js', '/dhis-web-commons/javascripts/dhis2/dhis2.storage.ss.js', '/dhis-web-commons/javascripts/dhis2/dhis2.storage.ls.js', '/dhis-web-commons/javascripts/dhis2/dhis2.storage.idb.js', '/dhis-web-commons/javascripts/dhis2/dhis2.storage.memory.js', '/dhis-web-commons/javascripts/dhis2/dhis2.storage.js', '/dhis-web-commons/javascripts/dhis2/dhis2.contextmenu.js', '/dhis-web-commons/javascripts/dhis2/dhis2.appcache.js', '/dhis-web-commons/javascripts/dhis2/dhis2.translate.js', '/dhis-web-commons/i18nJavaScript.action', '/main.js', '/request.js', '/dhis-web-commons/ouwt/ouwt.js', '\"javascript/form.js', '\"javascript/entry.js', '\"javascript/history.js', '\"javascript/entry.fileresource.js', '/dhis-web-commons/javascripts/floatThead/jquery.floatThead.min.js', '/api/files/script'];\nexport const PAGE_SCRIPTS = \"\\n<script type=\\\"text/javascript\\\">\\n    var dateFormat = 'yy-mm-dd';\\n</script>\\n<script>\\n    $.ajaxSetup( {\\n        beforeSend: function(xhr) {\\n            xhr.setRequestHeader(\\n                'X-Requested-With',\\n                {\\n                    toString: function() {\\n                        return '';\\n                    }\\n                }\\n            );\\n        }\\n    });\\n</script>\\n<script>\\n    dhis2.period.format = 'yyyy-mm-dd';\\n    dhis2.period.calendar = $.calendars.instance('gregorian');\\n    dhis2.period.generator = new dhis2.period.PeriodGenerator( dhis2.period.calendar, dhis2.period.format );\\n    dhis2.period.picker = new dhis2.period.DatePicker( dhis2.period.calendar, dhis2.period.format );\\n</script>\\n\";\nexport const PAGE_STYLES = \"\\n    html {\\n        line-height: 1.15;\\n        font-size: 14px;\\n        text-size-adjust: 100%;\\n    }\\n    body {\\n        font-family: Roboto, sans-serif;\\n        box-sizing: inherit;\\n    }\\n    table {\\n        margin-top: 16px;\\n        border-collapse: collapse;\\n    }\\n    table td,\\n    table th {\\n        border: 1px solid #bcbcbc;\\n        padding: 4px;\\n    }\\n\";","import _JSXStyle from \"styled-jsx/style\";\nimport { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { CSS_FILES, SCRIPT_FILES, PAGE_SCRIPTS, PAGE_STYLES } from './iframe-assets.js';\n\nconst createScriptTag = (baseUrl, script) => \"<script src=\\\"\".concat(baseUrl + script, \"\\\" type=\\\"text/javascript\\\"></script>\");\n\nconst createLinkTag = (baseUrl, media, styleSheet) => \"<link type=\\\"text/css\\\" rel=\\\"stylesheet\\\" media=\\\"\".concat(media, \"\\\" href=\\\"\").concat(baseUrl + styleSheet, \"\\\" >\");\n\nconst fixRelativePaths = (baseUrl, html) => html.replace(/(src|href)=\"..\\//g, '$1' + \"=\\\"\".concat(baseUrl, \"/\"));\n\nconst wrapHtmlInTemplate = (baseUrl, html) => \"\\n    <!DOCTYPE html>\\n    <html lang=\\\"en\\\">\\n        <head>\\n            <meta charset=\\\"utf-8\\\">\\n            \".concat(CSS_FILES.map(_ref => {\n  let {\n    media,\n    styleSheet\n  } = _ref;\n  return createLinkTag(baseUrl, media, styleSheet);\n}).join('\\n'), \"\\n            \").concat(SCRIPT_FILES.map(script => createScriptTag(baseUrl, script)).join('\\n'), \"\\n            \\n            \").concat(PAGE_SCRIPTS, \"\\n\\n            <style type=\\\"text/css\\\">\\n                \").concat(PAGE_STYLES, \"\\n            </style>\\n        </head>\\n        <body>\\n            \").concat(fixRelativePaths(baseUrl, html), \"\\n        </body>\\n    </html>\\n\");\n\nconst HtmlReport = _ref2 => {\n  let {\n    html\n  } = _ref2;\n  const {\n    baseUrl\n  } = useConfig();\n  const iframeRef = useRef(null);\n  const [iframeHasLoaded, setIframeHasLoaded] = useState(false);\n  const [height, setHeight] = useState();\n  useEffect(() => {\n    if (!iframeHasLoaded) {\n      return;\n    }\n\n    const iframeHtml = iframeRef.current.contentWindow.document.documentElement;\n    const iframeBody = iframeRef.current.contentWindow.document.body;\n\n    const adjustHeight = () => {\n      const iframeHtmlRect = iframeHtml.getBoundingClientRect();\n      const iframeBodyRect = iframeBody.getBoundingClientRect();\n      const maxInnerHeight = Math.max(iframeHtmlRect.height, iframeBodyRect.height); // Add 20px as a \"safety margin\" in case we get a horizontal scroll bar\n\n      setHeight(Math.ceil(maxInnerHeight) + 20);\n    };\n\n    const heightObserver = new window.ResizeObserver(adjustHeight);\n    heightObserver.observe(iframeHtml);\n    heightObserver.observe(iframeBody);\n    adjustHeight();\n    return heightObserver.disconnect;\n  }, [iframeHasLoaded]);\n  return /*#__PURE__*/React.createElement(\"iframe\", {\n    ref: iframeRef,\n    id: \"html-report-id\",\n    srcDoc: wrapHtmlInTemplate(baseUrl, html),\n    title: \"html-report-content\",\n    width: \"100%\",\n    height: height,\n    seamless: true,\n    sandbox: \"allow-same-origin allow-scripts allow-modals allow-downloads\",\n    onLoad: () => setIframeHasLoaded(true),\n    className: \"jsx-3651815525\"\n  }, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3651815525\"\n  }, [\"iframe.jsx-3651815525{border:none;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}\"]));\n};\n\nHtmlReport.propTypes = {\n  html: PropTypes.string.isRequired\n};\nexport default HtmlReport;","// Semi annual monitoring checklist\nexport const processedHtml = \"\\n<div class=\\\"cde cde-NORMAL\\\">\\n<style type=\\\"text/css\\\">table {\\n\\tmargin-bottom: 40px;\\n}\\n\\ntable {\\n\\twidth: 800px;\\n}\\n\\nth {\\n\\twidth: 50%;\\n}\\n</style>\\n<h3>Semi-Annual Monitoring Checklist</h3>\\n\\n<div style=\\\"margin-bottom: 20px\\\">INSTRUCTIONS: This form is to be completed during semi-annual clinical monitoring visits through interviews with the facility manager and staff in the FP and CAC units, as well as through structured observation and record review.</div>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Facility details</th>\\n\\t\\t\\t<th colspan=\\\"2\\\">&nbsp;</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Date of clinical monitoring visit</td>\\n\\t\\t\\t<td>&nbsp;</td>\\n\\t\\t\\t<td><input id=\\\"rkAZZFGFEQ7-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"1\\\"/><span id=\\\"rkAZZFGFEQ7-dataelement\\\" style=\\\"display:none\\\">CMC Date of clinical monitoring visit</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Visiting team members (name and organization)</td>\\n\\t\\t\\t<td>&nbsp;</td>\\n\\t\\t\\t<td><textarea id=\\\"o5USc1zH5mA-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entryfield\\\" class=\\\"entryfield entryarea\\\" tabindex=\\\"2\\\"></textarea><span id=\\\"o5USc1zH5mA-dataelement\\\" style=\\\"display:none\\\">CMC Visiting team members (name and organization)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"7\\\">Types of support provided by ABRI III (tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"xV8nAovXuOF-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"3\\\"/><span id=\\\"xV8nAovXuOF-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - CC and CAC support</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>CC and CAC support</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"xxgP9Pbe70o-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"4\\\"/><span id=\\\"xxgP9Pbe70o-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - PM (FS & NSV)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>PM (FS NSV)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"uCSDy69GLVl-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"5\\\"/><span id=\\\"uCSDy69GLVl-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - PPIUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>PPUID</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"sgcewfdjRRq-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"6\\\"/><span id=\\\"sgcewfdjRRq-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - Service integration</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Service integration</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"drDdShUJJzi-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"7\\\"/><span id=\\\"drDdShUJJzi-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - Youth-friendly services</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Youth friendly services</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"KPxUIT1OtGW-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"8\\\"/><span id=\\\"KPxUIT1OtGW-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - Community referral linkages</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Community referral linkages</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"heGCGPwVxfU-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"9\\\"/><span id=\\\"heGCGPwVxfU-dataelement\\\" style=\\\"display:none\\\">CMC Support provided ABRI III - Others, specify</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Others, specify</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"3\\\">Routine service provision</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th colspan=\\\"2\\\">Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"9\\\">Which of the following FP services are available today or upon request any day that this health facility is open? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"XPyixxRoRFF-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"10\\\"/><span id=\\\"XPyixxRoRFF-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - IUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>IUD</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"k7vxGJER2SH-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"11\\\"/><span id=\\\"k7vxGJER2SH-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Jadelle or Sino-Implant</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Jadelle or Sino-Implant</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"xqlapchAEVR-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"12\\\"/><span id=\\\"xqlapchAEVR-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Implanon</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Implanon</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"UysSLXGhwrC-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"13\\\"/><span id=\\\"UysSLXGhwrC-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Contraceptive pills</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Contraceptive pills</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"NKoGfjnFWcE-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"14\\\"/><span id=\\\"NKoGfjnFWcE-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Injectables (DMPA)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Injectables (DMPA)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"FNa6RHwtpuV-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"15\\\"/><span id=\\\"FNa6RHwtpuV-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Male condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"ZVqZ600pgzC-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"16\\\"/><span id=\\\"ZVqZ600pgzC-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Female condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"dupnnRrJB9g-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"17\\\"/><span id=\\\"dupnnRrJB9g-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Male Sterilization</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male Sterilization</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"X4SRfUAnrHD-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"18\\\"/><span id=\\\"X4SRfUAnrHD-dataelement\\\" style=\\\"display:none\\\">CMC FP services available - Female Sterilization</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female Sterilization</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"6\\\">Safe abortion related services are available today (or up on request ant time that the health facility is open)? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"EQbayB0ysYj-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"19\\\"/><span id=\\\"EQbayB0ysYj-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - MVA Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MVA Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"MYVHFFkdTYi-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"20\\\"/><span id=\\\"MYVHFFkdTYi-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - MA Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MA Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"xN2F50KrWOs-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"21\\\"/><span id=\\\"xN2F50KrWOs-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - E&C/D&C Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>EC/DC Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"QxYJoKrJTZx-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"22\\\"/><span id=\\\"QxYJoKrJTZx-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - MVA Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MVA Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"fmQ8ORZ0eaz-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"23\\\"/><span id=\\\"fmQ8ORZ0eaz-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - MA Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MA Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"edTAupzSt8B-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"24\\\"/><span id=\\\"edTAupzSt8B-dataelement\\\" style=\\\"display:none\\\">CMC Safe abortion related services available - E&C/D&C Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>EC/DC Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"6\\\">Post abortion related services are available today (or up on request ant time that the health facility is open)? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"lFEc4Weo8Uw-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"25\\\"/><span id=\\\"lFEc4Weo8Uw-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - MVA Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MVA Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"FAZsjrqfaYk-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"26\\\"/><span id=\\\"FAZsjrqfaYk-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - MA Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MA Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"XcP6HTlP7Nt-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"27\\\"/><span id=\\\"XcP6HTlP7Nt-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - E&C/D&C Abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>EC/DC Abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"Fo8lG6JORup-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"28\\\"/><span id=\\\"Fo8lG6JORup-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - MVA Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MVA Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"GaDscQKVYrw-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"29\\\"/><span id=\\\"GaDscQKVYrw-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - MA Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>MA Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"x3cG1nQrV0d-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"30\\\"/><span id=\\\"x3cG1nQrV0d-dataelement\\\" style=\\\"display:none\\\">CMC Post abortion related services available - E&C/D&C Post-abortion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>EC/DC Post-abortion</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"8\\\">Which of the following post-abortion FP methods are provided in the CAC unit itself (i.e. without need for internal referral)? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"J6KG9poh1WL-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"31\\\"/><span id=\\\"J6KG9poh1WL-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - IUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>IUD</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"HcQqfCPHC79-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"32\\\"/><span id=\\\"HcQqfCPHC79-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Jadelle or Sino-Implant</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Jadelle or Sino-Implant</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"lLl7dD5jRhg-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"33\\\"/><span id=\\\"lLl7dD5jRhg-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Implanon</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Implanon</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"A4R8Ns0wtJk-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"34\\\"/><span id=\\\"A4R8Ns0wtJk-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Contraceptive pills</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Contraceptive pills</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"R8X9WHD6Ta9-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"35\\\"/><span id=\\\"R8X9WHD6Ta9-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Injectables (DMPA)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Injectables (DMPA)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"MqeQ222wxN8-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"36\\\"/><span id=\\\"MqeQ222wxN8-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Male condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"H5q0J5EeytP-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"37\\\"/><span id=\\\"H5q0J5EeytP-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Female condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"otxWZ2s0Iyg-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"38\\\"/><span id=\\\"otxWZ2s0Iyg-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided in CAC unit - Other (specify)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Other (specify)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"8\\\">Which of the following post-abortion FP methods are provided to CAC clients through internal referrals to the FP unit? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"sIZsJrOtJ8S-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"39\\\"/><span id=\\\"sIZsJrOtJ8S-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - IUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>IUD</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"aponpM6fnJe-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"40\\\"/><span id=\\\"aponpM6fnJe-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Jadelle or Sino-Implant</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Jadelle or Sino-Implant</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"yEPjrf4pvLF-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"41\\\"/><span id=\\\"yEPjrf4pvLF-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Implanon</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Implanon</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"aEgcSZrUD1j-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"42\\\"/><span id=\\\"aEgcSZrUD1j-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Contraceptive pills</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Contraceptive pills</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"weKxnsPrnTB-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"43\\\"/><span id=\\\"weKxnsPrnTB-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Injectables (DMPA)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Injectables (DMPA)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"VX6qaS9JEGv-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"44\\\"/><span id=\\\"VX6qaS9JEGv-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Male condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"wpEO1pvc4oS-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"45\\\"/><span id=\\\"wpEO1pvc4oS-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Female condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"XktwbHEcOZ5-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"46\\\"/><span id=\\\"XktwbHEcOZ5-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP methods provided through referrals - Other (specify)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Other (specify)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"8\\\">For which FP methods or services not available at this facility, and are clients referred to other facility? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"PNAudHvnC29-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"47\\\"/><span id=\\\"PNAudHvnC29-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - IUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>IUD</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"GvSDEPwzn1l-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"48\\\"/><span id=\\\"GvSDEPwzn1l-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Jadelle or Sino-Implant</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Jadelle or Sino-Implant</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"A1wdvOOktNI-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"49\\\"/><span id=\\\"A1wdvOOktNI-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Implanon</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Implanon</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"TD9EmYHnJcZ-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"50\\\"/><span id=\\\"TD9EmYHnJcZ-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Contraceptive pills</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Contraceptive pills</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"OutJUTjR21E-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"51\\\"/><span id=\\\"OutJUTjR21E-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Injectables (DMPA)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Injectables (DMPA)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"aPRMs8ZWoQe-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"52\\\"/><span id=\\\"aPRMs8ZWoQe-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Male condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"nECT8BcbdF6-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"53\\\"/><span id=\\\"nECT8BcbdF6-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Female condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"x6Cc96XcRjT-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"54\\\"/><span id=\\\"x6Cc96XcRjT-dataelement\\\" style=\\\"display:none\\\">CMC Post-abortion FP referred other facility - Other (specify)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Other (specify)</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">Community referrals and qualified staffing</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Does this facility receive FP referrals from community health workers in the catchment area? (Verify by observing whether there are confirmed referral slips dated within the past two months)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"rTYZHPHVULr-HllvX50cXC0-val\\\"  id=\\\"rTYZHPHVULr-HllvX50cXC0-val\\\" tabindex=\\\"55\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"rTYZHPHVULr-HllvX50cXC0-val\\\"  id=\\\"rTYZHPHVULr-HllvX50cXC0-val\\\" tabindex=\\\"56\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"rTYZHPHVULr-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"rTYZHPHVULr-dataelement\\\" style=\\\"display:none\\\">CMC Facility receives FP referrals from community health workers</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many providers currently posted to the FP unit have been trained and certified as competent in the provision of comprehensive contraception (CC)? (Verify through review of records of staff who have been trained and certified as competent and who are currently posted to the FP unit)</td>\\n\\t\\t\\t<td><input id=\\\"c30icyuh08j-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"57\\\"/><span id=\\\"c30icyuh08j-dataelement\\\" style=\\\"display:none\\\">CMC Providers trained and certified comprehensive contraception (CC)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many providers currently posted to the CAC unit have been certified as competent in the provision of comprehensive abortion care (CAC) (Verify through review of records of staff who have been trained and certified as competent and who are currently posted to the CAC unit)</td>\\n\\t\\t\\t<td><input id=\\\"mU3ywrD2d24-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"58\\\"/><span id=\\\"mU3ywrD2d24-dataelement\\\" style=\\\"display:none\\\">CMC Providers trained and certified comprehensive abortion care (CAC)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many providers currently posted in the CAC unit have been trained and certified as competent in both CAC and CC (Verify through review of records of staff who have been trained and certified as competent and who are currently posted to the CAC unit)</td>\\n\\t\\t\\t<td><input id=\\\"mrCQ760kGUu-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"59\\\"/><span id=\\\"mrCQ760kGUu-dataelement\\\" style=\\\"display:none\\\">CMC Providers trained and certified both CAC and CC</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many provider teams in the health facility have been trained and certified as competent in the provision of PMs (Provider team defined as a physician and nurse or health officer and nurse).</td>\\n\\t\\t\\t<td><input id=\\\"OZGgl38Z7tC-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"60\\\"/><span id=\\\"OZGgl38Z7tC-dataelement\\\" style=\\\"display:none\\\">CMC Provider teams trained and certified PMs</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many providers currently posted to the maternity/delivery ward been trained and certified as competent in postpartum IUD insertion?</td>\\n\\t\\t\\t<td><input id=\\\"J6hufb5lO0k-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"61\\\"/><span id=\\\"J6hufb5lO0k-dataelement\\\" style=\\\"display:none\\\">CMC Providers trained and certified postpartum IUD insertion</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many providers currently posted to the FP and CAC unit been trained in youth-friendly services in addition to CC or CAC services?</td>\\n\\t\\t\\t<td><input id=\\\"ILtncREADfd-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"62\\\"/><span id=\\\"ILtncREADfd-dataelement\\\" style=\\\"display:none\\\">CMC Providers trained in youth-friendly services in addition to CC or CAC services</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"3\\\">Stock out and logistics</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th colspan=\\\"2\\\">Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td rowspan=\\\"7\\\">During the past two months, has the facility experienced stock out of any of the following commodities? (Tick all that apply)</td>\\n\\t\\t\\t<td><input id=\\\"wwh5ng6o81Z-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"63\\\"/><span id=\\\"wwh5ng6o81Z-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - IUD</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>UID (Copper T or LNG)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"fuhMFSpMGzx-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"64\\\"/><span id=\\\"fuhMFSpMGzx-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Jadelle or Sino-Implant</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Jadelle or Sino-Implant</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"CsORyrmcScJ-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"65\\\"/><span id=\\\"CsORyrmcScJ-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Implanon</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Implanon</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"bZgd4FWFsQI-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"66\\\"/><span id=\\\"bZgd4FWFsQI-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Contraceptive pills</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Contraceptive pills</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"lZEg2kLmHnz-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"67\\\"/><span id=\\\"lZEg2kLmHnz-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Injectables (DMPA)</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Injectables (DMPA)</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"h0RS9WyBGPh-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"68\\\"/><span id=\\\"h0RS9WyBGPh-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Male condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Male condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td><input id=\\\"SDQMvEIFZJH-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  name=\\\"entrytrueonly\\\" class=\\\"entrytrueonly\\\"type=\\\"checkbox\\\" tabindex=\\\"69\\\"/><span id=\\\"SDQMvEIFZJH-dataelement\\\" style=\\\"display:none\\\">CMC Stock-out - Female condoms</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t\\t<td>Female condoms</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are the most recent FP and CAC commodity requests correctly based on previous consumption and stock at hand (Verify through review of most recent RRF)</td>\\n\\t\\t\\t<td>&nbsp;</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"rZiGA1lv7Ah-HllvX50cXC0-val\\\"  id=\\\"rZiGA1lv7Ah-HllvX50cXC0-val\\\" tabindex=\\\"70\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"rZiGA1lv7Ah-HllvX50cXC0-val\\\"  id=\\\"rZiGA1lv7Ah-HllvX50cXC0-val\\\" tabindex=\\\"71\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"rZiGA1lv7Ah-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"rZiGA1lv7Ah-dataelement\\\" style=\\\"display:none\\\">CMC FP and CAC commodity requests correctly based on previous consumption / stock at hand</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Did most recent delivery of FP and CAC commodities match the request made through the RRF? (Verify through review of most recent RRF)</td>\\n\\t\\t\\t<td>&nbsp;</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"sjir9Ki2vuA-HllvX50cXC0-val\\\"  id=\\\"sjir9Ki2vuA-HllvX50cXC0-val\\\" tabindex=\\\"72\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"sjir9Ki2vuA-HllvX50cXC0-val\\\"  id=\\\"sjir9Ki2vuA-HllvX50cXC0-val\\\" tabindex=\\\"73\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"sjir9Ki2vuA-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"sjir9Ki2vuA-dataelement\\\" style=\\\"display:none\\\">CMC Most recent delivery of FP and CAC commodities match the request made through the RRF</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Have staff in the FP, CAC and pharmacy units been oriented on use of the IPLS for requesting and management of FP and CAC commodities? (Verify through interview with department heads or facility in-charge)</td>\\n\\t\\t\\t<td>&nbsp;</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"P7jdTXzh4ut-HllvX50cXC0-val\\\"  id=\\\"P7jdTXzh4ut-HllvX50cXC0-val\\\" tabindex=\\\"74\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"P7jdTXzh4ut-HllvX50cXC0-val\\\"  id=\\\"P7jdTXzh4ut-HllvX50cXC0-val\\\" tabindex=\\\"75\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"P7jdTXzh4ut-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"P7jdTXzh4ut-dataelement\\\" style=\\\"display:none\\\">CMC Staff in the FP, CAC and pharmacy units have been oriented on use of the IPLS for FP and CAC</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">Infrastructure</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Do counseling rooms in FP and CAC service units ensure client privacy and confidentiality? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"DF0B07U2lPZ-HllvX50cXC0-val\\\"  id=\\\"DF0B07U2lPZ-HllvX50cXC0-val\\\" tabindex=\\\"76\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"DF0B07U2lPZ-HllvX50cXC0-val\\\"  id=\\\"DF0B07U2lPZ-HllvX50cXC0-val\\\" tabindex=\\\"77\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"DF0B07U2lPZ-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"DF0B07U2lPZ-dataelement\\\" style=\\\"display:none\\\">CMC Counseling rooms in FP and CAC service units ensure client privacy and confidentiality</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Do procedure rooms in FP and CAC service units ensure client privacy and confidentiality? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"ylTxB8pDdW6-HllvX50cXC0-val\\\"  id=\\\"ylTxB8pDdW6-HllvX50cXC0-val\\\" tabindex=\\\"78\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"ylTxB8pDdW6-HllvX50cXC0-val\\\"  id=\\\"ylTxB8pDdW6-HllvX50cXC0-val\\\" tabindex=\\\"79\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"ylTxB8pDdW6-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"ylTxB8pDdW6-dataelement\\\" style=\\\"display:none\\\">CMC Procedure rooms in FP and CAC service units ensure client privacy and confidentiality</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Do FP and CAC procedure rooms have adequate lighting for the performance of all procedures (including PM services where applicable)? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"EonDTYTVXxM-HllvX50cXC0-val\\\"  id=\\\"EonDTYTVXxM-HllvX50cXC0-val\\\" tabindex=\\\"80\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"EonDTYTVXxM-HllvX50cXC0-val\\\"  id=\\\"EonDTYTVXxM-HllvX50cXC0-val\\\" tabindex=\\\"81\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"EonDTYTVXxM-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"EonDTYTVXxM-dataelement\\\" style=\\\"display:none\\\">CMC FP and CAC procedure rooms have adequate lighting for the performance of all procedures</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">Infection prevention</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are Infection prevention protocol charts posted in both FP and CAC service units? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"e4r6eLK76M9-HllvX50cXC0-val\\\"  id=\\\"e4r6eLK76M9-HllvX50cXC0-val\\\" tabindex=\\\"82\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"e4r6eLK76M9-HllvX50cXC0-val\\\"  id=\\\"e4r6eLK76M9-HllvX50cXC0-val\\\" tabindex=\\\"83\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"e4r6eLK76M9-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"e4r6eLK76M9-dataelement\\\" style=\\\"display:none\\\">CMC Infection prevention protocol charts are posted in both FP and CAC service units</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Is there a functioning set-up for decontamination in both FP and CAC service units? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"tY33H1Xmbiq-HllvX50cXC0-val\\\"  id=\\\"tY33H1Xmbiq-HllvX50cXC0-val\\\" tabindex=\\\"84\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"tY33H1Xmbiq-HllvX50cXC0-val\\\"  id=\\\"tY33H1Xmbiq-HllvX50cXC0-val\\\" tabindex=\\\"85\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"tY33H1Xmbiq-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"tY33H1Xmbiq-dataelement\\\" style=\\\"display:none\\\">CMC Functioning set-up for decontamination in both FP and CAC service units exist</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Is there a sterilization/HLD mechanism in place, such as sterilizer, boiler, autoclave in both FP and CAC service units or available to them in a central sterilization unit in the facility? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"iyLG1s9EAQ8-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"86\\\"/><span id=\\\"iyLG1s9EAQ8-dataelement\\\" style=\\\"display:none\\\">CMC Sterilization/HLD mechanism in place, such as sterilizer, boiler, autoclave available in FP and CAC</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are there leak-proof and puncture-proof containers in both FP and CAC service units? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"ShRC4KSdfcw-HllvX50cXC0-val\\\"  id=\\\"ShRC4KSdfcw-HllvX50cXC0-val\\\" tabindex=\\\"87\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"ShRC4KSdfcw-HllvX50cXC0-val\\\"  id=\\\"ShRC4KSdfcw-HllvX50cXC0-val\\\" tabindex=\\\"88\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"ShRC4KSdfcw-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"ShRC4KSdfcw-dataelement\\\" style=\\\"display:none\\\">CMC Leak-proof and puncture-proof containers in FP and CAC exist</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">IVDM / FP compliance</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are clients offered information on range of methods A copy of the Tiahrt poster (method chart) or a flipchart on all FP methods available in the FP and CAC service units? (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"LHXqz53TmPe-HllvX50cXC0-val\\\"  id=\\\"LHXqz53TmPe-HllvX50cXC0-val\\\" tabindex=\\\"89\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"LHXqz53TmPe-HllvX50cXC0-val\\\"  id=\\\"LHXqz53TmPe-HllvX50cXC0-val\\\" tabindex=\\\"90\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"LHXqz53TmPe-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"LHXqz53TmPe-dataelement\\\" style=\\\"display:none\\\">CMC Clients offered information on range of methods exist</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are there any targets or quotas for service providers in the FP or CAC unit for serving a certain number of FP clients or for the provision of certain FP methods? (Verify through interview with department heads or in-charge)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"k5YaukDVwcu-HllvX50cXC0-val\\\"  id=\\\"k5YaukDVwcu-HllvX50cXC0-val\\\" tabindex=\\\"91\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"k5YaukDVwcu-HllvX50cXC0-val\\\"  id=\\\"k5YaukDVwcu-HllvX50cXC0-val\\\" tabindex=\\\"92\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"k5YaukDVwcu-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"k5YaukDVwcu-dataelement\\\" style=\\\"display:none\\\">CMC Targets or quotas for service providers in the FP or CAC exist</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are there incentives for staff in the FP or CAC service units to provide a certain FP method or incentives for clients in these units to adopt a certain FP method? (Verify through interview with department heads or in-charge)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"eDO63WfftUO-HllvX50cXC0-val\\\"  id=\\\"eDO63WfftUO-HllvX50cXC0-val\\\" tabindex=\\\"93\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"eDO63WfftUO-HllvX50cXC0-val\\\"  id=\\\"eDO63WfftUO-HllvX50cXC0-val\\\" tabindex=\\\"94\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"eDO63WfftUO-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"eDO63WfftUO-dataelement\\\" style=\\\"display:none\\\">CMC Incentives for staff in the FP or CAC service units to provide FP exist</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are there signed consent forms for all PM and CAC procedures conducted during the past two months (Verify through review of signed consent forms against procedures performed during past 2 months)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"nC6ZrPp6F7B-HllvX50cXC0-val\\\"  id=\\\"nC6ZrPp6F7B-HllvX50cXC0-val\\\" tabindex=\\\"95\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"nC6ZrPp6F7B-HllvX50cXC0-val\\\"  id=\\\"nC6ZrPp6F7B-HllvX50cXC0-val\\\" tabindex=\\\"96\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"nC6ZrPp6F7B-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"nC6ZrPp6F7B-dataelement\\\" style=\\\"display:none\\\">CMC Signed consent forms for all PM and CAC procedures conducted during the past two months</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">Management and supervision</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Are national guidelines and standards for FP and CAC service provision available in each unit?</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"AX2JjzrU0oU-HllvX50cXC0-val\\\"  id=\\\"AX2JjzrU0oU-HllvX50cXC0-val\\\" tabindex=\\\"97\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"AX2JjzrU0oU-HllvX50cXC0-val\\\"  id=\\\"AX2JjzrU0oU-HllvX50cXC0-val\\\" tabindex=\\\"98\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"AX2JjzrU0oU-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"AX2JjzrU0oU-dataelement\\\" style=\\\"display:none\\\">CMC National guidelines and standards for FP and CAC service provision available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Have staff in the FP and CAC units received a facilitative supervision visit from on-site / off-site supervisor or ABRI project staff during the past six (6) months (Verify through review of dated supervision report at facility that specifies problems discussed action steps recommended)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"s5gk8w06vif-HllvX50cXC0-val\\\"  id=\\\"s5gk8w06vif-HllvX50cXC0-val\\\" tabindex=\\\"99\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"s5gk8w06vif-HllvX50cXC0-val\\\"  id=\\\"s5gk8w06vif-HllvX50cXC0-val\\\" tabindex=\\\"100\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"s5gk8w06vif-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"s5gk8w06vif-dataelement\\\" style=\\\"display:none\\\">CMC Staff in FP/CAC units received a facilitative supervision visit from supervisor past six months</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Is this facility part of health care finance (HCF) board scheme? if so; does the facility use part of the revenue generated for FP/CAC related services?</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"wokFPoIO3NK-HllvX50cXC0-val\\\"  id=\\\"wokFPoIO3NK-HllvX50cXC0-val\\\" tabindex=\\\"101\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"wokFPoIO3NK-HllvX50cXC0-val\\\"  id=\\\"wokFPoIO3NK-HllvX50cXC0-val\\\" tabindex=\\\"102\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"wokFPoIO3NK-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"wokFPoIO3NK-dataelement\\\" style=\\\"display:none\\\">CMC Facility part of health care finance (HCF) board scheme</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>Do FP and CAC service units have dedicated hours or space for youth clients (Verify through observation)</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"LadMythncw2-HllvX50cXC0-val\\\"  id=\\\"LadMythncw2-HllvX50cXC0-val\\\" tabindex=\\\"103\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"LadMythncw2-HllvX50cXC0-val\\\"  id=\\\"LadMythncw2-HllvX50cXC0-val\\\" tabindex=\\\"104\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"LadMythncw2-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"LadMythncw2-dataelement\\\" style=\\\"display:none\\\">CMC FP and CAC service units have dedicated hours or space for youth clients</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<th colspan=\\\"2\\\">OOC and instruments</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<th>Question</th>\\n\\t\\t\\t<th>Response options</th>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>If COPE has been introduced at the facility, have the staff conducted a COPE exercise during the past quarter?</td>\\n\\t\\t\\t<td><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"OJSkJXzhdU1-HllvX50cXC0-val\\\"  id=\\\"OJSkJXzhdU1-HllvX50cXC0-val\\\" tabindex=\\\"105\\\" value=\\\"true\\\">Yes</label><label><input type=\\\"radio\\\" class=\\\"entryselect\\\" name=\\\"OJSkJXzhdU1-HllvX50cXC0-val\\\"  id=\\\"OJSkJXzhdU1-HllvX50cXC0-val\\\" tabindex=\\\"106\\\" value=\\\"false\\\">No</label><img class=\\\"commentlink\\\" id=\\\"OJSkJXzhdU1-HllvX50cXC0-comment\\\" src=\\\"../images/comment.png\\\" title=\\\"View comment\\\" style=\\\"cursor: pointer;\\\"/><span id=\\\"OJSkJXzhdU1-dataelement\\\" style=\\\"display:none\\\">CMC COPE has been introduced at the facility and staff conducted a COPE exercise during the past quarter</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many IUD KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"jhz73zxjuuy-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"107\\\"/><span id=\\\"jhz73zxjuuy-dataelement\\\" style=\\\"display:none\\\">CMC IUD KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many IUD REMOVAL KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"ozL7F7k4l0S-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"108\\\"/><span id=\\\"ozL7F7k4l0S-dataelement\\\" style=\\\"display:none\\\">CMC IUD REMOVAL KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many IMPLANT INSERTION KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"VEsHW11Ee9u-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"109\\\"/><span id=\\\"VEsHW11Ee9u-dataelement\\\" style=\\\"display:none\\\">CMC IMPLANT INSERTION KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many IMPLANT REMOVAL KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"x7UR3a7PnFC-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"110\\\"/><span id=\\\"x7UR3a7PnFC-dataelement\\\" style=\\\"display:none\\\">CMC IMPLANT REMOVAL KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many MVA KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"Els0dBuHtWJ-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"111\\\"/><span id=\\\"Els0dBuHtWJ-dataelement\\\" style=\\\"display:none\\\">CMC MVA KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many MINILAPAROTOMY KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"W87PJK0RlJa-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"112\\\"/><span id=\\\"W87PJK0RlJa-dataelement\\\" style=\\\"display:none\\\">CMC MINILAPAROTOMY KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td>How many NSV KITS (functional and in good condition) are available? (Verify through observation)</td>\\n\\t\\t\\t<td><input id=\\\"KKEYwCcGvfl-HllvX50cXC0-val\\\" name=\\\"entryfield\\\" title=\\\"\\\" value=\\\"\\\"  type=\\\"text\\\" name=\\\"entryfield\\\" class=\\\"entryfield\\\" tabindex=\\\"113\\\"/><span id=\\\"KKEYwCcGvfl-dataelement\\\" style=\\\"display:none\\\">CMC NSV KITS (functional and in good condition) available</span><span id=\\\"HllvX50cXC0-optioncombo\\\" style=\\\"display:none\\\">default</span></td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n<p>&nbsp;</p>\\n\\n</div>\\n\";","export const hashById = array => array.reduce((acc, curr) => {\n  acc[curr.id] = curr;\n  return acc;\n}, {});\nexport const hashArraysInObject = function (result) {\n  let hashFunction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : hashById;\n  return Object.keys(result).reduce((acc, currKey) => {\n    const prop = result[currKey];\n\n    if (Array.isArray(prop)) {\n      acc[currKey] = hashFunction(result[currKey]);\n    } else {\n      acc[currKey] = prop;\n    }\n\n    return acc;\n  }, {});\n};","import { useQuery } from 'react-query';\nimport { hashArraysInObject } from './utils.js';\nexport const useMetadata = () => {\n  const queryKey = ['metadata', {\n    params: {\n      // Note: on dataSet.dataSetElement, the categoryCombo property is\n      // included because it can mean it's overriding the data element's\n      // native categoryCombo. It can sometimes be absent from the data\n      // set element\n      'dataSets:fields': 'id,displayFormName,formType,dataSetElements[dataElement,categoryCombo],categoryCombo,sections~pluck',\n      'dataElements:fields': 'id,displayFormName,categoryCombo,valueType,optionSetValue,optionSet',\n      'optionSets:fields': 'id,options[id,name,sortOrder]',\n      'sections:fields': 'id,displayName,sortOrder,showRowTotals,showColumnTotals,disableDataElementAutoGroup,greyedFields[id],categoryCombos~pluck,dataElements~pluck,indicators~pluck',\n      'categoryCombos:fields': 'id,skipTotal,categories~pluck,categoryOptionCombos~pluck,isDefault',\n      'categories:fields': 'id,displayFormName,categoryOptions~pluck',\n      'categoryOptions:fields': 'id,displayFormName,categoryOptionCombos~pluck,categoryOptionGroups~pluck,isDefault',\n      'categoryOptionCombos:fields': 'id,categoryOptions~pluck,categoryCombo,name'\n    }\n  }];\n  return useQuery(queryKey, {\n    select: data => hashArraysInObject(data)\n  });\n};","import { createCachedSelector } from 're-reselect';\nimport { createSelector } from 'reselect'; // Helper to group array items by an identifier\n\nconst groupBy = (input, getIdentifier) => input.reduce((grouped, item) => {\n  var _grouped$identifier;\n\n  const identifier = getIdentifier(item);\n  grouped[identifier] = (_grouped$identifier = grouped[identifier]) !== null && _grouped$identifier !== void 0 ? _grouped$identifier : [];\n  grouped[identifier].push(item);\n  return grouped;\n}, {}); // Simple input selectors\n\n\nexport const getCategories = metadata => metadata.categories;\nexport const getCategoryCombos = metadata => metadata.categoryCombos;\nexport const getCategoryOptionCombos = metadata => metadata.categoryOptionCombos;\nexport const getCategoryOptions = metadata => metadata.categoryOptions;\nexport const getDataElements = metadata => metadata.dataElements;\nexport const getDataSets = metadata => metadata.dataSets;\nexport const getSections = metadata => metadata.sections;\nexport const getOptionSets = metadata => metadata.optionSets; // Select by id\n\nexport const getCategoryById = (metadata, id) => getCategories(metadata)[id];\nexport const getOptionSetById = (metadata, id) => getOptionSets(metadata)[id];\nexport const getSectionById = (metadata, id) => getSections(metadata)[id];\nexport const getDataSetById = (metadata, id) => {\n  var _getDataSets;\n\n  return (_getDataSets = getDataSets(metadata)) === null || _getDataSets === void 0 ? void 0 : _getDataSets[id];\n};\nexport const getCategoryComboById = (metadata, id) => getCategoryCombos(metadata)[id];\n/**\n * Memoized selectors\n * To clarify why some selectors are memoized and some aren't: only transformations\n * that are cpu intensive, or transformations that result in the selector returning\n * a new reference every time (.map for example) should be memoized.\n *\n * Selectors where a cache size of 1 is sufficient should be memoized with reselect,\n * selectors that should have a cache per parameter (say an id) should use re-reselect.\n */\n\n/**\n * @param {*} metadata\n * @param {*} categoryComboId\n */\n\nexport const getCategoriesByCategoryComboId = createCachedSelector(getCategoryComboById, getCategories, (categoryCombo, categories) => categoryCombo.categories.map(id => categories[id]))((_, categoryComboId) => categoryComboId);\n/**\n * @param {*} metadata\n * @param {*} categoryId\n */\n\nexport const getCategoryOptionsByCategoryId = createCachedSelector(getCategoryById, getCategoryOptions, (category, categoryOptions) => category.categoryOptions.map(id => categoryOptions[id]))((_, categoryId) => categoryId);\n/**\n * @param {*} metadata\n * @param {*} categoryComboId\n */\n\nexport const getCategoryOptionCombosByCategoryComboId = createCachedSelector(getCategoryComboById, getCategoryOptionCombos, (categoryCombo, categoryOptionCombos) => categoryCombo === null || categoryCombo === void 0 ? void 0 : categoryCombo.categoryOptionCombos.map(id => categoryOptionCombos[id]))((_, categoryComboId) => categoryComboId);\n/**\n * The categoryCombo for a dataElement can be overriden per dataSet. This selector\n * will apply that override.\n * @param {*} metadata\n * @param {*} dataSetId\n */\n\nexport const getDataElementsByDataSetId = createCachedSelector(getDataElements, getDataSetById, (dataElements, dataSet) => {\n  if (!(dataSet !== null && dataSet !== void 0 && dataSet.dataSetElements)) {\n    // To stay consistent with the way this selector behaved previously\n    return undefined;\n  }\n\n  return dataSet.dataSetElements.map(dse => {\n    var _dse$categoryCombo;\n\n    const de = dataElements[dse.dataElement.id];\n    const categoryCombo = (_dse$categoryCombo = dse.categoryCombo) !== null && _dse$categoryCombo !== void 0 ? _dse$categoryCombo : de.categoryCombo;\n    return { ...de,\n      categoryCombo\n    };\n  });\n})((_, dataSetId) => dataSetId);\n/**\n * This selector needs the dataSetId so it can use the getDataElementsByDataSetId selector,\n * which will apply the correct categoryCombo overrides.\n * @param {*} metadata\n * @param {*} dataSetId\n * @param {*} sectionId\n */\n\nexport const getDataElementsBySection = createCachedSelector((metadata, _, sectionId) => getSectionById(metadata, sectionId), getDataElementsByDataSetId, (section, dataElements) => section.dataElements.map(id => dataElements.find(de => de.id === id)))((_, dataSetId, sectionId) => \"\".concat(dataSetId, \":\").concat(sectionId));\n/**\n * Returns an array of objects with dataElements and their associated categoryCombos. They\n * are grouped by categoryComboId, every time the categoryComboId changes a new group is\n * created.\n * @param {*} metadata\n * @param {*} dataElements\n */\n\nexport const getGroupedDataElementsByCatComboInOrder = createSelector((_, dataElements) => dataElements, getCategoryCombos, (dataElements, categoryCombos) => {\n  const grouped = [];\n  dataElements.forEach((de, i) => {\n    const previousDe = dataElements[i - 1];\n    const lastGroup = grouped[grouped.length - 1];\n    const matchingId = (previousDe === null || previousDe === void 0 ? void 0 : previousDe.categoryCombo.id) === de.categoryCombo.id;\n\n    if (!lastGroup || !matchingId) {\n      grouped.push({\n        dataElements: [de],\n        categoryCombo: categoryCombos[de.categoryCombo.id]\n      });\n    } else {\n      lastGroup.dataElements.push(de);\n    }\n  });\n  return grouped;\n});\n/**\n * Returns an array of objects with dataElements and their associated categoryCombos. Unlike\n * getGroupedDataElementsByCatComboInOrder, this selector will group all dataElements with the\n * same categoryComboId together.\n * @param {*} metadata\n * @param {*} dataElements\n */\n\nexport const getGroupedDataElementsByCatCombo = createSelector((_, dataElements) => dataElements, getCategoryCombos, (dataElements, categoryCombos) => {\n  // Group dataElements by their categoryCombo id\n  const grouped = groupBy(dataElements, de => de.categoryCombo.id); // Map to an array and include the associated categoryCombo\n\n  return Object.entries(grouped).map(_ref => {\n    let [categoryComboId, dataElements] = _ref;\n    return {\n      dataElements,\n      categoryCombo: categoryCombos[categoryComboId]\n    };\n  });\n});\n/**\n * Tries to find the categoryOptionCombo with the given categoryOptions within a category\n * combination.\n * @param {*} metadata\n * @param {*} categoryComboId\n * @param {*} categoryOptionIds\n */\n\nexport const getCoCByCategoryOptions = createCachedSelector(getCategoryOptionCombosByCategoryComboId, (_, categoryComboId) => categoryComboId, (_, __, categoryOptionIds) => categoryOptionIds, (categoryOptionCombos, categoryComboId, categoryOptionIds) => {\n  const targetIds = categoryOptionIds;\n\n  for (const coc of categoryOptionCombos) {\n    const currentIds = coc.categoryOptions;\n    const sameLength = targetIds.length === currentIds.length;\n    const sameIds = targetIds.every(id => currentIds.includes(id));\n\n    if (sameLength && sameIds) {\n      return coc;\n    }\n  }\n\n  console.warn(\"Could not find categoryOptionCombo for catCombo \".concat(categoryComboId, \", with categoryOptions: \").concat(categoryOptionIds.join()));\n  return null;\n})((_, categoryComboId) => categoryComboId);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './data-entry-cell.module.css';\nexport const DataEntryCell = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: styles.dataEntryCell\n  }, children);\n};\nDataEntryCell.propTypes = {\n  children: PropTypes.node\n};","export const dataValueSets = {\n  byIds: _ref => {\n    let {\n      dataSetId,\n      periodId,\n      orgUnitId,\n      attributeOptionCombo\n    } = _ref;\n    return ['dataValueSets', {\n      params: {\n        dataSet: dataSetId,\n        period: periodId,\n        orgUnit: orgUnitId,\n        attributeOptionCombo\n      }\n    }];\n  }\n};","import { useMemo } from 'react';\nimport { useContextSelection } from '../context-selection/index.js';\nimport { useMetadata } from '../metadata/index.js';\nimport { getCoCByCategoryOptions, getDataSetById, getCategoryComboById } from '../metadata/selectors.js'; // TODO: this should probably be handled by useContextSelection-hook\n// should not need this when api support CC and CP instead of cocId\n\nexport const useAttributeOptionCombo = () => {\n  const {\n    isLoading,\n    isError,\n    data\n  } = useMetadata();\n  const [{\n    dataSetId,\n    attributeOptionComboSelection\n  }] = useContextSelection();\n  const cocId = useMemo(() => {\n    if (!isLoading && !isError && dataSetId) {\n      const dataSet = getDataSetById(data, dataSetId);\n      const categoryCombo = getCategoryComboById(data, dataSet.categoryCombo.id);\n\n      if (categoryCombo.isDefault) {\n        // if default catCombo, selected should be default coc as well\n        return categoryCombo.categoryOptionCombos[0];\n      }\n\n      const selectedOptions = Object.values(attributeOptionComboSelection);\n      const attributeOptionCombo = getCoCByCategoryOptions(data, dataSet.categoryCombo.id, selectedOptions);\n      return attributeOptionCombo === null || attributeOptionCombo === void 0 ? void 0 : attributeOptionCombo.id;\n    }\n\n    return null;\n  }, [dataSetId, attributeOptionComboSelection, data, isLoading, isError]);\n  return cocId;\n};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useQueryClient, useMutation } from 'react-query';\nimport { useContextSelection } from '../../context-selection/index.js';\nimport { dataValueSets } from '../query-key-factory.js';\nimport { useAttributeOptionCombo } from '../use-attribute-option-combo.js';\nconst DATA_VALUE_MUTATION = {\n  resource: 'dataValues',\n  type: 'create',\n  data: data => data\n};\nconst UPLOAD_FILE_MUTATION = {\n  resource: 'dataValues/file',\n  type: 'create',\n  data: data => data\n}; // This needs to be used for file-type data values; sending an empty 'value' prop\n// doesn't work to clear the file (todo: replace when backend changes)\n\nconst DELETE_VALUE_MUTATION = {\n  resource: 'dataValues',\n  type: 'delete',\n  params: params => params\n};\nexport const MUTATION_TYPES = {\n  DEFAULT: 'DEFAULT',\n  FILE_UPLOAD: 'FILE_UPLOAD',\n  DELETE: 'DELETE'\n};\nconst mutationsByType = {\n  DEFAULT: DATA_VALUE_MUTATION,\n  FILE_UPLOAD: UPLOAD_FILE_MUTATION,\n  DELETE: DELETE_VALUE_MUTATION\n}; // Updates dataValue without mutating previousDataValueSet\n\nconst updateDataValue = (previousDataValueSet, updatedDataValue, targetIndex) => {\n  const newDataValues = [...previousDataValueSet.dataValues];\n  newDataValues[targetIndex] = updatedDataValue;\n  return { ...previousDataValueSet,\n    dataValues: newDataValues\n  };\n}; // Adds dataValue without mutating previousDataValueSet\n\n\nconst addDataValue = (previousDataValueSet, newDataValue) => {\n  return { ...previousDataValueSet,\n    // dataValueSet.dataValues can be undefined\n    dataValues: previousDataValueSet.dataValues ? [...previousDataValueSet.dataValues, newDataValue] : [newDataValue]\n  };\n}; // Delete dataValue without mutating previousDataValueSet\n\n\nconst deleteDataValue = (previousDataValueSet, matchIndex) => {\n  const previousDataValues = previousDataValueSet.dataValues;\n  const newDataValues = [...previousDataValues.slice(0, matchIndex), ...previousDataValues.slice(matchIndex + 1)];\n  return { ...previousDataValueSet,\n    dataValues: newDataValues\n  };\n};\n\nexport const useDataValueMutation = function () {\n  let mutationType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : MUTATION_TYPES.DEFAULT;\n  const queryClient = useQueryClient();\n  const [{\n    dataSetId,\n    orgUnitId,\n    periodId\n  }] = useContextSelection();\n  const attributeOptionCombo = useAttributeOptionCombo();\n  const engine = useDataEngine(); // Use mutation appropriate to mutation type\n\n  const mutationFn = variables => engine.mutate(mutationsByType[mutationType], {\n    variables\n  });\n\n  const dataValueSetQueryKey = dataValueSets.byIds({\n    dataSetId,\n    periodId,\n    orgUnitId,\n    attributeOptionCombo\n  });\n  return useMutation(mutationFn, {\n    // Used to identify whether this mutation is running\n    mutationKey: dataValueSetQueryKey,\n    // Optimistic update of the react-query cache\n    onMutate: async newDataValue => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      await queryClient.cancelQueries(dataValueSetQueryKey); // Snapshot the previous value\n\n      const previousDataValueSet = queryClient.getQueryData(dataValueSetQueryKey); // Optimistically update to the new value\n\n      queryClient.setQueryData(dataValueSetQueryKey, () => {\n        var _newDataValue$file, _newDataValue$file2;\n\n        // dataValueSet.dataValues can be undefined\n        const previousDataValues = previousDataValueSet.dataValues || [];\n        const matchIndex = previousDataValues.findIndex(dataValue => dataValue.categoryOptionCombo === newDataValue.co && dataValue.dataElement === newDataValue.de && dataValue.orgUnit === newDataValue.ou && dataValue.period === newDataValue.pe);\n\n        if (mutationType === MUTATION_TYPES.DELETE) {\n          return deleteDataValue(previousDataValueSet, matchIndex);\n        }\n\n        const isNewDataValue = matchIndex === -1; // If this is a file-type data value, set value to some file metadata\n        // so it's available offline. When DVSets is refetched, the value will\n        // be replaced by a UID that will be handled in the FileResourceInput components\n\n        const newValue = mutationType === MUTATION_TYPES.FILE_UPLOAD ? {\n          name: (_newDataValue$file = newDataValue.file) === null || _newDataValue$file === void 0 ? void 0 : _newDataValue$file.name,\n          size: (_newDataValue$file2 = newDataValue.file) === null || _newDataValue$file2 === void 0 ? void 0 : _newDataValue$file2.size\n        } : newDataValue.value; // If the field was previously empty the dataValue won't exist yet\n\n        if (isNewDataValue) {\n          const formattedNewDataValue = {\n            attributeOptionCombo,\n            categoryOptionCombo: newDataValue.co,\n            dataElement: newDataValue.de,\n            orgUnit: newDataValue.ou,\n            period: newDataValue.pe,\n            value: newValue\n          };\n          return addDataValue(previousDataValueSet, formattedNewDataValue);\n        } else {\n          const formattedNewDataValue = { ...previousDataValues[matchIndex],\n            value: newValue\n          };\n          return updateDataValue(previousDataValueSet, formattedNewDataValue, matchIndex);\n        }\n      });\n      return {\n        previousDataValueSet,\n        dataValueSetQueryKey\n      };\n    },\n    // If the mutation fails, use the context returned from onMutate to roll back\n    onError: (err, newDataValue, context) => {\n      queryClient.setQueryData(context.dataValueSetQueryKey, context.previousDataValueSet);\n    },\n    retry: 1\n  });\n};","export const VALUE_TYPES = Object.freeze({\n  BOOLEAN: 'BOOLEAN',\n  DATE: 'DATE',\n  DATETIME: 'DATETIME',\n  EMAIL: 'EMAIL',\n  FILE_RESOURCE: 'FILE_RESOURCE',\n  IMAGE: 'IMAGE',\n  INTEGER: 'INTEGER',\n  INTEGER_NEGATIVE: 'INTEGER_NEGATIVE',\n  INTEGER_POSITIVE: 'INTEGER_POSITIVE',\n  INTEGER_ZERO_OR_POSITIVE: 'INTEGER_ZERO_OR_POSITIVE',\n  LETTER: 'LETTER',\n  LONG_TEXT: 'LONG_TEXT',\n  NUMBER: 'NUMBER',\n  PERCENTAGE: 'PERCENTAGE',\n  PHONE_NUMBER: 'PHONE_NUMBER',\n  TEXT: 'TEXT',\n  TIME: 'TIME',\n  TRUE_ONLY: 'TRUE_ONLY',\n  UNIT_INTERVAL: 'UNIT_INTERVAL',\n  URL: 'URL' // Value types not supported for aggregate data:\n  // ORGANISATION_UNIT\n  // TRACKER_ASSOCIATE\n  // COORDINATE\n  // USERNAME\n  // AGE\n\n});","import PropTypes from 'prop-types';\n/**\n * Adapt UI components to Final Form's callbacks\n */\n\nexport const convertCallbackSignatures = props => ({ ...props,\n  onChange: (_, e) => props.onChange(e),\n  onFocus: (_, e) => props.onFocus(e),\n  onBlur: (_, e) => props.onBlur(e)\n});\nexport const InputPropTypes = {\n  dataValueParams: PropTypes.objectOf(PropTypes.string),\n  lastSyncedValue: PropTypes.any,\n  setSyncStatus: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { integer, createMinNumber, composeValidators, createMaxNumber, createNumberRange, createMaxCharacterLength } from '@dhis2/ui-forms';\nexport const text = createMaxCharacterLength(50000);\nexport const letter = createMaxCharacterLength(1); // todo: revisit date & datetime validation for fallbacks\n// decision: defer date & time validation for now, trust inputs for correct format\n// if a browser doesn't support the input type, it falls back to a `text` input\n// input types `date` and `time` started being supported by FF in '16 and Safari in '21\n// input type `datetime-local` started being supported by FF and Safari in '21\n// `datetime` is an uncommon value type, and Safari is probably not a common browser for DHIS2 users\n// Years of any length > 0 accepted to avoid y10k problem\n// YYYY(+)-MM-DD; doesn't check days against number in month, but BACKEND DOES\n\nconst dateRegex = /^[0-9]+-(0[1-9]|1[1-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/; // HH:MM\n\nconst timeRegex = /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;\nexport const date = value => {\n  return dateRegex.test(value) ? undefined : 'Please provide a valid date in the format YYYY-MM-DD';\n};\nexport const dateTime = value => {\n  if (!value || value.length === 0) {\n    return undefined;\n  }\n\n  const [date, time] = value.split(' ');\n  return dateRegex.test(date) && timeRegex.test(time) ? undefined : i18n.t('Please provide a valid date and time in the format YYYY-MM-DD HH{{c}}MM', {\n    c: ':'\n  });\n};\nexport const time = value => !value || timeRegex.test(value) ? undefined : i18n.t('Please provide a valid time in the format HH{{c}}MM', {\n  c: ':'\n});\nexport const integerPositive = composeValidators(integer, createMinNumber(1));\nexport const integerZeroOrPositive = composeValidators(integer, createMinNumber(0));\nexport const integerNegative = composeValidators(integer, createMaxNumber(-1));\nexport const percentage = createNumberRange(0, 100);\nexport const unitInterval = createNumberRange(0, 1);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { email, integer, internationalPhoneNumber, number, url } from '@dhis2/ui-forms';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport { useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport { VALUE_TYPES } from '../data-entry-cell/value-types.js';\nimport styles from './inputs.module.css';\nimport { InputPropTypes } from './utils.js';\nimport { // date,\n// dateTime,\nintegerPositive, integerZeroOrPositive, integerNegative, letter, percentage, time, text, unitInterval } from './validators.js';\nconst validatorsByValueType = {\n  [VALUE_TYPES.DATE]: null,\n  // todo (in case browser doesn't support special input)\n  [VALUE_TYPES.DATETIME]: null,\n  // todo \" \"\n  [VALUE_TYPES.EMAIL]: email,\n  [VALUE_TYPES.INTEGER]: integer,\n  [VALUE_TYPES.INTEGER_POSITIVE]: integerPositive,\n  [VALUE_TYPES.INTEGER_NEGATIVE]: integerNegative,\n  [VALUE_TYPES.INTEGER_ZERO_OR_POSITIVE]: integerZeroOrPositive,\n  [VALUE_TYPES.LETTER]: letter,\n  [VALUE_TYPES.NUMBER]: number,\n  [VALUE_TYPES.PERCENTAGE]: percentage,\n  [VALUE_TYPES.PHONE_NUMBER]: internationalPhoneNumber,\n  [VALUE_TYPES.TEXT]: text,\n  [VALUE_TYPES.TIME]: time,\n  [VALUE_TYPES.UNIT_INTERVAL]: unitInterval,\n  [VALUE_TYPES.URL]: url\n};\nconst htmlTypeAttrsByValueType = {\n  [VALUE_TYPES.DATE]: 'date',\n  [VALUE_TYPES.DATETIME]: 'datetime-local',\n  [VALUE_TYPES.EMAIL]: 'email',\n  [VALUE_TYPES.PHONE_NUMBER]: 'tel',\n  [VALUE_TYPES.TIME]: 'time',\n  [VALUE_TYPES.URL]: 'url'\n};\nexport const GenericInput = _ref => {\n  let {\n    fieldname,\n    dataValueParams,\n    setSyncStatus,\n    valueType\n  } = _ref;\n  const {\n    input,\n    meta\n  } = useField(fieldname, {\n    validate: validatorsByValueType[valueType],\n    subscription: {\n      value: true,\n      dirty: true,\n      valid: true\n    }\n  });\n  const [lastSyncedValue, setLastSyncedValue] = useState();\n  const {\n    mutate\n  } = useDataValueMutation();\n\n  const syncData = value => {\n    // todo: Here's where an error state could be set: ('onError')\n    mutate( // Empty values need an empty string\n    { ...dataValueParams,\n      value: value || ''\n    }, {\n      onSuccess: () => {\n        setLastSyncedValue(value);\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  };\n\n  const handleBlur = () => {\n    const {\n      value\n    } = input;\n    const {\n      dirty,\n      valid\n    } = meta;\n\n    if (dirty && valid && value !== lastSyncedValue) {\n      syncData(value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"input\", _extends({}, input, {\n    className: styles.basicInput,\n    type: htmlTypeAttrsByValueType[valueType],\n    onBlur: e => {\n      handleBlur();\n      input.onBlur(e);\n    }\n  }));\n};\nGenericInput.propTypes = { ...InputPropTypes,\n  inputType: PropTypes.string\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Radio } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React, { useState } from 'react';\nimport { useField, useForm } from 'react-final-form';\nimport { useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport styles from './inputs.module.css';\nimport { convertCallbackSignatures, InputPropTypes } from './utils.js'; // ? Will this fail to reflect a value on the server if it's not exactly `true` or `false`?\n// todo: may need to handle that when mapping server values to form initial values, e.g.\n// Currently it's working okay\n// boolean: accepts 1, 0, 'true', 'false'\n// Ex: if (dv.valueType === boolean) { formValue = dv.value ... etc }\n// does `isEqual` prop help make 1/true and 0/false/'' equal?\n\nexport const BooleanRadios = _ref => {\n  let {\n    fieldname,\n    dataValueParams,\n    setSyncStatus\n  } = _ref;\n  const yesField = useField(fieldname, {\n    type: 'radio',\n    value: 'true',\n    subscription: {\n      value: true\n    }\n  });\n  const noField = useField(fieldname, {\n    type: 'radio',\n    value: 'false',\n    subscription: {\n      value: true\n    }\n  }); // Used for the 'clear' button, but works\n\n  const clearField = useField(fieldname, {\n    type: 'radio',\n    value: '',\n    subscription: {\n      value: true\n    }\n  });\n  const form = useForm();\n  const [lastSyncedValue, setLastSyncedValue] = useState();\n  const {\n    mutate\n  } = useDataValueMutation();\n\n  const syncData = value => {\n    // todo: Here's where an error state could be set: ('onError')\n    mutate( // Empty values need an empty string\n    { ...dataValueParams,\n      value: value || ''\n    }, {\n      onSuccess: () => {\n        setLastSyncedValue(value);\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  };\n\n  const fieldState = form.getFieldState(fieldname);\n  const clearButtonProps = convertCallbackSignatures(clearField.input);\n  delete clearButtonProps.type;\n\n  const handleBlur = () => {\n    const {\n      dirty,\n      valid\n    } = fieldState;\n    const value = fieldState.value || ''; // If this value has changed, sync it to server if valid\n\n    if (dirty && valid && value !== lastSyncedValue) {\n      syncData(value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.radioFlexWrapper\n  }, /*#__PURE__*/React.createElement(Radio, _extends({\n    dense: true,\n    label: i18n.t('Yes'),\n    value: 'true'\n  }, convertCallbackSignatures(yesField.input), {\n    onBlur: (_, e) => {\n      handleBlur();\n      yesField.input.onBlur(e);\n    }\n  })), /*#__PURE__*/React.createElement(Radio, _extends({\n    dense: true,\n    label: i18n.t('No'),\n    value: 'false'\n  }, convertCallbackSignatures(noField.input), {\n    onBlur: (_, e) => {\n      handleBlur();\n      noField.input.onBlur(e);\n    }\n  })), /*#__PURE__*/React.createElement(Button, _extends({\n    small: true,\n    secondary: true,\n    className: cx(styles.whiteButton, {\n      // If no value to clear, hide but still reserve space\n      [styles.hidden]: !(fieldState !== null && fieldState !== void 0 && fieldState.value)\n    }) // Callback signatures are transformed above\n\n  }, clearButtonProps, {\n    // On click, set field value to '', sync, and blur\n    onClick: () => {\n      clearField.input.onChange('');\n      syncData('');\n      clearField.input.onBlur();\n    },\n    onBlur: () => {\n      handleBlur(); // Probably handled by onClick, but included here for safety\n\n      clearField.input.onBlur();\n    }\n  }), i18n.t('Clear')));\n};\nBooleanRadios.propTypes = InputPropTypes;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { colors, Button, FileInput, IconAttachment16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useField } from 'react-final-form';\nimport { useQuery } from 'react-query';\nimport { MUTATION_TYPES, useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport styles from './inputs.module.css';\n\nconst formatFileSize = size => {\n  return \"\".concat((size / 1024).toFixed(2), \" KB\");\n};\n\nexport const FileResourceInput = _ref => {\n  let {\n    fieldname,\n    image,\n    dataValueParams,\n    setSyncStatus\n  } = _ref;\n  const {\n    input,\n    meta\n  } = useField(fieldname, {\n    // todo: validate\n    subscription: {\n      value: true,\n      pristine: true,\n      onFocus: true,\n      onBlur: true,\n      onChange: true\n    }\n  }); // When the app loads, if there's a file saved for this data value,\n  // the value of this input will be UID of a file resource as populated\n  // by the `dataValueSets` response. If that's the case, fetch some metadata\n  // about the file to show in the entry form:\n\n  const {\n    data\n  } = useQuery( // This endpoint doesn't support field filtering\n  ['fileResources', {\n    id: input.value\n  }], {\n    enabled: !!input.value && meta.pristine && typeof input.value === 'string'\n  });\n  const {\n    mutate: uploadFile\n  } = useDataValueMutation(MUTATION_TYPES.FILE_UPLOAD);\n  const {\n    mutate: deleteFile\n  } = useDataValueMutation(MUTATION_TYPES.DELETE);\n\n  const handleChange = _ref2 => {\n    let {\n      files\n    } = _ref2;\n    const newFile = files[0];\n    input.onChange({\n      name: newFile.name,\n      size: newFile.size\n    });\n    input.onBlur();\n\n    if (newFile instanceof File) {\n      setSyncStatus({\n        syncing: true,\n        synced: false\n      });\n      uploadFile({\n        file: newFile,\n        ...dataValueParams\n      }, {\n        onSuccess: () => {\n          setSyncStatus({\n            syncing: false,\n            synced: true\n          });\n        }\n      });\n    }\n  };\n\n  const handleDelete = () => {\n    input.onChange('');\n    input.onBlur();\n    setSyncStatus({\n      syncing: true,\n      synced: false\n    });\n    deleteFile(dataValueParams, {\n      onSuccess: () => {\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  };\n\n  const inputValueHasFileMeta = !!input.value.name && !!input.value.size;\n  const file = inputValueHasFileMeta ? input.value : data && input.value // i.e. if value is a resource UID\n  ? {\n    name: data.name,\n    size: data.contentLength\n  } : null; // styles:\n  // todo: make file input button `secondary` style to match design spec\n  // todo: make file summary a clickable link to view the file (focusable)\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.fileInputWrapper\n  }, file ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconAttachment16, {\n    color: colors.grey700\n  }), \"\".concat(file.name, \" (\").concat(formatFileSize(file.size), \")\"), /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    className: styles.deleteFileButton,\n    onClick: handleDelete,\n    onFocus: input.onFocus,\n    onBlur: input.onBlur\n  }, i18n.t('Delete'))) : /*#__PURE__*/React.createElement(FileInput, {\n    className: styles.fileInput,\n    name: input.name,\n    onChange: handleChange,\n    onFocus: input.onFocus,\n    onBlur: input.onBlur,\n    small: true,\n    buttonLabel: image ? i18n.t('Upload an image') : i18n.t('Upload a file')\n  }));\n};\nFileResourceInput.propTypes = {\n  dataValueParams: PropTypes.objectOf(PropTypes.string),\n  fieldname: PropTypes.string,\n  image: PropTypes.bool,\n  setSyncStatus: PropTypes.func\n};\nexport const ImageInput = props => {\n  return /*#__PURE__*/React.createElement(FileResourceInput, _extends({}, props, {\n    image: true\n  }));\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport { useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport styles from './inputs.module.css';\nimport { InputPropTypes } from './utils.js';\nexport const LongText = _ref => {\n  let {\n    fieldname,\n    dataValueParams,\n    setSyncStatus\n  } = _ref;\n  const {\n    input,\n    meta\n  } = useField(fieldname, {\n    subscription: {\n      value: true,\n      dirty: true,\n      valid: true\n    }\n  });\n  const [lastSyncedValue, setLastSyncedValue] = useState();\n  const {\n    mutate\n  } = useDataValueMutation();\n\n  const syncData = value => {\n    // todo: Here's where an error state could be set: ('onError')\n    mutate( // Empty values need an empty string\n    { ...dataValueParams,\n      value: value || ''\n    }, {\n      onSuccess: () => {\n        setLastSyncedValue(value);\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  };\n\n  const handleBlur = () => {\n    const {\n      value\n    } = input;\n    const {\n      dirty,\n      valid\n    } = meta;\n\n    if (dirty && valid && value !== lastSyncedValue) {\n      syncData(value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"textarea\", _extends({\n    className: styles.longText,\n    rows: \"4\"\n  }, input, {\n    onBlur: e => {\n      handleBlur();\n      input.onBlur(e);\n    }\n  }));\n};\nLongText.propTypes = InputPropTypes;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport { useMetadata } from '../../metadata/index.js';\nimport { getOptionSetById } from '../../metadata/selectors.js';\nimport { useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport styles from './inputs.module.css';\nimport { InputPropTypes } from './utils.js';\nexport const OptionSet = _ref => {\n  let {\n    fieldname,\n    optionSetId,\n    dataValueParams,\n    setSyncStatus\n  } = _ref;\n  const {\n    input\n  } = useField(fieldname, {\n    subscription: {\n      value: true\n    }\n  });\n  const {\n    data: metadata\n  } = useMetadata();\n  const [lastSyncedValue, setLastSyncedValue] = useState();\n  const {\n    mutate\n  } = useDataValueMutation();\n\n  const syncData = value => {\n    // todo: Here's where an error state could be set: ('onError')\n    mutate( // Empty values need an empty string\n    { ...dataValueParams,\n      value: value || ''\n    }, {\n      onSuccess: () => {\n        setLastSyncedValue(value);\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  };\n\n  const handleChange = value => {\n    // For a select using onChange, don't need to check valid or dirty, respectively\n    if (value !== lastSyncedValue) {\n      syncData(value);\n    }\n  };\n\n  const optionSet = getOptionSetById(metadata, optionSetId); // filter out 'null' options\n\n  const options = optionSet.options.filter(opt => !!opt); // todo: onBlur handler doesn't work, meaning the cell stays active.\n  // may need to build from scratch\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectFlexWrapper\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectFlexItem\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    className: styles.select,\n    name: input.name,\n    placeholder: i18n.t('Choose an option'),\n    selected: input.value || '',\n    onChange: _ref2 => {\n      let {\n        selected\n      } = _ref2;\n      input.onChange(selected);\n      handleChange(selected);\n    },\n    onFocus: () => {\n      // onBlur here helps buggy onFocus work correctly\n      input.onBlur();\n      input.onFocus();\n    },\n    onBlur: () => input.onBlur()\n  }, options.map(_ref3 => {\n    let {\n      name\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: name,\n      label: name,\n      value: name\n    });\n  }))), input.value && /*#__PURE__*/React.createElement(Button, _extends({\n    small: true,\n    secondary: true,\n    className: styles.whiteButton\n  }, input, {\n    onClick: () => {\n      input.onChange('');\n      handleChange('');\n      input.onBlur();\n    }\n  }), i18n.t('Clear')));\n};\nOptionSet.propTypes = { ...InputPropTypes,\n  optionSetId: PropTypes.string\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { Checkbox } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport { useDataValueMutation } from '../data-entry-cell/use-data-value-mutation.js';\nimport styles from './inputs.module.css';\nimport { convertCallbackSignatures, InputPropTypes } from './utils.js';\nexport const TrueOnlyCheckbox = _ref => {\n  let {\n    fieldname,\n    dataValueParams,\n    setSyncStatus\n  } = _ref;\n  const {\n    input,\n    meta\n  } = useField(fieldname, {\n    type: 'checkbox',\n    subscription: {\n      value: true,\n      dirty: true,\n      valid: true\n    }\n  });\n  const [lastSyncedValue, setLastSyncedValue] = useState();\n  const {\n    mutate\n  } = useDataValueMutation();\n\n  const syncData = value => {\n    // todo: Here's where an error state could be set: ('onError')\n    mutate( // Empty values need an empty string\n    { ...dataValueParams,\n      value: value || ''\n    }, {\n      onSuccess: () => {\n        setLastSyncedValue(value);\n        setSyncStatus({\n          syncing: false,\n          synced: true\n        });\n      }\n    });\n  }; // todo: checking then unchecking the box will send a single unnecessary POST\n\n\n  const handleBlur = () => {\n    // For 'True only', can only send 'true' (or '1') or ''\n    const value = input.checked ? 'true' : '';\n    const {\n      dirty,\n      valid\n    } = meta;\n\n    if (dirty && valid && value !== lastSyncedValue) {\n      syncData(value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.checkboxWrapper\n  }, /*#__PURE__*/React.createElement(Checkbox, _extends({\n    dense: true\n  }, convertCallbackSignatures(input), {\n    onBlur: e => {\n      handleBlur();\n      input.onBlur(e);\n    }\n  })));\n};\nTrueOnlyCheckbox.propTypes = InputPropTypes;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { GenericInput, BooleanRadios, FileResourceInput, LongText, OptionSet, TrueOnlyCheckbox } from '../inputs/index.js';\nimport { useDataValueParams } from './use-data-value-params.js';\nimport { VALUE_TYPES } from './value-types.js';\nexport function EntryFieldInput(_ref) {\n  let {\n    fieldname,\n    dataElement: de,\n    setSyncStatus\n  } = _ref;\n  const [deId, cocId] = fieldname.split('.');\n  const dataValueParams = useDataValueParams({\n    deId,\n    cocId\n  });\n  const sharedProps = {\n    fieldname,\n    dataValueParams,\n    setSyncStatus\n  }; // If this is an option set, return OptionSet component\n\n  if (de.optionSetValue) {\n    return /*#__PURE__*/React.createElement(OptionSet, _extends({}, sharedProps, {\n      optionSetId: de.optionSet.id\n    }));\n  } // Otherwise, check for the valueType\n\n\n  switch (de.valueType) {\n    case VALUE_TYPES.BOOLEAN:\n      {\n        return /*#__PURE__*/React.createElement(BooleanRadios, sharedProps);\n      }\n\n    case VALUE_TYPES.FILE_RESOURCE:\n      {\n        return /*#__PURE__*/React.createElement(FileResourceInput, sharedProps);\n      }\n\n    case VALUE_TYPES.IMAGE:\n      {\n        return /*#__PURE__*/React.createElement(FileResourceInput, _extends({}, sharedProps, {\n          image: true\n        }));\n      }\n\n    case VALUE_TYPES.LONG_TEXT:\n      {\n        return /*#__PURE__*/React.createElement(LongText, sharedProps);\n      }\n\n    case VALUE_TYPES.TRUE_ONLY:\n      {\n        return /*#__PURE__*/React.createElement(TrueOnlyCheckbox, sharedProps);\n      }\n\n    default:\n      {\n        return /*#__PURE__*/React.createElement(GenericInput, _extends({}, sharedProps, {\n          valueType: de.valueType\n        }));\n      }\n  }\n}\nEntryFieldInput.propTypes = {\n  dataElement: PropTypes.shape({\n    id: PropTypes.string,\n    optionSet: PropTypes.shape({\n      id: PropTypes.string\n    }),\n    optionSetValue: PropTypes.bool,\n    valueType: PropTypes.string\n  }),\n  fieldname: PropTypes.string,\n  setSyncStatus: PropTypes.func\n};","import { useContextSelection } from '../../context-selection/index.js';\nimport { useMetadata } from '../../metadata/index.js';\nimport { getCategoryComboById, getDataSetById } from '../../metadata/selectors.js';\nexport const useDataValueParams = _ref => {\n  let {\n    deId,\n    cocId\n  } = _ref;\n  const [dataEntryContext] = useContextSelection();\n  const metadataFetch = useMetadata();\n\n  if (metadataFetch.isLoading || metadataFetch.isError) {\n    return null;\n  }\n\n  const {\n    dataSetId,\n    orgUnitId,\n    periodId,\n    attributeOptionComboSelection\n  } = dataEntryContext;\n  const attributeComboId = getDataSetById(metadataFetch.data, dataSetId).categoryCombo.id;\n  const isDefaultAttributeCombo = getCategoryComboById(metadataFetch.data, attributeComboId).isDefault;\n  const dataValueParams = {\n    de: deId,\n    co: cocId,\n    ds: dataSetId,\n    ou: orgUnitId,\n    pe: periodId\n  }; // Add attribute params to mutation if relevant\n\n  if (!isDefaultAttributeCombo) {\n    // Get a ';'-separated listed of attribute options\n    const attributeOptionIdList = Object.values(attributeOptionComboSelection).join(';');\n    dataValueParams.cc = attributeComboId;\n    dataValueParams.cp = attributeOptionIdList;\n  }\n\n  return dataValueParams;\n};","import { IconMore16, colors } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useField } from 'react-final-form';\nimport { useIsMutating } from 'react-query';\nimport styles from './data-entry-cell.module.css';\n/** Three dots or triangle in top-right corner of cell */\n\nconst SyncStatusIndicator = _ref => {\n  let {\n    isLoading,\n    isSynced\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.topRightIndicator\n  }, isLoading ? /*#__PURE__*/React.createElement(IconMore16, {\n    color: colors.grey700\n  }) : isSynced ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.topRightTriangle\n  }) : null);\n};\n\nSyncStatusIndicator.propTypes = {\n  isLoading: PropTypes.bool,\n  isSynced: PropTypes.bool\n};\n/** Grey triangle in bottom left of cell */\n\nconst CommentIndicator = _ref2 => {\n  let {\n    isComment\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomLeftIndicator\n  }, isComment && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomLeftTriangle\n  }));\n};\n\nCommentIndicator.propTypes = {\n  isComment: PropTypes.bool\n};\n/**\n * This inner wrapper provides styles and layout for the entry field based on\n * its various states\n */\n\nexport function InnerWrapper(_ref3) {\n  let {\n    children,\n    fieldname,\n    syncStatus\n  } = _ref3;\n  const [deId, cocId] = fieldname.split('.');\n  const {\n    meta: {\n      active,\n      invalid\n    }\n  } = useField(fieldname, {\n    subscription: {\n      active: true,\n      invalid: true\n    }\n  }); // Detect if this field is sending data\n  // (is this performant?)\n\n  const activeMutations = useIsMutating({\n    predicate: mutation => {\n      const {\n        de,\n        co\n      } = mutation.options.variables;\n      return deId === de && cocId === co;\n    }\n  });\n\n  const handleKeyDown = event => {\n    // field navigation is handled by KeyboardNavManager\n    const {\n      key,\n      shiftKey\n    } = event;\n\n    if (key === 'Enter' && shiftKey) {// todo: open data item details\n    }\n  };\n\n  const cellStateClassName = invalid ? styles.invalid : activeMutations === 0 && syncStatus.synced ? styles.synced : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.cellInnerWrapper, cellStateClassName, {\n      [styles.active]: active,\n      [styles.disabled]: false // todo\n\n    }),\n    onKeyDown: handleKeyDown\n  }, children, /*#__PURE__*/React.createElement(SyncStatusIndicator, {\n    isLoading: activeMutations > 0,\n    isSynced: syncStatus.synced\n  }), /*#__PURE__*/React.createElement(CommentIndicator, {\n    isComment: false\n  }));\n}\nInnerWrapper.propTypes = {\n  children: PropTypes.node,\n  fieldname: PropTypes.string,\n  syncStatus: PropTypes.shape({\n    synced: PropTypes.bool,\n    syncing: PropTypes.bool\n  })\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useField } from 'react-final-form';\nimport styles from './data-entry-cell.module.css';\n/**\n * These components adapt the UI Tooltip component to be used for the\n * validation feedback tooltip in DE cells, which has a few needs:\n * 1. Should only open when the cell state is invalid\n * 2. Should gracefully close when the cell becomes valid again\n * 3. Should not cause cell to lose focus when it becomes invalid\n * 4. Should open when focused and close when defocused\n */\n\nconst TooltipManager = /*#__PURE__*/React.forwardRef(function TooltipManager(_ref, ref) {\n  let {\n    active,\n    children,\n    invalid,\n    onMouseOut: close,\n    onMouseOver: open\n  } = _ref;\n  React.useEffect(() => {\n    if (invalid && active) {\n      open();\n    } // When this cell becomes valid or defocused, close the tooltip\n    else {\n      close();\n    }\n  }, [invalid, active]); // Only open the tooltip if the cell is invalid\n\n  const handleMouseOver = () => {\n    if (invalid) {\n      open();\n    }\n  }; // Close on mouseout if invalid cell is not active\n\n\n  const handleMouseOut = () => {\n    if (invalid && !active) {\n      close();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.validationTooltip,\n    ref: ref,\n    onMouseOver: handleMouseOver,\n    onMouseOut: handleMouseOut\n  }, children);\n});\nTooltipManager.propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.node,\n  invalid: PropTypes.bool,\n  onMouseOut: PropTypes.func,\n  onMouseOver: PropTypes.func\n};\nexport const ValidationTooltip = _ref2 => {\n  let {\n    children,\n    fieldname\n  } = _ref2;\n  const {\n    meta: {\n      invalid,\n      error,\n      active\n    }\n  } = useField(fieldname, {\n    subscription: {\n      invalid: true,\n      error: true,\n      active: true\n    }\n  });\n  const [content, setContent] = React.useState(error); // Keep tooltip content even when `error` is undefined so tooltip still has\n  // content when closing after cell becomes valid again\n\n  React.useEffect(() => {\n    if (error) {\n      setContent(error);\n    }\n  }, [error]);\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: content\n  }, props => /*#__PURE__*/React.createElement(TooltipManager, _extends({}, props, {\n    invalid: invalid,\n    active: active\n  }), children));\n};\nValidationTooltip.propTypes = {\n  children: PropTypes.node,\n  fieldname: PropTypes.string\n};","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { EntryFieldInput } from './entry-field-input.js';\nimport { InnerWrapper } from './inner-wrapper.js';\nimport { ValidationTooltip } from './validation-tooltip.js';\nexport const DataEntryField = /*#__PURE__*/React.memo(function DataEntryField(_ref) {\n  let {\n    dataElement: de,\n    categoryOptionCombo: coc\n  } = _ref;\n  // This field name results in this structure for the form data object:\n  // { [deId]: { [cocId]: value } }\n  const fieldname = \"\".concat(de.id, \".\").concat(coc.id);\n  const [syncStatus, setSyncStatus] = useState({\n    syncing: false,\n    synced: false\n  }); // todo: get data details (via getDataValue?)\n  // todo: implement read-only cells\n\n  return /*#__PURE__*/React.createElement(ValidationTooltip, {\n    fieldname: fieldname\n  }, /*#__PURE__*/React.createElement(InnerWrapper, {\n    fieldname: fieldname,\n    syncStatus: syncStatus\n  }, /*#__PURE__*/React.createElement(EntryFieldInput, {\n    fieldname: fieldname,\n    dataElement: de,\n    setSyncStatus: setSyncStatus\n  })));\n});\nDataEntryField.propTypes = {\n  categoryOptionCombo: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }).isRequired,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    valueType: PropTypes.string\n  }).isRequired\n};","import i18n from '@dhis2/d2-i18n';\nimport { TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useMetadata } from '../metadata/index.js';\nimport { getCategoriesByCategoryComboId, getCategoryOptionsByCategoryId, getCoCByCategoryOptions } from '../metadata/selectors.js';\nimport { cartesian } from '../shared/utils.js';\nimport styles from './category-combo-table.module.css';\nimport { DataEntryCell, DataEntryField, useActiveCell } from './data-entry-cell/index.js';\nexport const CategoryComboTable = _ref => {\n  let {\n    categoryCombo,\n    dataElements,\n    filterText,\n    globalFilterText,\n    maxColumnsInSection\n  } = _ref;\n  const {\n    isLoading,\n    isError,\n    data\n  } = useMetadata();\n  const {\n    deId: activeDeId,\n    cocId: activeCocId\n  } = useActiveCell();\n\n  if (isLoading || isError) {\n    return null;\n  }\n\n  const categories = getCategoriesByCategoryComboId(data, categoryCombo.id); // each element is a combination of category-options for a particular column\n  // this results in lists of category-options in the same order as headers are rendered\n  // the result is a client side computation of categoryOption-combinations\n\n  const optionsIdLists = categories.map(cat => cat.categoryOptions);\n  const computedCategoryOptions = cartesian(optionsIdLists);\n\n  if (computedCategoryOptions.length !== categoryCombo.categoryOptionCombos.length) {\n    console.warn(\"Computed combination of categoryOptions for catCombo(\".concat(categoryCombo.id, \") is different from server. \\n            Please regenerate categoryOptionCombos. \\n            Computed: \").concat(computedCategoryOptions.length, \"\\n            Server: \").concat(categoryCombo.categoryOptionCombos.length, \")\"));\n  } // Computes the span and repeats for each columns in a category-row.\n  // Repeats are the number of times the options in a category needs to be rendered per category-row\n\n\n  let catColSpan = computedCategoryOptions.length;\n  const rowToColumnsMap = categories.map(c => {\n    const categoryOptions = getCategoryOptionsByCategoryId(data, c.id);\n    const nrOfOptions = c.categoryOptions.length;\n\n    if (nrOfOptions > 0 && catColSpan >= nrOfOptions) {\n      catColSpan = catColSpan / nrOfOptions;\n      const repeat = computedCategoryOptions.length / (catColSpan * nrOfOptions);\n      const columnsToRender = new Array(repeat).fill(0).flatMap(() => categoryOptions);\n      return {\n        span: catColSpan,\n        columns: columnsToRender,\n        category: c\n      };\n    } else {\n      console.warn(\"Category \".concat(c.displayFormName, \" malformed. Number of options: \").concat(nrOfOptions, \", span: \").concat(catColSpan));\n    }\n\n    return c;\n  }); // find categoryOptionCombos by category-options\n\n  const sortedCOCs = computedCategoryOptions.map(options => getCoCByCategoryOptions(data, categoryCombo.id, options)).filter(coc => !!coc);\n  const renderPaddedCells = maxColumnsInSection > 0 ? new Array(maxColumnsInSection - sortedCOCs.length).fill(0) : [];\n  const filteredDataElements = dataElements.filter(de => {\n    const name = de.displayFormName.toLowerCase();\n    return (!filterText || name.includes(filterText.toLowerCase())) && (!globalFilterText || name.includes(globalFilterText.toLowerCase()));\n  });\n  const itemsHiddenCnt = dataElements.length - filteredDataElements.length; // Is the active cell in this cat-combo table? Check to see if active\n  // data element is in this CCT\n\n  const isThisTableActive = dataElements.some(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    return id === activeDeId;\n  }); // Find if this column header includes the active cell's column\n\n  const isHeaderActive = (headerIdx, headerColSpan) => {\n    const activeCellColIdx = sortedCOCs.findIndex(coc => activeCocId === coc.id);\n    const idxDiff = activeCellColIdx - headerIdx * headerColSpan;\n    return isThisTableActive && idxDiff < headerColSpan && idxDiff >= 0;\n  };\n\n  return /*#__PURE__*/React.createElement(TableBody, null, rowToColumnsMap.map(colInfo => {\n    const {\n      span,\n      columns\n    } = colInfo;\n    return /*#__PURE__*/React.createElement(TableRowHead, {\n      key: colInfo.category.id\n    }, /*#__PURE__*/React.createElement(TableCellHead, {\n      className: styles.categoryNameHeader,\n      colSpan: '1'\n    }, colInfo.category.displayFormName === 'default' ? '' : colInfo.category.displayFormName), columns.map((co, i) => {\n      return /*#__PURE__*/React.createElement(TableCellHead, {\n        key: i,\n        className: cx(styles.tableHeader, {\n          [styles.active]: isHeaderActive(i, span)\n        }),\n        colSpan: span.toString()\n      }, co.isDefault ? 'Value' : co.displayFormName);\n    }), renderPaddedCells.map((_, i) => /*#__PURE__*/React.createElement(PaddingCell, {\n      key: i\n    })));\n  }), filteredDataElements.map(de => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: de.id\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: cx(styles.dataElementName, {\n        [styles.active]: de.id === activeDeId\n      })\n    }, de.displayFormName), sortedCOCs.map(coc => /*#__PURE__*/React.createElement(DataEntryCell, {\n      key: coc.id\n    }, /*#__PURE__*/React.createElement(DataEntryField, {\n      dataElement: de,\n      categoryOptionCombo: coc\n    }))), renderPaddedCells.map((_, i) => /*#__PURE__*/React.createElement(PaddingCell, {\n      key: i,\n      className: styles.tableCell\n    })));\n  }), itemsHiddenCnt > 0 && /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableCell, {\n    className: styles.hiddenByFilterCell,\n    colSpan: \"100%\"\n  }, itemsHiddenCnt === 1 ? i18n.t('1 item hidden by filter') : i18n.t('{{count}} items hidden by filter', {\n    count: itemsHiddenCnt\n  }))));\n};\nCategoryComboTable.propTypes = {\n  categoryCombo: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    categoryOptionCombos: PropTypes.array\n  }).isRequired,\n  dataElements: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    categoryCombo: PropTypes.shape({\n      id: PropTypes.string\n    }),\n    displayFormName: PropTypes.string,\n    valueType: PropTypes.string\n  })),\n  filterText: PropTypes.string,\n  globalFilterText: PropTypes.string,\n  maxColumnsInSection: PropTypes.number\n};\n\nconst PaddingCell = () => /*#__PURE__*/React.createElement(TableCell, {\n  className: styles.paddingCell\n});","import { useFormState } from 'react-final-form';\nexport const useActiveCell = () => {\n  const {\n    active\n  } = useFormState({\n    subscription: {\n      active: true\n    }\n  });\n  const [deId, cocId] = active ? active.split('.') : [null, null]; // Optional category option IDs (requires useMetadata hook):\n  // const coIds = active\n  //     ? getCategoryOptionComboById(metadata, cocId).categoryOptions\n  //     : []\n\n  return {\n    active,\n    deId,\n    cocId\n  };\n};","// Computes the cartesian product of a matrix (array of array)\nexport const cartesian = args => {\n  const result = [];\n  const lim = args.length - 1;\n\n  function add(row, i) {\n    const len = args[i].length;\n\n    for (let j = 0; j < len; j++) {\n      const a = [...row];\n      a.push(args[i][j]);\n\n      if (i === lim) {\n        result.push(a);\n      } else {\n        add(a, i + 1);\n      }\n    }\n  }\n\n  add([], 0);\n  return result;\n}; // [[1,2,3]. [1,2]] => [[1,1],[1,2],[2,1],[2,2],[3,1],[3,2]]","import i18n from '@dhis2/d2-i18n';\nimport { colors, IconFilter16, Table, TableCellHead, TableHead, TableRowHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useMetadata } from '../../metadata/index.js';\nimport { getDataElementsBySection, getGroupedDataElementsByCatCombo, getGroupedDataElementsByCatComboInOrder } from '../../metadata/selectors.js';\nimport { CategoryComboTable } from '../category-combo-table.js';\nimport styles from './section.module.css';\nexport const SectionFormSection = _ref => {\n  let {\n    section,\n    globalFilterText\n  } = _ref;\n  // Could potentially build table via props instead of rendering children\n  const [filterText, setFilterText] = useState('');\n  const {\n    isLoading,\n    isError,\n    data\n  } = useMetadata();\n\n  if (isLoading || isError) {\n    return null;\n  }\n\n  const dataElements = getDataElementsBySection(data, section.dataSet.id, section.id);\n  const groupedDataElements = section.disableDataElementAutoGroup ? getGroupedDataElementsByCatComboInOrder(data, dataElements) : getGroupedDataElementsByCatCombo(data, dataElements);\n  const maxColumnsInSection = Math.max(...groupedDataElements.map(grp => grp.categoryCombo.categoryOptionCombos.length));\n  const filterInputId = \"filter-input-\".concat(section.id);\n  return /*#__PURE__*/React.createElement(Table, {\n    className: styles.table,\n    suppressZebraStriping: true\n  }, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, {\n    colSpan: \"100%\",\n    className: styles.headerCell\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelWrapper\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, section.displayName), section.description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, section.description || 'Placeholder section description')))), /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, {\n    colSpan: \"100%\",\n    className: styles.headerCell\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: filterInputId,\n    className: styles.filterWrapper\n  }, /*#__PURE__*/React.createElement(IconFilter16, {\n    color: colors.grey600\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: filterInputId,\n    id: filterInputId,\n    type: \"text\",\n    placeholder: i18n.t('Type here to filter in this section'),\n    value: filterText,\n    onChange: _ref2 => {\n      let {\n        target\n      } = _ref2;\n      return setFilterText(target.value);\n    },\n    className: styles.filterInput\n  }))))), groupedDataElements.map((_ref3, i) => {\n    let {\n      categoryCombo,\n      dataElements\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(CategoryComboTable, {\n      key: i //if disableDataElementAutoGroup then duplicate catCombo-ids, so have to use index\n      ,\n      categoryCombo: categoryCombo,\n      dataElements: dataElements,\n      filterText: filterText,\n      globalFilterText: globalFilterText,\n      maxColumnsInSection: maxColumnsInSection\n    });\n  }));\n};\nSectionFormSection.propTypes = {\n  globalFilterText: PropTypes.string,\n  section: PropTypes.shape({\n    dataSet: PropTypes.shape({\n      id: PropTypes.string\n    }),\n    description: PropTypes.string,\n    disableDataElementAutoGroup: PropTypes.bool,\n    displayName: PropTypes.string,\n    id: PropTypes.string\n  })\n};","import { Tab, TabBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSectionFilter } from '../../context-selection/use-context-selection/use-context-selection.js';\nimport { SectionFormSection } from './section.js';\nimport styles from './section.module.css';\nexport const SectionForm = _ref => {\n  let {\n    dataSet,\n    globalFilterText\n  } = _ref;\n  const [sectionId] = useSectionFilter();\n  const filteredSections = sectionId ? dataSet.sections.filter(s => s.id === sectionId) : dataSet.sections;\n\n  if (dataSet.renderAsTabs) {\n    return /*#__PURE__*/React.createElement(TabbedSectionForm, {\n      globalFilterText: globalFilterText,\n      sections: dataSet.sections\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, filteredSections.map(s => /*#__PURE__*/React.createElement(SectionFormSection, {\n    section: s,\n    key: s.id,\n    globalFilterText: globalFilterText\n  })));\n};\nSectionForm.propTypes = {\n  dataSet: PropTypes.shape({\n    renderAsTabs: PropTypes.bool,\n    sections: PropTypes.arrayOf(PropTypes.shape({\n      dataSet: PropTypes.shape({\n        id: PropTypes.string\n      }),\n      description: PropTypes.string,\n      disableDataElementAutoGroup: PropTypes.bool,\n      displayName: PropTypes.string,\n      id: PropTypes.string\n    }))\n  }),\n  globalFilterText: PropTypes.string\n};\n\nconst TabbedSectionForm = _ref2 => {\n  let {\n    sections,\n    globalFilterText\n  } = _ref2;\n  const [sectionId, setSelectedId] = useSectionFilter();\n  const section = sectionId ? sections.find(s => s.id === sectionId) : sections[0];\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(TabBar, {\n    className: styles.sectionTab\n  }, sections.map(s => /*#__PURE__*/React.createElement(Tab, {\n    key: s.id,\n    selected: s.id === section.id,\n    onClick: () => setSelectedId(s.id)\n  }, s.displayName))), /*#__PURE__*/React.createElement(SectionFormSection, {\n    section: section,\n    key: section.id,\n    globalFilterText: globalFilterText\n  }));\n};\n\nTabbedSectionForm.propTypes = {\n  globalFilterText: PropTypes.string,\n  sections: PropTypes.arrayOf(PropTypes.shape({\n    dataSet: PropTypes.shape({\n      id: PropTypes.string\n    }),\n    description: PropTypes.string,\n    disableDataElementAutoGroup: PropTypes.bool,\n    displayName: PropTypes.string,\n    id: PropTypes.string\n  }))\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, InputField } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { CustomForm } from './custom-form.js';\nimport { DefaultForm } from './default-form.js';\nimport styles from './entry-form.module.css';\nimport { SectionForm } from './section-form/index.js';\nconst FORM_TYPES = {\n  DEFAULT: 'DEFAULT',\n  SECTION: 'SECTION',\n  CUSTOM: 'CUSTOM'\n};\nconst formTypeToComponent = {\n  DEFAULT: DefaultForm,\n  SECTION: SectionForm,\n  CUSTOM: CustomForm\n};\nexport const EntryForm = _ref => {\n  let {\n    dataSet\n  } = _ref;\n  const [globalFilterText, setGlobalFilterText] = React.useState('');\n\n  if (!dataSet) {\n    return null;\n  }\n\n  const formType = dataSet.formType;\n  const Component = formTypeToComponent[formType];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, formType !== FORM_TYPES.CUSTOM && /*#__PURE__*/React.createElement(FilterField, {\n    value: globalFilterText,\n    setFilterText: setGlobalFilterText,\n    formType: formType\n  }), /*#__PURE__*/React.createElement(Component, {\n    dataSet: dataSet,\n    globalFilterText: globalFilterText\n  }));\n};\nEntryForm.propTypes = {\n  dataSet: PropTypes.shape({\n    displayName: PropTypes.string,\n    formType: PropTypes.string,\n    id: PropTypes.string\n  })\n};\n\nconst FilterField = _ref2 => {\n  let {\n    value,\n    setFilterText,\n    formType\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterWrapper\n  }, /*#__PURE__*/React.createElement(InputField, {\n    name: \"filter-input\",\n    className: styles.filterField,\n    type: \"text\",\n    placeholder: formType === FORM_TYPES.SECTION ? i18n.t('Filter fields in all sections') : i18n.t('Filter fields'),\n    value: value,\n    onChange: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return setFilterText(value);\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    name: \"Clear\",\n    onClick: () => setFilterText('')\n  }, i18n.t('Clear filter')));\n};\n\nFilterField.propTypes = {\n  formType: PropTypes.string,\n  setFilterText: PropTypes.func,\n  value: PropTypes.string\n};","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, Table } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useMetadata } from '../metadata/index.js';\nimport { getDataElementsByDataSetId, getGroupedDataElementsByCatCombo } from '../metadata/selectors.js';\nimport { CategoryComboTable } from './category-combo-table.js';\nimport styles from './entry-form.module.css';\nexport const DefaultForm = _ref => {\n  let {\n    dataSet,\n    globalFilterText\n  } = _ref;\n  const {\n    isLoading,\n    isError,\n    data\n  } = useMetadata();\n\n  if (isLoading || isError) {\n    return null;\n  }\n\n  const dataElements = getDataElementsByDataSetId(data, dataSet.id);\n  const groupedDataElements = getGroupedDataElementsByCatCombo(data, dataElements);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"wrapper\"\n  }, groupedDataElements.length < 1 && /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('This data set has no assigned Data Elements'),\n    warning: true\n  }, i18n.t('There are no Data Elements in this data set. Adds some Data Elements to use this data set.')), /*#__PURE__*/React.createElement(Table, {\n    className: styles.table,\n    suppressZebraStriping: true\n  }, groupedDataElements.map(_ref2 => {\n    let {\n      categoryCombo,\n      dataElements\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(CategoryComboTable, {\n      key: categoryCombo.id,\n      categoryCombo: categoryCombo,\n      dataElements: dataElements,\n      globalFilterText: globalFilterText\n    });\n  })));\n};\nDefaultForm.propTypes = {\n  dataSet: PropTypes.shape({\n    displayName: PropTypes.string,\n    id: PropTypes.string\n  }),\n  globalFilterText: PropTypes.string\n};","// import i18n from '@dhis2/d2-i18n'\n// import { NoticeBox } from '@dhis2/ui'\nimport React from 'react';\nimport HtmlReport from './custom-form/custom-form-iframe.js';\nimport { processedHtml } from './custom-form/mock-processed-html.js';\nexport const CustomForm = () => /*#__PURE__*/React.createElement(HtmlReport, {\n  html: processedHtml\n});","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Form } from 'react-final-form';\nexport function FinalFormWrapper(_ref) {\n  let {\n    children,\n    initialValues\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Form, {\n    onSubmit: (values, form) => {\n      console.log({\n        values,\n        form\n      });\n    },\n    initialValues: initialValues,\n    keepDirtyOnReinitialize: true\n  }, () => children);\n}\nFinalFormWrapper.propTypes = {\n  children: PropTypes.node,\n  initialValues: PropTypes.any\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { tabbable } from 'tabbable'; // todo: does not work with `select` components (because focus gets trapped in portal?)\n\nconst focusNext = rootNode => {\n  var _nextElement$select;\n\n  // Need to get this list every time in case form changes\n  const tabbableElements = tabbable(rootNode);\n  const currentIdx = tabbableElements.indexOf(document.activeElement);\n  const nextIdx = (currentIdx + 1) % tabbableElements.length;\n  const nextElement = tabbableElements[nextIdx];\n  nextElement.focus();\n  (_nextElement$select = nextElement.select) === null || _nextElement$select === void 0 ? void 0 : _nextElement$select.call(nextElement); // Select text, if possible\n};\n\nconst focusPrev = rootNode => {\n  var _prevElement$select;\n\n  const tabbableElements = tabbable(rootNode);\n  const currentIdx = tabbableElements.indexOf(document.activeElement); // %-operator doesn't work as desired with negatives in JS, so simple condition check instead:\n\n  const prevIdx = currentIdx === 0 ? tabbableElements.length - 1 : currentIdx - 1;\n  const prevElement = tabbableElements[prevIdx];\n  prevElement.focus();\n  (_prevElement$select = prevElement.select) === null || _prevElement$select === void 0 ? void 0 : _prevElement$select.call(prevElement);\n};\n/**\n * Emulates 'tab' behavior to focus next/previous fields in the workspace\n * with other keybinds\n */\n\n\nexport const KeyboardNavManager = _ref => {\n  let {\n    children\n  } = _ref;\n  const rootNodeRef = React.useRef();\n\n  const handleKeyDown = event => {\n    const {\n      key\n    } = event;\n\n    if (key === 'ArrowDown' || key === 'Enter') {\n      event.preventDefault();\n      focusNext(rootNodeRef.current);\n    } else if (key === 'ArrowUp') {\n      event.preventDefault();\n      focusPrev(rootNodeRef.current);\n    } // tab and shift-tab on their own work as expected\n\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: rootNodeRef,\n    onKeyDown: handleKeyDown\n  }, children);\n};\nKeyboardNavManager.propTypes = {\n  children: PropTypes.node\n};","import { useQuery, useIsMutating } from 'react-query';\nimport { useContextSelection } from '../context-selection/index.js';\nimport { dataValueSets } from './query-key-factory.js';\nimport { useAttributeOptionCombo } from './use-attribute-option-combo.js'; // Form value object structure: { [dataElementId]: { [cocId]: value } }\n\nfunction mapDataValuesToFormInitialValues(dataValues) {\n  const formInitialValues = dataValues.reduce((acc, _ref) => {\n    let {\n      dataElement,\n      categoryOptionCombo,\n      value\n    } = _ref;\n\n    if (!acc[dataElement]) {\n      acc[dataElement] = {\n        [categoryOptionCombo]: value\n      };\n    } else {\n      acc[dataElement][categoryOptionCombo] = value;\n    }\n\n    return acc;\n  }, {});\n  return formInitialValues;\n}\n\nexport const useInitialDataValues = () => {\n  const [{\n    dataSetId,\n    orgUnitId,\n    periodId\n  }] = useContextSelection();\n  const attributeOptionCombo = useAttributeOptionCombo();\n  const queryKey = dataValueSets.byIds({\n    dataSetId,\n    periodId,\n    orgUnitId,\n    attributeOptionCombo\n  });\n  const activeMutations = useIsMutating({\n    mutationKey: queryKey\n  });\n  const hasParameters = !!dataSetId && !!orgUnitId && !!periodId && !!attributeOptionCombo;\n  return useQuery(queryKey, {\n    // Only enable this query if there are no ongoing mutations\n    enabled: activeMutations === 0 && hasParameters,\n    select: data => // It's possible for the backend to return a response that does not have dataValues\n    data.dataValues ? mapDataValuesToFormInitialValues(data.dataValues) : {},\n    // Only fetch whilst offline, to prevent optimistic updates from being overwritten\n    networkMode: 'online',\n    meta: {\n      persist: true\n    }\n  });\n};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './data-workspace.module.css';\nimport { EntryForm } from './entry-form.js';\nimport { FinalFormWrapper } from './final-form-wrapper.js';\nimport { KeyboardNavManager } from './keyboard-nav-manager.js';\nimport { useDataSet } from './use-data-set.js';\nimport { useInitialDataValues } from './use-initial-data-values.js';\nexport const DataWorkspace = _ref => {\n  let {\n    selectionHasNoFormMessage\n  } = _ref;\n  const dataSetFetch = useDataSet();\n  const initialDataValuesFetch = useInitialDataValues();\n\n  if (selectionHasNoFormMessage) {\n    const title = i18n.t('The current selection does not have a form');\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      title: title\n    }, selectionHasNoFormMessage);\n  }\n\n  if (dataSetFetch.isIdle || initialDataValuesFetch.isIdle) {\n    return null;\n  }\n\n  if (dataSetFetch.isLoading || initialDataValuesFetch.isLoading) {\n    return /*#__PURE__*/React.createElement(CircularLoader, null);\n  }\n\n  if (dataSetFetch.error || initialDataValuesFetch.error) {\n    return 'Error!';\n  }\n\n  return /*#__PURE__*/React.createElement(KeyboardNavManager, null, /*#__PURE__*/React.createElement(FinalFormWrapper, {\n    initialValues: initialDataValuesFetch.data\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.wrapper\n  }, /*#__PURE__*/React.createElement(EntryForm, {\n    dataSet: dataSetFetch.data\n  }))));\n};\nDataWorkspace.propTypes = {\n  selectionHasNoFormMessage: PropTypes.string\n};","import { useQuery } from 'react-query';\nimport { useContextSelection } from '../context-selection/index.js';\nexport const useDataSet = () => {\n  const [{\n    dataSetId\n  }] = useContextSelection();\n  return useQuery(['dataSets', {\n    id: dataSetId,\n    params: {\n      fields: \"id,name,displayName,displayFormName,formType,renderAsTabs,renderHorizontally,\\n            dataSetElements[dataElement[id,name,formName,\\n            categoryCombo[id,name,categories[id,displayName,categoryOptions[id,displayName]],categoryOptionCombos[id,name]]]],\\n            sections[:owner,displayName,categoryCombos[id,categories[id,displayName,categoryOptions[id,displayName]]]]\"\n    }\n  }], {\n    enabled: !!dataSetId\n  });\n};","import classnames from 'classnames';\nimport { node, bool } from 'prop-types';\nimport React from 'react';\nimport css from './layout.module.css';\n\nconst Layout = _ref => {\n  let {\n    header,\n    main,\n    sidebar,\n    footer,\n    showSidebar,\n    showFooter\n  } = _ref;\n  const wrapperClass = classnames(css.wrapper, {\n    [css.showSidebar]: showSidebar,\n    [css.showFooter]: showFooter\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: wrapperClass\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: css.header\n  }, header), /*#__PURE__*/React.createElement(\"main\", {\n    className: css.main\n  }, main), /*#__PURE__*/React.createElement(\"aside\", {\n    className: css.sidebar\n  }, sidebar), showFooter && /*#__PURE__*/React.createElement(\"footer\", {\n    className: css.footer\n  }, footer));\n};\n\nLayout.propTypes = {\n  footer: node,\n  header: node,\n  main: node,\n  showFooter: bool,\n  showSidebar: bool,\n  sidebar: node\n};\nexport default Layout;","import i18n from '@dhis2/d2-i18n';\nimport { Tag, IconError16, IconCheckmarkCircle16 } from '@dhis2/ui';\nimport React from 'react';\nimport { useIsMutating } from 'react-query';\n\nconst MutationIndicator = () => {\n  const pendingMutations = useIsMutating();\n  const message = pendingMutations ? i18n.t('There are {{ pendingMutations }} pending mutations', {\n    pendingMutations\n  }) : i18n.t('Synced');\n  return /*#__PURE__*/React.createElement(Tag, {\n    icon: pendingMutations ? /*#__PURE__*/React.createElement(IconError16, null) : /*#__PURE__*/React.createElement(IconCheckmarkCircle16, null)\n  }, message);\n};\n\nexport default MutationIndicator;","import { CssVariables } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport './app.css';\nimport { ContextSelection } from '../context-selection/index.js';\nimport { useCustomFormsPrefetch } from '../custom-forms/index.js';\nimport { DataWorkspace } from '../data-workspace/index.js';\nimport { Layout } from './layout/index.js';\nimport { MutationIndicator } from './mutation-indicator/index.js';\n/**\n * \"use-query-params\" requires a router. It suggests react-router-dom in the\n * docs, so that's why I chose that one. Unfortunately it doesn't work with\n * react-router-dom@6, so I have do go with react-router-dom@^5\n */\n\nconst App = () => {\n  useCustomFormsPrefetch();\n  const [selectionHasNoFormMessage, setSelectionHasNoFormMessage] = useState('');\n  const contextSelection = /*#__PURE__*/React.createElement(ContextSelection, {\n    setSelectionHasNoFormMessage: setSelectionHasNoFormMessage\n  });\n  const dataWorkspace = /*#__PURE__*/React.createElement(DataWorkspace, {\n    selectionHasNoFormMessage: selectionHasNoFormMessage\n  });\n  return /*#__PURE__*/React.createElement(Router, null, /*#__PURE__*/React.createElement(QueryParamProvider, {\n    ReactRouterRoute: Route\n  }, /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }), /*#__PURE__*/React.createElement(Layout, {\n    header: contextSelection,\n    main: dataWorkspace,\n    sidebar: \"\",\n    footer: /*#__PURE__*/React.createElement(MutationIndicator, null),\n    showFooter: true\n  })));\n};\n\nexport default App;","const createQueryFn = engine => {\n  // https://react-query.tanstack.com/guides/query-keys\n  return _ref => {\n    let {\n      queryKey\n    } = _ref;\n    const [resource, options] = queryKey;\n    const appRuntimeQuery = {\n      [resource]: {\n        resource\n      }\n    };\n\n    if (options !== null && options !== void 0 && options.id) {\n      appRuntimeQuery[resource].id = options.id;\n    }\n\n    if (options !== null && options !== void 0 && options.params) {\n      appRuntimeQuery[resource].params = options.params;\n    }\n\n    return engine.query(appRuntimeQuery).then(data => data[resource]);\n  };\n};\n\nexport default createQueryFn;","import { get, set, del } from 'idb-keyval';\nimport throttle from 'lodash.throttle';\n/**\n * Creates an Indexed DB persister\n * @see https://react-query.tanstack.com/plugins/persistQueryClient#building-a-persistor\n * @see https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\n */\n\nconst createIDBPersister = function () {\n  let idbValidKey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'reactQuery';\n  // Throttle persisting by a second to ensure that we're not writing to the cache\n  // more than once per second. Otherwise we'd potentially slow down the app.\n  const persistClient = throttle(client => set(idbValidKey, client), 1000);\n  return {\n    persistClient,\n    restoreClient: () => {\n      return get(idbValidKey);\n    },\n    removeClient: () => {\n      return del(idbValidKey);\n    }\n  };\n};\n\nexport default createIDBPersister;","import { useDataEngine } from '@dhis2/app-runtime';\nimport { QueryClient } from 'react-query';\nimport { persistQueryClient } from 'react-query/persistQueryClient';\nimport createQueryFn from './create-query-fn.js';\nimport createIDBPersister from './persister.js';\nconst queryClient = new QueryClient();\n\nconst useQueryClient = () => {\n  const engine = useDataEngine();\n  const queryFn = createQueryFn(engine);\n  queryClient.setDefaultOptions({\n    queries: {\n      queryFn,\n      refetchOnWindowFocus: false,\n      // Inactive queries were being garbage collected immediately unless set to Infinity\n      cacheTime: Infinity,\n      // https://react-query-alpha.tanstack.com/guides/network-mode\n      networkMode: 'offlineFirst'\n    }\n  });\n  const persister = createIDBPersister();\n  persistQueryClient({\n    queryClient,\n    persister,\n    maxAge: Infinity,\n    dehydrateOptions: {\n      dehydrateMutations: true,\n      dehydrateQueries: true,\n      shouldDehydrateQuery: query => {\n        var _query$meta;\n\n        const isSuccess = query.state.status === 'success';\n        const shouldPersist = (query === null || query === void 0 ? void 0 : (_query$meta = query.meta) === null || _query$meta === void 0 ? void 0 : _query$meta.persist) === true;\n        return isSuccess && shouldPersist;\n      }\n    }\n  });\n  return queryClient;\n};\n\nexport default useQueryClient;","import React from 'react';\nimport { QueryClientProvider } from 'react-query';\nimport App from './app.js';\nimport useQueryClient from './query-client/use-query-client.js';\n\nconst AppWrapper = () => {\n  const queryClient = useQueryClient();\n  return /*#__PURE__*/React.createElement(QueryClientProvider, {\n    client: queryClient\n  }, /*#__PURE__*/React.createElement(App, null));\n};\n\nexport default AppWrapper;"],"sourceRoot":""}